2025-04-25 15:04:37,360 - __main__ - INFO - Запуск бота...
2025-04-25 15:04:37,361 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:04:37,879 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:04:37,879 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:04:37,880 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:04:37,880 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:04:37,880 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:04:37,881 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:04:37,881 - tzlocal - DEBUG - Looking up time zone info from registry
2025-04-25 15:04:37,883 - __main__ - ERROR - Ошибка при запуске планировщика уведомлений: no running event loop
2025-04-25 15:18:43,563 - __main__ - INFO - Запуск бота...
2025-04-25 15:18:43,573 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:18:44,995 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:18:44,995 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:18:44,996 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:18:44,997 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:18:44,997 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:18:44,997 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:18:44,997 - tzlocal - DEBUG - Looking up time zone info from registry
2025-04-25 15:18:44,999 - __main__ - ERROR - Ошибка при запуске планировщика уведомлений: no running event loop
2025-04-25 15:22:12,710 - __main__ - INFO - Запуск бота...
2025-04-25 15:22:12,711 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:22:14,162 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:22:14,162 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:22:14,163 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:22:14,163 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:22:14,163 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:22:14,163 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:22:14,170 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:22:14,170 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:22:14,170 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:22:14,170 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:22:14,171 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:22:14,171 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:22:14,171 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:22:14,175 - httpcore.connection - DEBUG - connect_tcp.started host='mdproxy.md.int' port=8080 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:22:14,179 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001DF90035A90>
2025-04-25 15:22:14,179 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'CONNECT']>
2025-04-25 15:22:14,179 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:14,180 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'CONNECT']>
2025-04-25 15:22:14,180 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:14,180 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'CONNECT']>
2025-04-25 15:22:14,183 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 407, b'Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )', [(b'Via', b'1.1 MDPROXY'), (b'Proxy-Authenticate', b'Negotiate'), (b'Proxy-Authenticate', b'Kerberos'), (b'Proxy-Authenticate', b'NTLM'), (b'Proxy-Authenticate', b'Digest qop="auth",algorithm=MD5-sess,nonce="+Upgraded+v19d8d8fc4a50b8d20c671d16573ecbac6759cd900a2b5db01982e7c28fdc3ff658a17589b066af06e61690eba2f295575b1c9c6d2aa09c798",charset=utf-8,realm="md.int"'), (b'Proxy-Authenticate', b'Basic realm="MDPROXY.md.int"'), (b'Connection', b'close'), (b'Proxy-Connection', b'close'), (b'Pragma', b'no-cache'), (b'Cache-Control', b'no-cache'), (b'Content-Type', b'text/html'), (b'Content-Length', b'708')])
2025-04-25 15:22:14,183 - httpcore.connection - DEBUG - close.started
2025-04-25 15:22:14,183 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:22:14,183 - telegram.ext - ERROR - Network Retry Loop (Bootstrap Initialize Application): Failed run number 0 of 0. Aborting.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 297, in handle_async_request
    raise ProxyError(msg)
httpcore.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 277, in do_request
    res = await self._client.request(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\shish.me\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_utils\networkloop.py", line 115, in network_retry_loop
    if not await do_action():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_utils\networkloop.py", line 93, in do_action
    return await action_cb()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 486, in initialize
    await self.bot.initialize()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 308, in initialize
    await super().initialize()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 835, in initialize
    await self.get_me()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 1969, in get_me
    return await super().get_me(
           ^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 967, in get_me
    result = await self._post(
             ^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 691, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 362, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 720, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 197, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
                    ^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 301, in do_request
    raise NetworkError(f"httpx.{err.__class__.__name__}: {err}") from err
telegram.error.NetworkError: httpx.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )
2025-04-25 15:22:14,300 - telegram.ext.Application - DEBUG - This Application is already shut down. Returning.
2025-04-25 15:22:14,300 - __main__ - ERROR - Ошибка при запуске бота: httpx.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )
2025-04-25 15:22:26,137 - __main__ - INFO - Запуск бота...
2025-04-25 15:22:26,138 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:22:26,702 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:22:26,702 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:22:26,702 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:22:26,703 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:22:26,703 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:22:26,703 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:22:26,703 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:22:26,703 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:22:26,704 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:22:26,704 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:22:26,704 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:22:26,704 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:22:26,704 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:22:26,708 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:22:26,867 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C442D550>
2025-04-25 15:22:26,867 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000298C43DD910> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:22:27,023 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C440DD10>
2025-04-25 15:22:27,023 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:27,024 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:27,024 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:27,024 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:27,024 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:27,178 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:27,178 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:22:27,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:27,179 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:27,179 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:27,179 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:27,179 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:22:27,179 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:22:27,179 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:22:27,179 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:22:27,179 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:22:27,179 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:22:27,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:27,180 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:27,180 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:27,180 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:27,180 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:27,333 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:27,333 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:22:27,333 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:27,333 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:27,333 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:27,333 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:27,333 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:22:27,333 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:22:27,334 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:22:27,334 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:22:27,334 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:22:27,334 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:27,334 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:22:27,334 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:22:27,335 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:22:27,335 - telegram.ext.Application - INFO - Application started
2025-04-25 15:22:27,335 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:22:27,335 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:22:27,335 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:23:26.703378+00:00 (in 59.367996 seconds)
2025-04-25 15:22:27,489 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C446C7D0>
2025-04-25 15:22:27,489 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000298C43DD5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:22:27,652 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C43BE190>
2025-04-25 15:22:27,652 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:27,653 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:27,653 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:27,653 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:27,653 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:37,810 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:37,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:37,810 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:37,810 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:37,810 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:37,810 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:37,810 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:22:37,810 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:22:37,811 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:37,811 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:37,811 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:37,811 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:37,811 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:37,811 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:47,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:47,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:47,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:47,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:47,475 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:47,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:47,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489791, 'message': {'message_id': 684, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558567, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:22:47,475 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489791]
2025-04-25 15:22:47,476 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 47, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=684, supergroup_chat_created=False, text='/start'), update_id=829489791)
2025-04-25 15:22:47,476 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489792, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:47,477 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:47,477 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:47,477 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:47,477 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:47,478 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,294 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3492'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:49,294 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:49,294 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,295 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:49,295 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:49,295 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:49,295 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489792, 'callback_query': {'id': '7022623323337934593', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 681, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745557852, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:22:49,295 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489792]
2025-04-25 15:22:49,295 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323337934593', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 10, 52, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=681, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489792)
2025-04-25 15:22:49,301 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 681) with state None
2025-04-25 15:22:49,301 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323337934593'}`
2025-04-25 15:22:49,301 - httpcore.connection - DEBUG - close.started
2025-04-25 15:22:49,301 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:22:49,301 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:22:49,302 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489793, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:49,302 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,302 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:49,302 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,302 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:49,302 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,448 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C43BFCE0>
2025-04-25 15:22:49,448 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000298C43DD910> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:22:49,595 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C4490950>
2025-04-25 15:22:49,595 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,595 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:49,595 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,595 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:49,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,746 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:49,746 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:22:49,746 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,747 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:49,747 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:49,747 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:49,747 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:22:49,747 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:22:49,750 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:49,751 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_periods=[], arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 15:22:49,753 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 15:22:49,754 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 15:22:49,755 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:49,771 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-25 15:22:49,771 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 15:22:49,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:49,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:49,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,938 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:49,938 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:22:49,938 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,938 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:49,938 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:49,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:49,938 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 685, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558569, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 15:22:49,940 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:49,941 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 15:22:49,942 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:49,942 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:49,942 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:49,942 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:49,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:50,120 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3201'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:50,120 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:22:50,120 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:50,121 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:50,121 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:50,121 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:50,121 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 15:22:53,888 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3470'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:53,888 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:53,889 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:53,889 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:53,889 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:53,889 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:53,889 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489793, 'callback_query': {'id': '7022623324650586400', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 15:22:53,889 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489793]
2025-04-25 15:22:53,889 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324650586400', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489793)
2025-04-25 15:22:53,890 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:22:53,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324650586400'}`
2025-04-25 15:22:53,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:53,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489794, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:53,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:54,136 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:54,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:22:54,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:54,137 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:54,137 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:54,137 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:54,137 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:22:54,137 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 15:22:54,139 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:54,140 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_periods=[], arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 15:22:54,145 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 15:22:54,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:54,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:54,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:54,146 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:54,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:54,441 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:54,441 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:22:54,441 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:54,441 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:54,441 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:54,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:54,441 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 687, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558574, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 15:22:55,549 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3472'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:55,549 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:55,549 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:55,549 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:55,549 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:55,549 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:55,549 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489794, 'callback_query': {'id': '7022623321482135223', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 15:22:55,549 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489794]
2025-04-25 15:22:55,550 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321482135223', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489794)
2025-04-25 15:22:55,550 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:22:55,550 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321482135223'}`
2025-04-25 15:22:55,550 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:55,551 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489795, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:55,551 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:55,552 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:55,552 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:55,704 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:55,704 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:22:55,704 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:55,704 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:55,704 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:55,704 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:55,705 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:22:55,705 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 15:22:55,706 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:55,707 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_periods=[], arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 15:22:56,650 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 15:22:56,650 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:56,651 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:56,651 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:56,651 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:56,651 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:56,814 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:56,815 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:22:56,815 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:56,815 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:56,815 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:56,815 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:56,815 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 688, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558576, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 15:22:58,437 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3483'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:58,437 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:22:58,437 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,437 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:58,437 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:58,438 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:58,438 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489795, 'callback_query': {'id': '7022623324419874853', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 15:22:58,438 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489795]
2025-04-25 15:22:58,438 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324419874853', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489795)
2025-04-25 15:22:58,439 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:22:58,439 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324419874853'}`
2025-04-25 15:22:58,439 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,440 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489796, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:22:58,440 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:58,440 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:58,441 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,592 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:58,592 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:22:58,592 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,592 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:58,592 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:58,593 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:58,593 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:22:58,593 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 15:22:58,595 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:22:58,596 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_periods=[], arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 15:22:58,596 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 15:22:58,596 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,596 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:22:58,596 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,597 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:22:58,597 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:22:58,761 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:22:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:22:58,761 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:22:58,761 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:22:58,761 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:22:58,761 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:22:58,761 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:22:58,761 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 689, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558578, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 15:22:58,761 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_ARRIVAL_NOTIFICATION
2025-04-25 15:23:08,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:08,599 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:08,599 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:08,599 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:08,599 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:08,599 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:08,600 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:23:08,600 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:23:08,600 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489796, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:08,600 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:08,600 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:08,601 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:08,601 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:08,601 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:23:11,192 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'332'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:11,192 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:11,192 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:11,192 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:11,193 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:11,193 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:11,193 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489796, 'message': {'message_id': 690, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558591, 'text': '09:00'}}]`
2025-04-25 15:23:11,193 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489796]
2025-04-25 15:23:11,193 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 23, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=690, supergroup_chat_created=False, text='09:00'), update_id=829489796)
2025-04-25 15:23:11,193 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:11,194 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:11,194 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:11,194 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:11,194 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:11,194 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:23:21,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:21,349 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:21,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:21,349 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:21,349 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:21,349 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:21,349 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:23:21,349 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:23:21,349 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:21,350 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:21,350 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:21,350 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:21,350 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:21,350 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:23:26,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:23:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:24:26.703378+00:00 (in 59.998291 seconds)
2025-04-25 15:23:26,705 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:24:26 UTC)" (scheduled at 2025-04-25 05:23:26.703378+00:00)
2025-04-25 15:23:26,705 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:23:26,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:23:26,744 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:24:26 UTC)" executed successfully
2025-04-25 15:23:31,506 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:31,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:31,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:31,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:31,507 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:31,507 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:31,507 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:23:31,507 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:23:31,507 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:31,507 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:31,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:31,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:31,508 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:31,508 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:23:41,663 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:41,663 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:41,664 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:41,664 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:41,664 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:41,664 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:41,664 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:23:41,664 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:23:41,664 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:41,664 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:41,665 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:41,665 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:41,665 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:41,665 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:23:51,819 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:23:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:23:51,819 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:23:51,819 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:23:51,819 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:23:51,819 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:23:51,819 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:23:51,820 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:23:51,820 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:23:51,820 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:23:51,820 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:23:51,820 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:23:51,820 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:23:51,820 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:23:51,821 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:01,976 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:01,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:01,976 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:01,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:01,976 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:01,976 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:01,976 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:01,976 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:01,976 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:01,977 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:01,977 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:01,977 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:01,977 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:01,977 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:12,137 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:12,138 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:12,138 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:12,138 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:12,138 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:12,138 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:12,138 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:12,138 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:12,138 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:12,139 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:12,139 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:12,139 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:12,139 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:12,139 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:22,294 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:22,294 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:22,294 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:22,294 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:22,294 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:22,294 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:22,295 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:22,295 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:22,295 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:22,295 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:22,295 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:22,295 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:22,295 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:22,296 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:26,705 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:24:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:25:26.703378+00:00 (in 59.997454 seconds)
2025-04-25 15:24:26,706 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:25:26 UTC)" (scheduled at 2025-04-25 05:24:26.703378+00:00)
2025-04-25 15:24:26,706 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:24:26,719 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:24:26,723 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:25:26 UTC)" executed successfully
2025-04-25 15:24:32,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:32,457 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:32,457 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:32,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:32,457 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:32,457 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:32,457 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:32,457 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:32,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:32,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:32,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:32,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:32,458 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:32,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:42,613 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:42,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:42,614 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:42,614 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:42,614 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:42,614 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:42,614 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:42,614 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:42,614 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:42,615 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:42,615 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:42,615 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:42,615 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:42,615 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:24:52,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:24:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:24:52,770 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:24:52,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:24:52,770 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:24:52,770 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:24:52,770 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:24:52,770 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:24:52,770 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:24:52,770 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:24:52,771 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:24:52,771 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:24:52,771 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:24:52,771 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:24:52,771 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:02,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:02,926 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:02,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:02,926 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:02,926 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:02,926 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:02,926 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:02,926 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:02,926 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:02,927 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:02,927 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:02,927 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:02,927 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:02,927 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:13,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:13,082 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:13,082 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:13,082 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:13,083 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:13,083 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:13,083 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:13,083 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:13,083 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:13,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:13,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:13,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:13,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:13,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:23,238 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:23,238 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:23,239 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:23,239 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:23,239 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:23,239 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:23,239 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:23,239 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:23,239 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:23,239 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:23,240 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:23,240 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:23,240 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:23,240 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:26,705 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:25:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:26:26.703378+00:00 (in 59.997396 seconds)
2025-04-25 15:25:26,706 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:26:26 UTC)" (scheduled at 2025-04-25 05:25:26.703378+00:00)
2025-04-25 15:25:26,706 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:25:26,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:25:26,714 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:26:26 UTC)" executed successfully
2025-04-25 15:25:33,401 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:33,401 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:33,401 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:33,401 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:33,401 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:33,401 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:33,401 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:33,401 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:33,402 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:33,402 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:33,402 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:33,402 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:33,402 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:33,402 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:43,556 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:43,557 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:43,557 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:43,557 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:43,557 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:43,557 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:43,557 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:43,557 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:43,557 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:43,558 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:43,558 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:43,558 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:43,558 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:43,558 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:25:53,715 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:25:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:25:53,715 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:25:53,716 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:25:53,716 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:25:53,716 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:25:53,716 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:25:53,716 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:25:53,716 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:25:53,716 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:25:53,717 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:25:53,717 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:25:53,717 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:25:53,718 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:25:53,718 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:03,873 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:03,873 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:03,874 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:03,874 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:03,874 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:03,874 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:03,874 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:03,874 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:03,874 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:03,875 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:03,875 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:03,875 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:03,875 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:03,875 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:14,032 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:14,032 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:14,032 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:14,032 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:14,032 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:14,032 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:14,032 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:14,033 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:14,033 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:14,033 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:14,033 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:14,033 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:14,033 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:14,033 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:24,190 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:24,190 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:24,190 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:24,190 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:24,190 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:24,190 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:24,190 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:24,191 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:24,191 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:24,191 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:24,191 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:24,191 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:24,191 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:24,191 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:26,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:26:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:27:26.703378+00:00 (in 59.998210 seconds)
2025-04-25 15:26:26,705 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:27:26 UTC)" (scheduled at 2025-04-25 05:26:26.703378+00:00)
2025-04-25 15:26:26,705 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:26:26,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:26:26,713 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:27:26 UTC)" executed successfully
2025-04-25 15:26:34,346 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:34,347 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:34,347 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:34,347 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:34,347 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:34,347 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:34,347 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:34,347 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:34,348 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:34,348 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:34,349 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:34,349 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:34,349 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:34,349 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:44,502 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:44,502 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:44,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:44,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:44,502 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:44,502 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:44,502 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:44,502 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:44,503 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:44,503 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:44,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:44,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:44,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:44,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:26:54,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:26:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:26:54,658 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:26:54,658 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:26:54,658 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:26:54,658 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:26:54,658 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:26:54,658 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:26:54,658 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:26:54,658 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:26:54,659 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:26:54,659 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:26:54,659 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:26:54,659 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:26:54,659 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:04,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:04,813 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:04,813 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:04,813 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:04,813 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:04,813 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:04,814 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:04,814 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:04,814 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:04,814 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:04,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:04,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:04,815 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:04,815 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:14,968 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:14,969 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:14,969 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:14,969 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:14,969 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:14,969 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:14,969 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:14,969 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:14,969 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:14,970 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:14,970 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:14,970 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:14,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:14,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:25,124 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:25,124 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:25,125 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:25,125 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:25,125 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:25,125 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:25,125 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:25,125 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:25,125 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:25,125 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:25,126 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:25,126 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:25,126 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:25,126 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:26,705 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:27:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:28:26.703378+00:00 (in 59.998163 seconds)
2025-04-25 15:27:26,705 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:28:26 UTC)" (scheduled at 2025-04-25 05:27:26.703378+00:00)
2025-04-25 15:27:26,705 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:27:26,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:27:26,714 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:28:26 UTC)" executed successfully
2025-04-25 15:27:35,279 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:35,279 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:35,279 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:35,279 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:35,279 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:35,280 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:35,280 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:35,280 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:35,280 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:35,280 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:35,280 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:35,281 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:35,281 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:35,281 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:45,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:45,457 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:45,457 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:45,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:45,457 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:45,457 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:45,457 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:45,457 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:45,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:45,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:45,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:45,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:45,458 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:45,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:27:55,611 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:27:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:27:55,611 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:27:55,611 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:27:55,611 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:27:55,611 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:27:55,611 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:27:55,611 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:27:55,611 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:27:55,612 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:27:55,612 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:27:55,612 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:27:55,612 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:27:55,612 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:27:55,612 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:05,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:05,771 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:05,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:05,771 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:05,771 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:05,771 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:05,771 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:05,771 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:05,771 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:05,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:05,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:05,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:05,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:05,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:15,926 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:15,926 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:15,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:15,926 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:15,927 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:15,927 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:15,927 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:15,927 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:15,927 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:15,928 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:15,928 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:15,928 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:15,928 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:15,928 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:26,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:26,083 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:26,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:26,083 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:26,083 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:26,083 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:26,083 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:26,083 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:26,083 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:26,084 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:26,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:26,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:26,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:26,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:26,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:28:26,705 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:29:26.703378+00:00 (in 59.998335 seconds)
2025-04-25 15:28:26,705 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:29:26 UTC)" (scheduled at 2025-04-25 05:28:26.703378+00:00)
2025-04-25 15:28:26,705 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:28:26,709 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:28:26,712 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:29:26 UTC)" executed successfully
2025-04-25 15:28:36,238 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:36,238 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:36,238 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:36,238 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:36,239 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:36,239 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:36,239 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:36,239 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:36,239 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:36,239 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:36,240 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:36,240 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:36,240 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:36,240 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:46,393 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:46,394 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:46,394 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:46,394 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:46,394 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:46,394 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:46,394 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:46,394 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:46,394 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:46,395 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:46,395 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:46,395 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:46,395 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:46,395 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:28:56,547 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:28:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:28:56,548 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:28:56,548 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:28:56,548 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:28:56,548 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:28:56,548 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:28:56,548 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:28:56,548 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:28:56,548 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:28:56,549 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:28:56,549 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:28:56,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:28:56,549 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:28:56,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:06,705 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:06,705 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:06,705 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:06,705 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:06,705 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:06,705 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:06,705 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:06,705 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:06,706 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:06,706 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:06,706 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:06,706 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:06,706 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:06,706 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:16,859 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:16,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:16,860 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:16,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:16,860 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:16,860 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:16,860 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:16,860 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:16,860 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:16,861 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:16,861 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:16,861 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:16,861 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:16,861 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:26,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:29:26,704 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:30:26.703378+00:00 (in 59.998641 seconds)
2025-04-25 15:29:26,704 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:30:26 UTC)" (scheduled at 2025-04-25 05:29:26.703378+00:00)
2025-04-25 15:29:26,704 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:29:26,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:29:26,713 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:30:26 UTC)" executed successfully
2025-04-25 15:29:27,014 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:27,015 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:27,015 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:27,015 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:27,015 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:27,015 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:27,015 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:27,015 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:27,015 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:27,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:27,016 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:27,016 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:27,016 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:27,016 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:37,170 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:37,170 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:37,171 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:37,171 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:37,171 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:37,171 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:37,171 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:37,171 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:37,171 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:37,171 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:37,172 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:37,172 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:37,172 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:37,172 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:47,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:47,325 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:47,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:47,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:47,325 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:47,325 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:47,325 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:47,326 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:47,326 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:47,326 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:47,326 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:47,326 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:47,326 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:47,326 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:29:57,481 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:29:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:29:57,481 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:29:57,482 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:29:57,482 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:29:57,482 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:29:57,482 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:29:57,482 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:29:57,482 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:29:57,482 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:29:57,483 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:29:57,483 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:29:57,483 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:29:57,483 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:29:57,483 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:07,661 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:07,661 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:07,661 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:07,661 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:07,661 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:07,663 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:07,664 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:30:07,664 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:30:07,664 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:07,665 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:07,665 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:07,666 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:07,666 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:07,666 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:17,819 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:17,819 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:17,819 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:17,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:17,820 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:17,820 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:17,820 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:30:17,820 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:30:17,820 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:17,820 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:17,821 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:17,821 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:17,821 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:17,821 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:20,045 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 15:30:20,045 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 15:30:20,045 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 15:30:20,046 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 15:30:20,046 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 15:30:20,046 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:20,046 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 15:30:20,046 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489797, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:20,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:20,047 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:30:20,211 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C4373F00>
2025-04-25 15:30:20,211 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000298C43DD5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:30:20,366 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000298C43728B0>
2025-04-25 15:30:20,366 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:20,367 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:20,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:20,367 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:20,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:23,518 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:23,519 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:23,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:23,519 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:23,519 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:23,519 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:23,519 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:30:23,519 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:30:23,519 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 15:30:23,519 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 15:30:23,519 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 15:30:23,519 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 15:30:23,519 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 15:30:23,520 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 15:30:23,530 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 15:30:23,530 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 15:30:23,530 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 15:30:23,530 - httpcore.connection - DEBUG - close.started
2025-04-25 15:30:23,530 - httpcore.connection - DEBUG - close.started
2025-04-25 15:30:23,530 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:30:23,531 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:30:23,531 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 15:30:23,531 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 15:30:23,531 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 15:30:27,604 - __main__ - INFO - Запуск бота...
2025-04-25 15:30:27,604 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:30:28,124 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:30:28,124 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:30:28,125 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:30:28,126 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:30:28,126 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:30:28,126 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:30:28,127 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:30:28,127 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:30:28,127 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:30:28,127 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:30:28,127 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:30:28,127 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:30:28,128 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:30:28,132 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:30:28,287 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA389550>
2025-04-25 15:30:28,287 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000023CDA341880> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:30:28,444 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA36DBD0>
2025-04-25 15:30:28,444 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:28,445 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:28,445 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:28,445 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:28,445 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:28,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:28,600 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:30:28,600 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:28,600 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:28,600 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:28,600 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:28,601 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:30:28,601 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:30:28,601 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:30:28,601 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:30:28,601 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:30:28,601 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:30:28,601 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:28,601 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:28,602 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:28,602 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:28,602 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:28,756 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:28,756 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:30:28,756 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:28,756 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:28,756 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:28,756 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:28,757 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:30:28,757 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:30:28,757 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:30:28,757 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:30:28,757 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:30:28,757 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:28,758 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:30:28,758 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:30:28,758 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:30:28,758 - telegram.ext.Application - INFO - Application started
2025-04-25 15:30:28,758 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:30:28,758 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:30:28,758 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:31:28.126353+00:00 (in 59.367705 seconds)
2025-04-25 15:30:28,902 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA3CC690>
2025-04-25 15:30:28,903 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000023CDA341520> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:30:29,050 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA31E3F0>
2025-04-25 15:30:29,050 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:29,050 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:29,050 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:29,050 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:29,050 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:31,604 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:31,604 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:31,604 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:31,604 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:31,604 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:31,604 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:31,604 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489797, 'message': {'message_id': 691, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559031, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:30:31,604 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489797]
2025-04-25 15:30:31,605 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 30, 31, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=691, supergroup_chat_created=False, text='/start'), update_id=829489797)
2025-04-25 15:30:31,605 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489798, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:31,606 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:31,606 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:31,606 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:31,606 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:31,606 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:36,638 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3466'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:36,638 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:36,638 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:36,638 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:36,638 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:36,638 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:36,638 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489798, 'callback_query': {'id': '7022623322075050478', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_vacation'}}]`
2025-04-25 15:30:36,639 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489798]
2025-04-25 15:30:36,639 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322075050478', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489798)
2025-04-25 15:30:36,642 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:30:36,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322075050478'}`
2025-04-25 15:30:36,643 - httpcore.connection - DEBUG - close.started
2025-04-25 15:30:36,643 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:30:36,643 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:30:36,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489799, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:36,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:36,644 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:36,644 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:36,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:36,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:36,800 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA31F820>
2025-04-25 15:30:36,800 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000023CDA341880> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:30:36,960 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA3EC830>
2025-04-25 15:30:36,960 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:36,960 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:36,960 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:36,960 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:36,960 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:37,134 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:37,134 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:30:37,134 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:37,134 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:37,134 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:37,134 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:37,135 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:30:37,135 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_vacation
2025-04-25 15:30:37,137 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_periods': '[]', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 15:30:37,138 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_periods=[], arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 15:30:37,138 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 15:30:37,139 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:37,139 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:37,140 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:37,140 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:37,140 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:37,353 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'583'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:37,354 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:30:37,354 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:37,354 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:37,354 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:37,354 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:37,354 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 692, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559037, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 15:30:37,354 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_START
2025-04-25 15:30:43,557 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:43,557 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:43,557 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:43,557 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:43,557 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:43,557 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:43,557 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489799, 'message': {'message_id': 693, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559043, 'text': '29-04-2025'}}]`
2025-04-25 15:30:43,557 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489799]
2025-04-25 15:30:43,558 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 30, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=693, supergroup_chat_created=False, text='29-04-2025'), update_id=829489799)
2025-04-25 15:30:43,558 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:43,559 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:43,559 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:43,559 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:43,559 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:43,559 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:30:53,706 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:30:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:30:53,706 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:30:53,706 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:30:53,706 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:30:53,706 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:30:53,707 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:30:53,707 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:30:53,707 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:30:53,707 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:30:53,707 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:30:53,707 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:30:53,707 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:30:53,708 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:30:53,708 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:03,877 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:03,877 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:03,877 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:03,877 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:03,877 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:03,878 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:03,878 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:03,878 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:03,878 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:03,878 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:03,878 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:03,878 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:03,879 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:03,879 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:14,023 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:14,023 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:14,023 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:14,023 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:14,023 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:14,023 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:14,023 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:14,023 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:14,024 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:14,024 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:14,024 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:14,024 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:14,024 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:14,024 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:24,169 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:24,169 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:24,169 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:24,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:24,170 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:24,170 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:24,170 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:24,170 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:24,170 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:24,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:24,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:24,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:24,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:24,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:28,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:31:28,128 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:32:28.126353+00:00 (in 59.997644 seconds)
2025-04-25 15:31:28,128 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:32:28 UTC)" (scheduled at 2025-04-25 05:31:28.126353+00:00)
2025-04-25 15:31:28,129 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:31:28,136 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:31:28,142 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:32:28 UTC)" executed successfully
2025-04-25 15:31:34,317 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:34,318 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:34,318 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:34,318 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:34,318 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:34,318 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:34,318 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:34,318 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:34,318 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:34,319 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:34,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:34,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:34,319 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:34,319 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:44,466 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:44,466 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:44,466 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:44,466 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:44,466 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:44,467 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:44,467 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:44,467 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:44,467 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:44,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:44,467 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:44,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:44,468 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:44,468 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:31:54,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:31:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:31:54,617 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:31:54,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:31:54,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:31:54,618 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:31:54,618 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:31:54,618 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:31:54,618 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:31:54,618 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:31:54,619 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:31:54,619 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:31:54,619 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:31:54,620 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:31:54,620 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:04,764 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:04,764 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:04,764 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:04,764 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:04,764 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:04,765 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:04,765 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:04,765 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:04,765 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:04,765 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:04,765 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:04,765 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:04,766 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:04,766 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:14,911 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:14,911 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:14,911 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:14,911 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:14,911 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:14,912 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:14,912 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:14,912 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:14,912 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:14,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:14,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:14,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:14,913 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:14,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:25,057 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:25,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:25,057 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:25,057 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:25,058 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:25,058 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:25,058 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:25,058 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:25,058 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:25,058 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:25,059 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:25,059 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:25,059 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:25,059 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:28,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:32:28,128 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:33:28.126353+00:00 (in 59.997842 seconds)
2025-04-25 15:32:28,128 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:33:28 UTC)" (scheduled at 2025-04-25 05:32:28.126353+00:00)
2025-04-25 15:32:28,128 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:32:28,134 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:32:28,137 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:33:28 UTC)" executed successfully
2025-04-25 15:32:35,203 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:35,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:35,204 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:35,204 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:35,204 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:35,204 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:35,204 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:35,204 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:35,204 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:35,205 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:35,205 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:35,205 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:35,205 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:35,205 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:45,350 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:45,350 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:45,350 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:45,350 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:45,351 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:45,351 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:45,351 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:45,351 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:45,351 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:45,351 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:45,352 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:45,352 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:45,352 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:45,352 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:32:55,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:32:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:32:55,499 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:32:55,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:32:55,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:32:55,499 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:32:55,499 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:32:55,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:32:55,500 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:32:55,500 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:32:55,500 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:32:55,500 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:32:55,500 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:32:55,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:32:55,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:05,646 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:05,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:05,646 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:05,646 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:05,646 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:05,647 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:05,647 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:05,647 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:05,647 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:05,647 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:05,647 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:05,647 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:05,648 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:05,648 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:15,793 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:15,793 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:15,793 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:15,793 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:15,793 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:15,794 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:15,794 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:15,794 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:15,794 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:15,794 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:15,794 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:15,794 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:15,795 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:15,795 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:25,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:25,939 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:25,939 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:25,940 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:25,940 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:25,940 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:25,940 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:25,940 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:25,940 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:25,940 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:25,941 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:25,941 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:25,941 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:25,941 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:28,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:33:28,129 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:34:28.126353+00:00 (in 59.997342 seconds)
2025-04-25 15:33:28,129 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:34:28 UTC)" (scheduled at 2025-04-25 05:33:28.126353+00:00)
2025-04-25 15:33:28,129 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:33:28,142 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:33:28,145 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:34:28 UTC)" executed successfully
2025-04-25 15:33:36,087 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:36,087 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:36,087 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:36,087 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:36,087 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:36,087 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:36,087 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:36,087 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:36,088 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:36,088 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:36,088 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:36,088 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:36,088 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:36,088 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:46,235 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:46,235 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:46,235 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:46,235 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:46,235 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:46,235 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:46,235 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:46,236 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:46,236 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:46,236 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:46,236 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:46,236 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:46,236 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:46,236 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:33:56,382 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:33:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:33:56,382 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:33:56,382 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:33:56,383 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:33:56,383 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:33:56,383 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:33:56,383 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:33:56,383 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:33:56,383 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:33:56,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:33:56,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:33:56,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:33:56,384 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:33:56,384 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:06,532 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:06,532 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:06,532 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:06,532 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:06,532 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:06,532 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:06,532 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:34:06,532 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:34:06,533 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:06,533 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:06,533 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:06,533 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:06,533 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:06,533 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:16,679 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:16,679 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:16,679 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:16,679 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:16,679 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:16,679 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:16,679 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:34:16,679 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:34:16,679 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489800, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:16,680 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:16,680 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:16,680 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:16,680 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:16,680 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:20,406 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:20,406 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:20,407 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:20,407 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:20,407 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:20,407 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:20,407 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489800, 'message': {'message_id': 694, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559260, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:20,407 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489800]
2025-04-25 15:34:20,408 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=694, supergroup_chat_created=False, text='/start'), update_id=829489800)
2025-04-25 15:34:20,408 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489801, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:20,409 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:20,409 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:20,409 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:20,409 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:20,409 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:22,742 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:22,742 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:22,743 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:22,743 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:22,743 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:22,743 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:22,743 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489801, 'message': {'message_id': 695, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559262, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:22,743 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489801]
2025-04-25 15:34:22,743 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 22, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=695, supergroup_chat_created=False, text='/start'), update_id=829489801)
2025-04-25 15:34:22,744 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489802, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:22,744 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:22,744 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:22,744 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:22,745 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:22,745 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:23,668 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:23,669 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:23,669 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:23,669 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:23,669 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:23,669 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:23,669 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489802, 'message': {'message_id': 696, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559263, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:23,669 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489802]
2025-04-25 15:34:23,669 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 23, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=696, supergroup_chat_created=False, text='/start'), update_id=829489802)
2025-04-25 15:34:23,670 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489803, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:23,670 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:23,670 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:23,670 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:23,670 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:23,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:24,388 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:24,389 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:24,389 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:24,389 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:24,389 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:24,389 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:24,389 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489803, 'message': {'message_id': 697, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559264, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:24,389 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489803]
2025-04-25 15:34:24,389 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=697, supergroup_chat_created=False, text='/start'), update_id=829489803)
2025-04-25 15:34:24,390 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489804, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:24,390 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:24,390 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:24,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:24,390 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:24,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:25,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:25,089 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:25,089 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:25,089 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:25,089 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:25,089 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:25,089 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489804, 'message': {'message_id': 698, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559265, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:25,089 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489804]
2025-04-25 15:34:25,090 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=698, supergroup_chat_created=False, text='/start'), update_id=829489804)
2025-04-25 15:34:25,090 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489805, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:25,090 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:25,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:25,091 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:25,091 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:25,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:25,769 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:25,769 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:25,769 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:25,769 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:25,769 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:25,769 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:25,769 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489805, 'message': {'message_id': 699, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559265, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:25,769 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489805]
2025-04-25 15:34:25,769 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=699, supergroup_chat_created=False, text='/start'), update_id=829489805)
2025-04-25 15:34:25,770 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489806, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:25,770 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:25,771 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:25,771 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:25,771 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:25,771 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:26,560 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:26,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:26,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:26,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:26,560 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:26,560 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:26,560 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489806, 'message': {'message_id': 700, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559266, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:34:26,561 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489806]
2025-04-25 15:34:26,561 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 34, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=700, supergroup_chat_created=False, text='/start'), update_id=829489806)
2025-04-25 15:34:26,561 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:26,561 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:26,562 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:26,562 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:26,562 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:26,562 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:28,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:34:28,128 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:35:28.126353+00:00 (in 59.998137 seconds)
2025-04-25 15:34:28,128 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:35:28 UTC)" (scheduled at 2025-04-25 05:34:28.126353+00:00)
2025-04-25 15:34:28,128 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:34:28,146 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:34:28,149 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:35:28 UTC)" executed successfully
2025-04-25 15:34:36,709 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:36,709 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:36,709 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:36,709 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:36,709 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:36,709 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:36,709 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:34:36,709 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:34:36,709 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:36,710 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:36,710 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:36,710 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:36,710 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:36,710 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:46,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:46,856 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:46,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:46,856 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:46,856 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:46,856 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:46,856 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:34:46,856 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:34:46,856 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:46,857 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:46,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:46,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:46,857 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:46,857 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:34:57,003 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:34:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:34:57,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:34:57,003 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:34:57,003 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:34:57,003 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:34:57,003 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:34:57,003 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:34:57,003 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:34:57,004 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:34:57,004 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:34:57,004 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:34:57,004 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:34:57,004 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:34:57,004 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:07,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:07,150 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:07,150 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:07,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:07,150 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:07,150 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:07,150 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:07,150 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:07,151 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:07,151 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:07,151 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:07,151 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:07,151 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:07,151 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:17,300 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:17,300 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:17,300 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:17,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:17,300 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:17,300 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:17,300 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:17,300 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:17,301 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:17,301 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:17,301 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:17,301 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:17,301 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:17,301 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:27,459 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:27,460 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:27,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:27,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:27,460 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:27,460 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:27,460 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:27,460 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:27,460 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:27,461 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:27,461 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:27,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:27,461 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:27,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:28,127 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:35:28,127 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:36:28.126353+00:00 (in 59.998557 seconds)
2025-04-25 15:35:28,127 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:36:28 UTC)" (scheduled at 2025-04-25 05:35:28.126353+00:00)
2025-04-25 15:35:28,128 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:35:28,142 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:35:28,147 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:36:28 UTC)" executed successfully
2025-04-25 15:35:37,612 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:37,612 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:37,612 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:37,612 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:37,612 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:37,612 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:37,613 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:37,613 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:37,613 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:37,613 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:37,613 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:37,613 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:37,614 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:37,614 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:47,758 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:47,758 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:47,758 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:47,758 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:47,759 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:47,759 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:47,759 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:47,759 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:47,759 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:47,759 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:47,759 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:47,759 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:47,760 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:47,760 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:35:57,906 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:35:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:35:57,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:35:57,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:35:57,907 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:35:57,907 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:35:57,907 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:35:57,907 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:35:57,907 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:35:57,907 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:35:57,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:35:57,908 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:35:57,908 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:35:57,908 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:35:57,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:08,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:08,052 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:08,053 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:08,053 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:08,053 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:08,053 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:08,053 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:08,053 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:08,053 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:08,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:08,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:08,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:08,054 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:08,054 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:18,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:18,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:18,204 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:18,204 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:18,204 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:18,204 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:18,204 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:18,204 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:18,205 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:18,205 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:18,205 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:18,205 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:18,205 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:18,205 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:28,127 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:36:28,127 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:37:28.126353+00:00 (in 59.998696 seconds)
2025-04-25 15:36:28,127 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:37:28 UTC)" (scheduled at 2025-04-25 05:36:28.126353+00:00)
2025-04-25 15:36:28,127 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:36:28,145 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 46, in send_notification
    arrival_times = json.loads(user['arrival_notification_times'] or '[]')
                    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 49, in send_notification
    except json.JSONDecodeError as e:
           ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
2025-04-25 15:36:28,148 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:37:28 UTC)" executed successfully
2025-04-25 15:36:28,351 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:28,351 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:28,351 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:28,351 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:28,351 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:28,351 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:28,351 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:28,351 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:28,351 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:28,352 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:28,352 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:28,352 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:28,352 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:28,352 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:38,502 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:38,502 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:38,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:38,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:38,502 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:38,502 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:38,502 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:38,503 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:38,503 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:38,503 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:38,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:38,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:38,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:38,504 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:48,655 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:48,656 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:48,656 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:48,656 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:48,656 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:48,656 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:48,656 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:48,656 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:48,656 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:48,657 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:48,657 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:48,657 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:48,657 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:48,657 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:52,219 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 15:36:52,219 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 15:36:52,219 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 15:36:52,219 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 15:36:52,219 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 15:36:52,219 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:52,220 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 15:36:52,220 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489807, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:52,221 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:52,221 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:36:52,384 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA2D7CE0>
2025-04-25 15:36:52,384 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000023CDA341520> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:36:52,544 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000023CDA2D67A0>
2025-04-25 15:36:52,544 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:52,544 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:52,545 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:52,545 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:52,545 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:52,704 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:52,704 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:36:52,704 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:52,704 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:52,704 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:52,704 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:52,704 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:36:52,704 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:36:52,704 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 15:36:52,704 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 15:36:52,704 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 15:36:52,704 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 15:36:52,705 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 15:36:52,705 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 15:36:52,716 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 15:36:52,716 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 15:36:52,716 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 15:36:52,717 - httpcore.connection - DEBUG - close.started
2025-04-25 15:36:52,717 - httpcore.connection - DEBUG - close.started
2025-04-25 15:36:52,717 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:36:52,717 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:36:52,717 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 15:36:52,717 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 15:36:52,717 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 15:36:56,710 - __main__ - INFO - Запуск бота...
2025-04-25 15:36:56,710 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:36:57,212 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:36:57,212 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:36:57,213 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:36:57,213 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:36:57,213 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:36:57,213 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:36:57,214 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:36:57,214 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:36:57,214 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:36:57,214 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:36:57,214 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:36:57,215 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:36:57,215 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:36:57,219 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:36:57,374 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A2499550>
2025-04-25 15:36:57,374 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B3A244D910> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:36:57,532 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A247DD10>
2025-04-25 15:36:57,532 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:57,532 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:57,532 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:57,532 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:57,532 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:57,695 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:57,696 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:36:57,696 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:57,696 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:57,696 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:57,696 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:57,696 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:36:57,696 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:36:57,697 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:36:57,697 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:36:57,697 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:36:57,697 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:36:57,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:57,697 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:57,697 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:57,698 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:57,698 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:36:57,857 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:36:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:36:57,857 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:36:57,858 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:36:57,858 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:36:57,858 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:36:57,858 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:36:57,858 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:36:57,858 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:36:57,858 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:36:57,858 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:36:57,858 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:36:57,858 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:36:57,859 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:36:57,859 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:36:57,859 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:36:57,859 - telegram.ext.Application - INFO - Application started
2025-04-25 15:36:57,859 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:36:57,859 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:36:57,859 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:37:57.213886+00:00 (in 59.354179 seconds)
2025-04-25 15:36:58,010 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A24E07D0>
2025-04-25 15:36:58,010 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B3A244D5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:36:58,162 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A242E3F0>
2025-04-25 15:36:58,163 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:36:58,163 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:36:58,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:36:58,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:36:58,163 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:01,386 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:01,387 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:01,387 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:01,387 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:01,387 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:01,387 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:01,388 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489807, 'message': {'message_id': 701, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559421, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:37:01,388 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489807]
2025-04-25 15:37:01,388 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 37, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=701, supergroup_chat_created=False, text='/start'), update_id=829489807)
2025-04-25 15:37:01,389 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489808, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:01,389 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:01,389 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:01,389 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:01,390 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:01,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:05,259 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:05,259 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:05,259 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:05,260 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:05,260 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:05,260 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:05,260 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489808, 'callback_query': {'id': '7022623322612765911', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:37:05,260 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489808]
2025-04-25 15:37:05,260 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322612765911', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489808)
2025-04-25 15:37:05,264 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:05,264 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322612765911'}`
2025-04-25 15:37:05,265 - httpcore.connection - DEBUG - close.started
2025-04-25 15:37:05,265 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:37:05,265 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:37:05,265 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489809, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:05,265 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:05,266 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:05,266 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:05,266 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:05,266 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:05,418 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A242F820>
2025-04-25 15:37:05,418 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B3A244D910> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:37:05,573 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A24C4290>
2025-04-25 15:37:05,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:05,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:05,573 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:05,574 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:05,574 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:05,742 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:05,743 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:05,743 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:05,743 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:05,743 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:05,743 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:05,743 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:05,743 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:37:05,746 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:09,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:09,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:09,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:09,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:09,500 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:09,500 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:09,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489809, 'callback_query': {'id': '7022623322100363069', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:37:09,500 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489809]
2025-04-25 15:37:09,501 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322100363069', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489809)
2025-04-25 15:37:09,501 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:09,501 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322100363069'}`
2025-04-25 15:37:09,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:09,501 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489810, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:09,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:09,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:09,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:09,869 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:09,869 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:09,869 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:09,869 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:09,869 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:09,869 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:09,869 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:09,869 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:37:09,872 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:10,641 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3466'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:10,641 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:10,641 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:10,641 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:10,642 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:10,642 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:10,642 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489810, 'callback_query': {'id': '7022623323589728779', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_vacation'}}]`
2025-04-25 15:37:10,642 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489810]
2025-04-25 15:37:10,642 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323589728779', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489810)
2025-04-25 15:37:10,643 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:10,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323589728779'}`
2025-04-25 15:37:10,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:10,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489811, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:10,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:10,645 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:10,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:10,814 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:10,814 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:10,814 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:10,814 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:10,814 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:10,814 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:10,814 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_vacation
2025-04-25 15:37:10,817 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:12,055 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3483'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:12,055 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:12,056 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,056 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:12,056 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:12,056 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:12,056 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489811, 'callback_query': {'id': '7022623323933334707', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 15:37:12,056 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489811]
2025-04-25 15:37:12,056 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323933334707', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489811)
2025-04-25 15:37:12,057 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:12,057 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323933334707'}`
2025-04-25 15:37:12,057 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,057 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489812, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:12,058 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,218 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:12,218 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:12,218 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,218 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:12,218 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:12,218 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:12,218 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:12,219 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 15:37:12,221 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:12,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3485'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:12,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:12,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:12,749 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:12,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:12,749 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489812, 'callback_query': {'id': '7022623322522205803', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_departure_notification_time'}}]`
2025-04-25 15:37:12,749 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489812]
2025-04-25 15:37:12,750 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322522205803', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489812)
2025-04-25 15:37:12,750 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:12,750 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322522205803'}`
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,751 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489813, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,751 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,752 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:12,752 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,752 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:12,752 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:12,923 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:12,923 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:12,923 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:12,923 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:12,923 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:12,923 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:12,923 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:12,923 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_departure_notification_time
2025-04-25 15:37:12,926 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:13,168 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3470'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:13,169 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:13,169 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:13,169 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:13,169 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:13,169 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489813, 'callback_query': {'id': '7022623321561775340', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 15:37:13,169 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489813]
2025-04-25 15:37:13,170 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321561775340', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489813)
2025-04-25 15:37:13,170 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:13,170 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321561775340'}`
2025-04-25 15:37:13,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,171 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489814, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:13,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:13,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:13,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,171 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,172 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:13,172 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,172 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:13,172 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,360 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:13,361 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:13,361 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,361 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:13,361 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:13,361 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:13,361 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:13,361 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 15:37:13,364 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:13,613 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3472'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:13,613 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:13,614 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,614 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:13,614 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:13,614 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:13,614 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489814, 'callback_query': {'id': '7022623323740382073', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 15:37:13,614 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489814]
2025-04-25 15:37:13,614 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323740382073', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489814)
2025-04-25 15:37:13,615 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:13,615 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323740382073'}`
2025-04-25 15:37:13,616 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,616 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489815, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:13,617 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:13,617 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,617 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:13,618 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:13,775 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:13,776 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:13,776 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:13,776 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:13,776 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:13,776 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:13,776 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:13,776 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 15:37:13,779 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:15,719 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:15,719 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:15,719 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:15,719 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:15,719 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:15,719 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:15,719 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489815, 'message': {'message_id': 702, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745559435, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:37:15,719 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489815]
2025-04-25 15:37:15,720 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 37, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=702, supergroup_chat_created=False, text='/start'), update_id=829489815)
2025-04-25 15:37:15,720 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489816, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:15,720 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:15,721 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:15,721 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:15,721 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:15,721 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,290 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3488'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:17,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:17,291 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,291 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:17,291 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:17,291 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:17,291 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489816, 'callback_query': {'id': '7022623324113770391', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_departure_notification_time'}}]`
2025-04-25 15:37:17,291 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489816]
2025-04-25 15:37:17,291 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324113770391', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489816)
2025-04-25 15:37:17,292 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:17,292 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324113770391'}`
2025-04-25 15:37:17,292 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,292 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489817, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:17,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:17,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,293 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:17,293 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,293 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,294 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:17,294 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,294 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:17,294 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,451 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:17,451 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:17,451 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,451 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:17,451 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:17,451 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:17,452 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:17,452 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_departure_notification_time
2025-04-25 15:37:17,455 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:17,608 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3486'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:17,608 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:17,608 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,608 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:17,608 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:17,608 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:17,609 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489817, 'callback_query': {'id': '7022623324781875717', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 15:37:17,609 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489817]
2025-04-25 15:37:17,609 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324781875717', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489817)
2025-04-25 15:37:17,609 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:17,609 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324781875717'}`
2025-04-25 15:37:17,610 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,610 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489818, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:17,610 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:17,610 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:17,611 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,981 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3469'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:17,982 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:17,982 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,982 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:17,982 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:17,982 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:17,982 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489818, 'callback_query': {'id': '7022623325167145023', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 15:37:17,982 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489818]
2025-04-25 15:37:17,983 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489819, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:17,983 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:17,983 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:17,983 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:17,983 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:17,983 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:18,184 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:18,185 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:18,185 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:18,185 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:18,185 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:18,185 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:18,185 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:18,185 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 15:37:18,191 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:18,194 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325167145023', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489818)
2025-04-25 15:37:18,194 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:18,194 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623325167145023'}`
2025-04-25 15:37:18,195 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:18,195 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:18,195 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:18,195 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:18,195 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:18,377 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:18,377 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:18,377 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:18,377 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:18,377 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:18,377 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:18,377 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:18,377 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 15:37:18,379 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:19,605 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 15:37:19,605 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 15:37:19,605 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 15:37:19,605 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 15:37:19,605 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 15:37:19,605 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:19,605 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 15:37:19,606 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489819, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:19,606 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:19,606 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:37:19,760 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A23E7DF0>
2025-04-25 15:37:19,760 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B3A244D5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:37:19,925 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B3A23E67A0>
2025-04-25 15:37:19,925 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:19,925 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:19,925 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:19,926 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:19,926 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:23,083 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:23,083 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:23,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:23,084 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:23,084 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:23,084 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:23,084 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:37:23,084 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:37:23,084 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 15:37:23,084 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 15:37:23,084 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 15:37:23,084 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 15:37:23,084 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 15:37:23,084 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 15:37:23,095 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 15:37:23,095 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 15:37:23,095 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 15:37:23,095 - httpcore.connection - DEBUG - close.started
2025-04-25 15:37:23,096 - httpcore.connection - DEBUG - close.started
2025-04-25 15:37:23,096 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:37:23,096 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:37:23,096 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 15:37:23,096 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 15:37:23,096 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 15:37:27,035 - __main__ - INFO - Запуск бота...
2025-04-25 15:37:27,035 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:37:27,549 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:37:27,549 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:37:27,550 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:37:27,550 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:37:27,551 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:37:27,551 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:37:27,551 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:37:27,551 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:37:27,551 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:37:27,551 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:37:27,551 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:37:27,552 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:37:27,552 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:37:27,556 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:37:27,711 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F26D550>
2025-04-25 15:37:27,711 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001944F21D910> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:37:27,867 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F24DD10>
2025-04-25 15:37:27,868 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:27,868 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:27,868 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:27,868 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:27,868 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:28,021 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:28,022 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:37:28,022 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:28,022 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:28,022 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:28,022 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:28,022 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:37:28,022 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:37:28,023 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:37:28,023 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:37:28,023 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:37:28,023 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:37:28,023 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:28,023 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:28,023 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:28,023 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:28,023 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:28,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:28,177 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:37:28,178 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:28,178 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:28,178 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:28,178 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:28,178 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:37:28,179 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:37:28,179 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:37:28,179 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:37:28,179 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:37:28,179 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:28,180 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:37:28,180 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:37:28,180 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:37:28,180 - telegram.ext.Application - INFO - Application started
2025-04-25 15:37:28,181 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:37:28,181 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:37:28,181 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:38:27.551150+00:00 (in 59.369673 seconds)
2025-04-25 15:37:28,339 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F2B07D0>
2025-04-25 15:37:28,339 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001944F21D5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:37:28,499 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F202190>
2025-04-25 15:37:28,499 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:28,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:28,500 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:28,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:28,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:31,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:31,408 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:31,408 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:31,408 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:31,408 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:31,408 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:31,408 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489819, 'callback_query': {'id': '7022623324355268260', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:37:31,409 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489819]
2025-04-25 15:37:31,409 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324355268260', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489819)
2025-04-25 15:37:31,413 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:31,413 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324355268260'}`
2025-04-25 15:37:31,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:31,414 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489820, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:31,414 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:31,414 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:31,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:31,576 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:31,576 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:31,576 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:31,576 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:31,576 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:31,576 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:31,577 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:31,577 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:37:31,580 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:33,544 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3483'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:33,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:33,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:33,545 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:33,545 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:33,545 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:33,545 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489820, 'callback_query': {'id': '7022623322574938937', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 15:37:33,545 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489820]
2025-04-25 15:37:33,546 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322574938937', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489820)
2025-04-25 15:37:33,546 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:33,546 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322574938937'}`
2025-04-25 15:37:33,546 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:33,547 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489821, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:33,547 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:33,548 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:33,548 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:33,706 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:33,707 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:33,707 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:33,707 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:33,707 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:33,707 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:33,707 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:33,707 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 15:37:33,710 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:34,383 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3486'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:34,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:34,384 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,384 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:34,384 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:34,384 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:34,384 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489821, 'callback_query': {'id': '7022623324518032534', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 15:37:34,384 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489821]
2025-04-25 15:37:34,384 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324518032534', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489821)
2025-04-25 15:37:34,385 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:34,385 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324518032534'}`
2025-04-25 15:37:34,385 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,386 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489822, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:34,386 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:34,386 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,386 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:34,386 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,386 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,387 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:34,387 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,387 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:34,387 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,544 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:34,544 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:34,544 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:34,544 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:34,544 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:34,544 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:34,545 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 15:37:34,547 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:34,747 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3488'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:34,747 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:34,747 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,747 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:34,747 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:34,747 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:34,747 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489822, 'callback_query': {'id': '7022623323529942433', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_departure_notification_time'}}]`
2025-04-25 15:37:34,747 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489822]
2025-04-25 15:37:34,748 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323529942433', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489822)
2025-04-25 15:37:34,748 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:37:34,748 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323529942433'}`
2025-04-25 15:37:34,748 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,749 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:34,749 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,750 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:34,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:34,914 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:34,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:37:34,915 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:34,915 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:34,915 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:34,915 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:34,915 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:37:34,915 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_departure_notification_time
2025-04-25 15:37:34,918 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 1298, in process_update
    await coroutine
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\conversationhandler.py", line 842, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        update, application, handler_check_result, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 158, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\handlers.py", line 170, in callback_handler
    subscribed, vacation_periods, arrival_notification_times, departure_notification_times = get_user_settings(user_id)
                                                                                             ~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\settings.py", line 35, in get_user_settings
    result = conn.execute(query, {"telegram_id": telegram_id}).mappings().fetchone()
             ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_vacation_periods" does not exist
LINE 2:             SELECT subscribed, A2_vacation_periods, A2_arriv...
                                       ^
HINT:  Perhaps you meant to reference the column "user_settings.vacation_periods".

[SQL: 
            SELECT subscribed, A2_vacation_periods, A2_arrival_notification_times, A2_departure_notification_times
            FROM user_settings
            WHERE telegram_id = %(telegram_id)s
        ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:37:44,917 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:44,917 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:44,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:44,917 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:44,918 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:44,918 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:44,918 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:37:44,918 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:37:44,918 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:44,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:44,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:44,919 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:44,919 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:44,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:37:55,079 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:37:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:37:55,080 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:37:55,080 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:37:55,080 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:37:55,080 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:37:55,080 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:37:55,080 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:37:55,080 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:37:55,080 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:37:55,081 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:37:55,081 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:37:55,081 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:37:55,081 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:37:55,081 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:05,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:05,239 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:05,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:05,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:05,240 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:05,240 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:05,240 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:05,240 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:05,240 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:05,241 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:05,241 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:05,241 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:05,241 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:05,241 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:15,399 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:15,399 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:15,400 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:15,400 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:15,400 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:15,400 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:15,400 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:15,400 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:15,400 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:15,400 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:15,401 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:15,401 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:15,401 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:15,401 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:25,566 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:25,566 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:25,566 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:25,566 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:25,566 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:25,566 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:25,567 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:25,567 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:25,567 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:25,567 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:25,567 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:25,567 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:25,568 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:25,568 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:38:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:39:27.551150+00:00 (in 59.998882 seconds)
2025-04-25 15:38:27,552 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:39:27 UTC)" (scheduled at 2025-04-25 05:38:27.551150+00:00)
2025-04-25 15:38:27,552 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:38:27,556 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:38:27,559 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:39:27 UTC)" executed successfully
2025-04-25 15:38:35,729 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:35,729 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:35,730 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:35,730 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:35,730 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:35,730 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:35,730 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:35,730 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:35,730 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:35,730 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:35,731 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:35,731 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:35,731 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:35,731 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:45,891 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:45,891 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:45,891 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:45,891 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:45,891 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:45,891 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:45,892 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:45,892 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:45,892 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:45,892 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:45,892 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:45,892 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:45,893 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:45,893 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:38:56,060 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:38:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:38:56,060 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:38:56,060 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:38:56,061 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:38:56,061 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:38:56,061 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:38:56,061 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:38:56,061 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:38:56,061 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:38:56,061 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:38:56,062 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:38:56,062 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:38:56,062 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:38:56,062 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:06,221 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:06,222 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:06,222 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:06,222 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:06,222 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:06,222 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:06,222 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:06,222 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:06,222 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:06,223 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:06,223 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:06,223 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:06,223 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:06,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:16,388 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:16,388 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:16,389 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:16,389 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:16,389 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:16,389 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:16,389 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:16,389 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:16,389 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:16,389 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:16,390 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:16,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:16,390 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:16,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:26,553 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:26,553 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:26,553 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:26,553 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:26,553 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:26,553 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:26,553 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:26,553 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:26,554 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:26,554 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:26,554 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:26,554 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:26,554 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:26,554 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:39:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:40:27.551150+00:00 (in 59.998252 seconds)
2025-04-25 15:39:27,553 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:40:27 UTC)" (scheduled at 2025-04-25 05:39:27.551150+00:00)
2025-04-25 15:39:27,553 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:39:27,556 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:39:27,559 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:40:27 UTC)" executed successfully
2025-04-25 15:39:36,721 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:36,721 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:36,721 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:36,721 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:36,722 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:36,722 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:36,722 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:36,722 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:36,722 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:36,722 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:36,723 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:36,723 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:36,723 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:36,723 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:46,886 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:46,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:46,886 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:46,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:46,886 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:46,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:46,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:46,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:46,887 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:46,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:46,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:46,887 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:46,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:46,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:39:57,051 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:39:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:39:57,051 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:39:57,051 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:39:57,052 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:39:57,052 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:39:57,052 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:39:57,052 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:39:57,052 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:39:57,052 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:39:57,052 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:39:57,053 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:39:57,053 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:39:57,053 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:39:57,053 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:07,233 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:07,233 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:07,233 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:07,233 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:07,233 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:07,233 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:07,234 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:07,234 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:07,234 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:07,234 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:07,234 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:07,234 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:07,235 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:07,235 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:17,396 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:17,396 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:17,396 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:17,396 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:17,396 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:17,396 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:17,396 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:17,396 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:17,397 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:17,397 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:17,397 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:17,397 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:17,399 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:17,399 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:27,553 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:40:27,553 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:41:27.551150+00:00 (in 59.997693 seconds)
2025-04-25 15:40:27,553 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:41:27 UTC)" (scheduled at 2025-04-25 05:40:27.551150+00:00)
2025-04-25 15:40:27,553 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:40:27,556 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:40:27,560 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:27,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:27,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:27,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:27,560 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:27,560 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:41:27 UTC)" executed successfully
2025-04-25 15:40:27,560 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:27,561 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:27,561 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:27,561 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:27,561 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:27,561 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:27,561 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:27,562 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:27,562 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:37,728 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:37,728 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:37,728 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:37,729 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:37,729 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:37,729 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:37,729 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:37,729 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:37,729 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:37,729 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:37,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:37,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:37,730 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:37,730 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:47,904 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:47,904 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:47,904 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:47,904 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:47,904 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:47,904 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:47,904 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:47,905 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:47,905 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:47,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:47,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:47,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:47,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:47,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:40:58,066 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:40:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:40:58,066 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:40:58,067 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:40:58,067 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:40:58,067 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:40:58,067 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:40:58,067 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:40:58,067 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:40:58,067 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:40:58,068 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:40:58,068 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:40:58,068 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:40:58,069 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:40:58,069 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:08,228 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:08,228 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:08,228 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:08,228 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:08,228 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:08,228 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:08,228 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:08,228 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:08,229 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:08,229 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:08,229 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:08,229 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:08,229 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:08,230 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:18,391 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:18,391 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:18,391 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:18,391 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:18,391 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:18,391 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:18,391 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:18,392 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:18,392 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:18,392 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:18,392 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:18,392 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:18,392 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:18,392 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:41:27,553 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:42:27.551150+00:00 (in 59.998030 seconds)
2025-04-25 15:41:27,553 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:42:27 UTC)" (scheduled at 2025-04-25 05:41:27.551150+00:00)
2025-04-25 15:41:27,553 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:41:27,556 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:41:27,558 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:42:27 UTC)" executed successfully
2025-04-25 15:41:28,554 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:28,554 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:28,554 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:28,554 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:28,554 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:28,554 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:28,554 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:28,554 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:28,555 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:28,555 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:28,555 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:28,555 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:28,555 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:28,555 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:38,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:38,724 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:38,724 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:38,724 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:38,725 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:38,725 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:38,725 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:38,725 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:38,725 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:38,725 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:38,725 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:38,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:38,726 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:38,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:48,885 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:48,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:48,886 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:48,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:48,886 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:48,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:48,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:48,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:48,886 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:48,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:48,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:48,887 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:48,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:48,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:41:59,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:41:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:41:59,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:41:59,046 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:41:59,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:41:59,046 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:41:59,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:41:59,046 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:41:59,046 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:41:59,046 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:41:59,047 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:41:59,047 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:41:59,047 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:41:59,047 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:41:59,047 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:42:09,219 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:42:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:42:09,219 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:42:09,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:42:09,219 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:42:09,219 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:42:09,220 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:42:09,220 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:42:09,220 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:42:09,220 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:42:09,220 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:42:09,221 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:42:09,221 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:42:09,221 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:42:09,221 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:42:19,754 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:42:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:42:19,754 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:42:19,754 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:42:19,754 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:42:19,754 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:42:19,754 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:42:19,755 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:42:19,755 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:42:19,755 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:42:19,755 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:42:19,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:42:19,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:42:19,756 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:42:19,756 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:42:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:42:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:43:27.551150+00:00 (in 59.998369 seconds)
2025-04-25 15:42:27,552 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:43:27 UTC)" (scheduled at 2025-04-25 05:42:27.551150+00:00)
2025-04-25 15:42:27,553 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:42:27,556 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:42:27,558 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:43:27 UTC)" executed successfully
2025-04-25 15:42:29,915 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:42:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:42:29,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:42:29,915 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:42:29,915 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:42:29,915 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:42:29,915 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:42:29,916 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:42:29,916 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:42:29,916 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:42:29,916 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:42:29,916 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:42:29,916 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:42:29,917 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:42:29,917 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:42:40,078 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:42:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:42:40,078 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:42:40,078 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:42:40,078 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:42:40,078 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:42:40,078 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:42:40,079 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:42:40,079 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:42:40,079 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:42:40,079 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:42:40,079 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:42:40,079 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:42:40,080 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:42:40,080 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:42:50,246 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:42:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:42:50,246 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:42:50,246 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:42:50,246 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:42:50,246 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:42:50,246 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:42:50,246 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:42:50,246 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:42:50,247 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:42:50,247 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:42:50,247 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:42:50,247 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:42:50,247 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:42:50,247 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:00,405 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:00,406 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:00,406 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:00,406 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:00,406 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:00,406 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:00,406 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:00,406 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:00,406 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:00,407 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:00,407 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:00,407 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:00,407 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:00,407 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:10,575 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:10,575 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:10,575 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:10,575 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:10,575 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:10,575 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:10,575 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:10,575 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:10,576 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:10,576 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:10,576 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:10,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:10,576 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:10,576 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:20,735 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:20,735 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:20,736 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:20,736 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:20,736 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:20,736 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:20,736 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:20,736 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:20,736 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:20,736 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:20,737 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:20,737 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:20,737 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:20,737 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:27,553 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:43:27,553 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:44:27.551150+00:00 (in 59.997761 seconds)
2025-04-25 15:43:27,553 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:44:27 UTC)" (scheduled at 2025-04-25 05:43:27.551150+00:00)
2025-04-25 15:43:27,553 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:43:27,557 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:43:27,560 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:44:27 UTC)" executed successfully
2025-04-25 15:43:30,895 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:30,895 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:30,895 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:30,895 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:30,896 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:30,896 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:30,896 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:30,896 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:30,896 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:30,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:30,897 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:30,897 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:30,897 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:30,897 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:41,062 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:41,062 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:41,063 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:41,063 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:41,063 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:41,063 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:41,063 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:41,063 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:41,063 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:41,063 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:41,064 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:41,064 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:41,064 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:41,064 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:43:51,222 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:43:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:43:51,222 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:43:51,222 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:43:51,222 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:43:51,222 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:43:51,222 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:43:51,223 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:43:51,223 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:43:51,223 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:43:51,223 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:43:51,223 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:43:51,223 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:43:51,223 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:43:51,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:01,383 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:01,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:01,384 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:01,384 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:01,384 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:01,384 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:01,384 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:01,384 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:01,384 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:01,385 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:01,385 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:01,385 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:01,385 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:01,385 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:11,545 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:11,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:11,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:11,545 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:11,545 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:11,545 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:11,545 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:11,545 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:11,545 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:11,546 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:11,546 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:11,546 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:11,546 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:11,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:21,704 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:21,705 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:21,705 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:21,705 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:21,705 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:21,705 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:21,705 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:21,705 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:21,705 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:21,706 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:21,706 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:21,706 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:21,706 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:21,706 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:44:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:45:27.551150+00:00 (in 59.998483 seconds)
2025-04-25 15:44:27,552 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:45:27 UTC)" (scheduled at 2025-04-25 05:44:27.551150+00:00)
2025-04-25 15:44:27,552 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:44:27,571 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:44:27,575 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:45:27 UTC)" executed successfully
2025-04-25 15:44:31,864 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:31,864 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:31,865 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:31,865 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:31,865 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:31,865 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:31,865 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:31,865 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:31,865 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:31,865 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:31,866 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:31,866 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:31,866 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:31,866 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:42,026 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:42,026 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:42,026 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:42,026 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:42,026 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:42,027 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:42,027 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:42,027 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:42,027 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:42,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:42,027 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:42,027 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:42,028 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:42,028 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:44:52,188 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:44:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:44:52,189 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:44:52,189 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:44:52,189 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:44:52,189 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:44:52,189 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:44:52,189 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:44:52,189 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:44:52,189 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:44:52,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:44:52,190 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:44:52,190 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:44:52,190 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:44:52,190 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:02,349 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:02,349 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:02,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:02,349 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:02,349 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:02,349 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:02,350 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:02,350 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:02,350 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:02,350 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:02,351 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:02,351 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:02,351 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:02,351 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:12,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:12,510 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:12,510 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:12,511 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:12,511 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:12,511 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:12,511 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:12,511 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:12,511 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:12,511 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:12,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:12,512 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:12,512 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:12,512 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:22,672 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:22,673 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:22,673 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:22,673 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:22,673 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:22,673 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:22,673 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:22,673 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:22,673 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:22,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:22,674 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:22,674 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:22,674 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:22,674 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:45:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:46:27.551150+00:00 (in 59.998608 seconds)
2025-04-25 15:45:27,552 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:46:27 UTC)" (scheduled at 2025-04-25 05:45:27.551150+00:00)
2025-04-25 15:45:27,552 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:45:27,557 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:45:27,561 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:46:27 UTC)" executed successfully
2025-04-25 15:45:32,833 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:32,834 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:32,834 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:32,834 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:32,834 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:32,834 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:32,834 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:32,834 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:32,834 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:32,835 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:32,835 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:32,835 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:32,835 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:32,835 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:42,994 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:42,995 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:42,995 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:42,995 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:42,995 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:42,995 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:42,995 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:42,995 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:42,995 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:42,996 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:42,996 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:42,996 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:42,996 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:42,996 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:45:53,155 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:45:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:45:53,155 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:45:53,155 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:45:53,156 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:45:53,156 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:45:53,156 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:45:53,156 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:45:53,156 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:45:53,156 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:45:53,156 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:45:53,157 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:45:53,157 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:45:53,157 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:45:53,157 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:03,319 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:03,319 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:03,319 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:03,319 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:03,319 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:03,319 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:03,320 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:03,320 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:03,320 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:03,320 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:03,320 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:03,320 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:03,321 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:03,321 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:13,480 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:13,480 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:13,480 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:13,480 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:13,480 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:13,480 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:13,481 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:13,481 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:13,481 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:13,481 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:13,481 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:13,481 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:13,482 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:13,482 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:23,643 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:23,643 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:23,643 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:23,643 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:23,643 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:23,643 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:23,643 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:23,643 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:23,644 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:23,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:23,644 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:23,644 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:23,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:23,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:27,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:46:27,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:47:27.551150+00:00 (in 59.998524 seconds)
2025-04-25 15:46:27,552 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:47:27 UTC)" (scheduled at 2025-04-25 05:46:27.551150+00:00)
2025-04-25 15:46:27,552 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:46:27,555 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:46:27,558 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:47:27 UTC)" executed successfully
2025-04-25 15:46:33,807 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:33,807 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:33,807 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:33,807 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:33,807 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:33,807 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:33,807 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:33,807 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:33,807 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:33,808 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:33,808 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:33,808 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:33,808 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:33,808 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:43,968 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:43,968 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:43,968 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:43,968 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:43,968 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:43,969 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:43,969 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:43,969 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:43,969 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:43,969 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:43,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:43,969 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:43,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:43,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:46:54,130 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:46:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:46:54,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:46:54,130 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:46:54,130 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:46:54,130 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:46:54,130 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:46:54,130 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:46:54,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:46:54,131 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:46:54,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:46:54,131 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:46:54,131 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:46:54,131 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:46:54,131 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:47:04,290 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:47:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:47:04,290 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:47:04,290 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:47:04,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:47:04,290 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:47:04,290 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:47:04,290 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:47:04,290 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:47:04,290 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:47:04,291 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:47:04,291 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:47:04,291 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:47:04,291 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:47:04,291 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:47:08,542 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 15:47:08,542 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 15:47:08,542 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 15:47:08,542 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 15:47:08,543 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 15:47:08,543 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:47:08,543 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 15:47:08,543 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489823, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:47:08,543 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:47:08,544 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:47:08,700 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F2D6EA0>
2025-04-25 15:47:08,701 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001944F21D5B0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:47:08,858 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001944F22DEB0>
2025-04-25 15:47:08,858 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:47:08,858 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:47:08,858 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:47:08,859 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:47:08,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:47:09,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:47:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:47:09,012 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:47:09,012 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:47:09,012 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:47:09,012 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:47:09,012 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:47:09,013 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:47:09,013 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:47:09,013 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 15:47:09,013 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 15:47:09,013 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 15:47:09,013 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 15:47:09,013 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 15:47:09,013 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 15:47:09,023 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 15:47:09,024 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 15:47:09,024 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 15:47:09,024 - httpcore.connection - DEBUG - close.started
2025-04-25 15:47:09,024 - httpcore.connection - DEBUG - close.started
2025-04-25 15:47:09,024 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:47:09,024 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:47:09,024 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 15:47:09,024 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 15:47:09,025 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 15:48:59,432 - __main__ - INFO - Запуск бота...
2025-04-25 15:48:59,433 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:48:59,948 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:48:59,948 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:48:59,949 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:48:59,949 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:48:59,949 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:48:59,949 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:48:59,950 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:48:59,950 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:48:59,950 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:48:59,950 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:48:59,950 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:48:59,951 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:48:59,951 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:48:59,955 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:49:00,107 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C164139550>
2025-04-25 15:49:00,107 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C1640F19A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:49:00,259 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C164121BD0>
2025-04-25 15:49:00,259 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:00,259 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:00,259 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:00,259 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:00,259 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:00,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:00,409 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:49:00,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:00,409 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:00,409 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:00,409 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:00,409 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:49:00,409 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:49:00,409 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:49:00,410 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:49:00,410 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:49:00,410 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:49:00,410 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:00,411 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:00,411 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:00,411 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:00,411 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:00,560 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:00,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:49:00,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:00,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:00,560 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:00,560 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:00,560 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:49:00,561 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:49:00,561 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:49:00,561 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:49:00,561 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:49:00,561 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:00,561 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:49:00,562 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:49:00,562 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:49:00,562 - telegram.ext.Application - INFO - Application started
2025-04-25 15:49:00,562 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:49:00,562 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:49:00,562 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:49:59.949936+00:00 (in 59.387397 seconds)
2025-04-25 15:49:00,714 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C164180690>
2025-04-25 15:49:00,714 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C1640F1640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:49:00,869 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C1640CA520>
2025-04-25 15:49:00,869 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:00,869 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:00,869 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:00,869 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:00,869 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:08,317 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:08,317 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:08,317 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:08,317 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:08,317 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:08,317 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:08,317 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489823, 'message': {'message_id': 703, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560148, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:49:08,317 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489823]
2025-04-25 15:49:08,318 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 49, 8, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=703, supergroup_chat_created=False, text='/start'), update_id=829489823)
2025-04-25 15:49:08,318 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489824, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:08,319 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:08,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:08,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:08,319 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:08,319 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,053 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:11,053 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:11,053 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,053 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:11,053 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:11,053 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:11,054 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489824, 'callback_query': {'id': '7022623324992129774', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:49:11,054 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489824]
2025-04-25 15:49:11,054 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324992129774', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489824)
2025-04-25 15:49:11,058 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:49:11,058 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324992129774'}`
2025-04-25 15:49:11,058 - httpcore.connection - DEBUG - close.started
2025-04-25 15:49:11,059 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:49:11,059 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:49:11,059 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489825, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:11,059 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,060 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:11,060 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,060 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:11,060 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,215 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C1640CB100>
2025-04-25 15:49:11,215 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C1640F19A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:49:11,376 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C1641604D0>
2025-04-25 15:49:11,376 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,376 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:11,376 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,376 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:11,376 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,538 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:11,538 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:49:11,538 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,538 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:11,538 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:11,538 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:11,538 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:49:11,538 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:49:11,543 - bot.settings - ERROR - Ошибка в get_user_settings для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:11,543 - bot.handlers - ERROR - Ошибка в callback_handler для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:11,543 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:11,544 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,545 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:11,545 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,545 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:11,545 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:11,811 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'610'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:11,811 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:49:11,812 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:11,812 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:11,812 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:11,812 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:11,812 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 704, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560151, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:15,054 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3466'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:15,054 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:15,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,054 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:15,054 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:15,054 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:15,054 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489825, 'callback_query': {'id': '7022623322388434429', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_vacation'}}]`
2025-04-25 15:49:15,055 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489825]
2025-04-25 15:49:15,055 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322388434429', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489825)
2025-04-25 15:49:15,055 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:49:15,055 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322388434429'}`
2025-04-25 15:49:15,056 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,056 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489826, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:15,056 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:15,056 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:15,057 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,219 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:15,220 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:49:15,220 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:15,220 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:15,220 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:15,220 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:49:15,220 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_vacation
2025-04-25 15:49:15,224 - bot.settings - ERROR - Ошибка в get_user_settings для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:15,224 - bot.handlers - ERROR - Ошибка в callback_handler для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:15,224 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:15,224 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,225 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:15,225 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,225 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:15,225 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:15,400 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'610'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:15,400 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:49:15,400 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:15,400 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:15,400 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:15,400 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:15,401 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 705, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560155, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:16,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3470'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:16,939 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:16,939 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:16,939 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:16,939 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:16,939 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:16,940 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489826, 'callback_query': {'id': '7022623324589945560', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 15:49:16,940 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489826]
2025-04-25 15:49:16,940 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324589945560', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489826)
2025-04-25 15:49:16,940 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:49:16,940 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324589945560'}`
2025-04-25 15:49:16,941 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:16,941 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489827, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:16,941 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:16,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:17,101 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:17,101 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:49:17,101 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:17,102 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:17,102 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:17,102 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:17,102 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:49:17,102 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 15:49:17,105 - bot.settings - ERROR - Ошибка в get_user_settings для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:17,105 - bot.handlers - ERROR - Ошибка в callback_handler для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:17,105 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:17,106 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:17,106 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:17,106 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:17,106 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:17,106 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:17,281 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'610'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:17,281 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:49:17,281 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:17,281 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:17,281 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:17,282 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:17,282 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 706, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560157, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:18,641 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3472'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:18,641 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:18,641 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,641 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:18,642 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:18,642 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:18,642 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489827, 'callback_query': {'id': '7022623324953926715', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 15:49:18,642 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489827]
2025-04-25 15:49:18,642 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324953926715', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489827)
2025-04-25 15:49:18,642 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:49:18,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324953926715'}`
2025-04-25 15:49:18,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:18,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:18,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:18,644 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,803 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:18,803 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:49:18,803 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,803 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:18,803 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:18,803 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:18,803 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:49:18,804 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 15:49:18,817 - bot.settings - ERROR - Ошибка в get_user_settings для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:18,817 - bot.handlers - ERROR - Ошибка в callback_handler для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:18,817 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:18,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:18,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,818 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:18,818 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:18,993 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'610'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:18,994 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:49:18,994 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:18,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:18,994 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:18,994 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:18,994 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 707, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560158, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:49:28,799 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:28,799 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:28,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:28,799 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:28,799 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:28,799 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:28,800 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:49:28,800 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:49:28,800 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:28,800 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:28,800 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:28,800 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:28,801 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:28,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:38,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:38,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:38,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:38,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:38,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:38,955 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:38,956 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:49:38,956 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:49:38,956 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:38,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:38,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:38,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:38,957 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:38,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:49,111 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:49,112 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:49,112 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:49,112 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:49,112 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:49,112 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:49,112 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:49:49,112 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:49:49,112 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:49,113 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:49,113 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:49,113 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:49,113 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:49,113 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:59,266 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:49:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:49:59,266 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:49:59,266 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:49:59,266 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:49:59,266 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:49:59,266 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:49:59,266 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:49:59,266 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:49:59,267 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:49:59,267 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:49:59,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:49:59,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:49:59,268 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:49:59,268 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:49:59,950 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:49:59,950 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:50:59.949936+00:00 (in 59.999161 seconds)
2025-04-25 15:49:59,950 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:50:59 UTC)" (scheduled at 2025-04-25 05:49:59.949936+00:00)
2025-04-25 15:49:59,951 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:49:59,962 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:49:59,968 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:50:59 UTC)" executed successfully
2025-04-25 15:50:09,419 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:50:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:50:09,419 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:50:09,419 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:50:09,420 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:50:09,420 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:50:09,420 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:50:09,420 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:50:09,420 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:50:09,420 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:50:09,420 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:50:09,421 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:50:09,421 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:50:09,421 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:50:09,421 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:50:19,574 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:50:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:50:19,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:50:19,574 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:50:19,574 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:50:19,575 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:50:19,575 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:50:19,575 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:50:19,575 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:50:19,575 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:50:19,575 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:50:19,575 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:50:19,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:50:19,576 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:50:19,576 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:50:29,729 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:50:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:50:29,729 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:50:29,729 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:50:29,729 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:50:29,729 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:50:29,729 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:50:29,729 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:50:29,729 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:50:29,730 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:50:29,730 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:50:29,730 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:50:29,730 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:50:29,730 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:50:29,730 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:50:39,888 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:50:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:50:39,888 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:50:39,888 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:50:39,888 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:50:39,888 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:50:39,888 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:50:39,889 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:50:39,889 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:50:39,889 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:50:39,889 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:50:39,889 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:50:39,889 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:50:39,890 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:50:39,890 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:50:50,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:50:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:50:50,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:50:50,047 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:50:50,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:50:50,047 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:50:50,047 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:50:50,048 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:50:50,048 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:50:50,048 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:50:50,048 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:50:50,048 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:50:50,049 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:50:50,049 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:50:50,049 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:50:59,961 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:50:59,961 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:51:59.949936+00:00 (in 59.987987 seconds)
2025-04-25 15:50:59,962 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:51:59 UTC)" (scheduled at 2025-04-25 05:50:59.949936+00:00)
2025-04-25 15:50:59,962 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:50:59,965 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:50:59,969 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:51:59 UTC)" executed successfully
2025-04-25 15:51:00,207 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:00,207 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:00,207 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:00,207 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:00,207 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:00,207 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:00,207 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:00,207 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:00,208 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:00,208 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:00,208 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:00,208 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:00,208 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:00,208 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:10,359 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:10,360 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:10,360 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:10,360 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:10,360 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:10,360 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:10,360 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:10,360 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:10,361 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:10,361 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:10,361 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:10,362 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:10,362 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:10,362 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:20,514 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:20,514 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:20,514 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:20,514 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:20,514 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:20,514 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:20,514 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:20,514 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:20,514 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:20,515 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:20,516 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:20,516 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:20,516 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:20,516 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:30,667 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:30,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:30,668 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:30,668 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:30,668 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:30,668 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:30,668 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:30,668 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:30,668 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:30,668 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:30,669 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:30,669 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:30,669 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:30,669 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:40,820 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:40,821 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:40,821 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:40,821 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:40,821 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:40,821 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:40,821 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:40,821 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:40,821 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:40,822 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:40,822 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:40,822 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:40,822 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:40,822 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:50,974 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:51:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:51:50,974 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:51:50,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:51:50,975 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:51:50,975 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:51:50,975 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:51:50,975 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:51:50,975 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:51:50,975 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:51:50,976 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:51:50,976 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:51:50,976 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:51:50,976 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:51:50,976 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:51:59,951 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:51:59,951 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:52:59.949936+00:00 (in 59.998053 seconds)
2025-04-25 15:51:59,952 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:52:59 UTC)" (scheduled at 2025-04-25 05:51:59.949936+00:00)
2025-04-25 15:51:59,952 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:51:59,956 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:51:59,958 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:52:59 UTC)" executed successfully
2025-04-25 15:52:01,131 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:01,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:01,131 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:01,131 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:01,131 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:01,131 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:01,131 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:01,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:01,132 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:01,132 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:01,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:01,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:01,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:01,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:11,290 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:11,290 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:11,290 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:11,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:11,290 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:11,290 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:11,291 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:11,291 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:11,291 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:11,291 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:11,291 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:11,291 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:11,291 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:11,292 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:21,445 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:21,445 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:21,445 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:21,445 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:21,445 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:21,445 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:21,445 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:21,445 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:21,445 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:21,446 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:21,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:21,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:21,446 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:21,446 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:31,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:31,600 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:31,600 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:31,600 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:31,600 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:31,600 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:31,600 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:31,600 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:31,600 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:31,601 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:31,601 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:31,601 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:31,601 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:31,601 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:41,752 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:41,752 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:41,752 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:41,752 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:41,752 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:41,753 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:41,753 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:41,753 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:41,753 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:41,753 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:41,753 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:41,753 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:41,754 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:41,754 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:51,905 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:52:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:52:51,905 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:52:51,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:52:51,906 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:52:51,906 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:52:51,906 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:52:51,906 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:52:51,906 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:52:51,906 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:52:51,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:52:51,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:52:51,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:52:51,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:52:51,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:52:59,950 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:52:59,950 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:53:59.949936+00:00 (in 59.999324 seconds)
2025-04-25 15:52:59,950 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:53:59 UTC)" (scheduled at 2025-04-25 05:52:59.949936+00:00)
2025-04-25 15:52:59,950 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:52:59,952 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:52:59,955 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:53:59 UTC)" executed successfully
2025-04-25 15:53:02,063 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:02,063 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:02,063 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:02,063 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:02,063 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:02,063 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:02,064 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:02,064 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:02,064 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:02,064 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:02,065 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:02,065 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:02,065 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:02,065 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:12,219 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:12,219 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:12,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:12,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:12,220 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:12,220 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:12,220 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:12,220 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:12,220 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:12,220 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:12,221 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:12,221 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:12,221 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:12,221 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:22,376 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:22,376 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:22,377 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:22,377 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:22,377 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:22,377 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:22,377 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:22,377 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:22,377 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:22,377 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:22,378 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:22,378 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:22,378 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:22,378 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:32,529 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:32,530 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:32,530 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:32,530 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:32,530 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:32,530 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:32,530 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:32,530 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:32,530 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:32,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:32,531 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:32,531 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:32,531 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:32,531 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:42,687 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:42,687 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:42,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:42,688 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:42,688 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:42,688 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:42,688 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:42,688 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:42,688 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:42,688 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:42,689 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:42,689 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:42,689 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:42,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:52,842 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:53:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:53:52,842 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:53:52,842 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:53:52,843 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:53:52,843 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:53:52,843 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:53:52,843 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:53:52,843 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:53:52,843 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:53:52,843 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:53:52,844 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:53:52,844 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:53:52,844 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:53:52,844 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:53:59,951 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:53:59,951 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:54:59.949936+00:00 (in 59.998456 seconds)
2025-04-25 15:53:59,951 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:54:59 UTC)" (scheduled at 2025-04-25 05:53:59.949936+00:00)
2025-04-25 15:53:59,951 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:53:59,977 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:53:59,979 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:54:59 UTC)" executed successfully
2025-04-25 15:54:02,995 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:02,996 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:02,996 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:02,996 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:02,996 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:02,996 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:02,996 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:02,996 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:02,996 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:02,997 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:02,997 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:02,997 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:02,997 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:02,997 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:13,156 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:13,157 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:13,157 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:13,157 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:13,157 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:13,157 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:13,157 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:13,157 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:13,157 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:13,158 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:13,158 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:13,158 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:13,158 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:13,158 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:23,311 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:23,311 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:23,312 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:23,312 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:23,312 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:23,312 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:23,312 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:23,312 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:23,312 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:23,312 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:23,313 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:23,313 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:23,313 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:23,313 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:33,473 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:33,473 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:33,473 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:33,473 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:33,473 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:33,473 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:33,473 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:33,473 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:33,473 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:33,474 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:33,474 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:33,474 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:33,474 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:33,474 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:43,626 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:43,626 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:43,626 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:43,626 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:43,626 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:43,626 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:43,627 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:43,627 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:43,627 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:43,627 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:43,627 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:43,627 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:43,628 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:43,628 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:53,780 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:54:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:54:53,781 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:54:53,781 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:54:53,781 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:54:53,781 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:54:53,781 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:54:53,781 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:54:53,781 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:54:53,781 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:54:53,782 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:54:53,782 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:54:53,782 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:54:53,782 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:54:53,782 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:54:59,951 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:54:59,951 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:55:59.949936+00:00 (in 59.998476 seconds)
2025-04-25 15:54:59,951 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:55:59 UTC)" (scheduled at 2025-04-25 05:54:59.949936+00:00)
2025-04-25 15:54:59,951 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:54:59,954 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:54:59,956 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:55:59 UTC)" executed successfully
2025-04-25 15:55:03,935 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:03,935 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:03,935 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:03,935 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:03,935 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:03,935 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:03,935 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:03,935 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:03,935 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:03,936 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:03,936 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:03,936 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:03,936 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:03,936 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:14,092 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:14,092 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:14,092 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:14,092 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:14,092 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:14,093 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:14,093 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:14,093 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:14,093 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:14,094 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:14,094 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:14,094 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:14,094 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:14,094 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:24,247 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:24,247 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:24,247 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:24,247 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:24,247 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:24,247 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:24,247 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:24,247 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:24,248 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:24,248 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:24,248 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:24,248 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:24,248 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:24,248 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:34,402 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:34,403 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:34,403 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:34,403 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:34,403 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:34,403 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:34,403 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:34,403 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:34,403 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:34,404 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:34,404 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:34,404 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:34,404 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:34,404 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:44,558 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:44,558 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:44,558 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:44,558 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:44,558 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:44,558 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:44,559 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:44,559 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:44,559 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:44,559 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:44,559 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:44,559 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:44,560 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:44,560 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:54,711 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:54,711 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:54,711 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:54,711 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:54,711 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:54,711 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:54,711 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:54,711 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:54,711 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:54,712 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:54,712 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:54,712 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:54,712 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:54,712 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:55,517 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 15:55:55,517 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 15:55:55,518 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 15:55:55,518 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 15:55:55,518 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 15:55:55,518 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:55,518 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 15:55:55,518 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489828, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:55:55,519 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:55,519 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:55:55,680 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C1641ADBF0>
2025-04-25 15:55:55,680 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C1640F1640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:55:55,840 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C164087AC0>
2025-04-25 15:55:55,840 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:55:55,841 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:55:55,841 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:55:55,841 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:55:55,842 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:55:59,001 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:55:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:55:59,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:55:59,001 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:55:59,001 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:55:59,001 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:55:59,001 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:55:59,001 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:55:59,001 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:55:59,001 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 15:55:59,001 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 15:55:59,001 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 15:55:59,002 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 15:55:59,002 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 15:55:59,002 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 15:55:59,012 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 15:55:59,012 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 15:55:59,012 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 15:55:59,012 - httpcore.connection - DEBUG - close.started
2025-04-25 15:55:59,012 - httpcore.connection - DEBUG - close.started
2025-04-25 15:55:59,012 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:55:59,013 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:55:59,013 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 15:55:59,013 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 15:55:59,013 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 15:56:03,007 - __main__ - INFO - Запуск бота...
2025-04-25 15:56:03,008 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 15:56:03,518 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:56:03,518 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 15:56:03,519 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 15:56:03,519 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 15:56:03,519 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 15:56:03,519 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 15:56:03,520 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 15:56:03,520 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 15:56:03,520 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 15:56:03,520 - __main__ - INFO - Бот начинает polling...
2025-04-25 15:56:03,520 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 15:56:03,521 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 15:56:03,521 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 15:56:03,525 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:56:03,682 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A6069F9550>
2025-04-25 15:56:03,682 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002A6069B19A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:56:03,845 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A6069E5BD0>
2025-04-25 15:56:03,845 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:03,845 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:03,845 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:03,845 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:03,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:04,001 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:04,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 15:56:04,002 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:04,002 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:04,002 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:04,002 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:04,002 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 15:56:04,002 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 15:56:04,002 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 15:56:04,002 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 15:56:04,002 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 15:56:04,002 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 15:56:04,003 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:04,003 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:04,003 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:04,003 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:04,003 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:04,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:04,161 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 15:56:04,161 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:04,161 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:04,161 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:04,161 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:04,161 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 15:56:04,161 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 15:56:04,161 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 15:56:04,161 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 15:56:04,161 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 15:56:04,162 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:04,162 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 15:56:04,162 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 15:56:04,162 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 15:56:04,162 - telegram.ext.Application - INFO - Application started
2025-04-25 15:56:04,162 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:56:04,162 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:56:04,162 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:57:03.519763+00:00 (in 59.356840 seconds)
2025-04-25 15:56:04,318 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A606A40690>
2025-04-25 15:56:04,318 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002A6069B1640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:56:04,476 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A60697E650>
2025-04-25 15:56:04,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:04,476 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:04,477 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:04,477 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:04,477 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:12,354 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:12,354 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:12,354 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:12,355 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:12,355 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:12,355 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:12,355 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489828, 'message': {'message_id': 708, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560572, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 15:56:12,355 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489828]
2025-04-25 15:56:12,355 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 56, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=708, supergroup_chat_created=False, text='/start'), update_id=829489828)
2025-04-25 15:56:12,356 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489829, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:12,356 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:12,357 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:12,357 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:12,357 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:12,357 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,312 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:15,313 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:15,313 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,313 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:15,313 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:15,313 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:15,313 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489829, 'callback_query': {'id': '7022623321257615539', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 15:56:15,313 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489829]
2025-04-25 15:56:15,314 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321257615539', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489829)
2025-04-25 15:56:15,317 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 15:56:15,317 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321257615539'}`
2025-04-25 15:56:15,318 - httpcore.connection - DEBUG - close.started
2025-04-25 15:56:15,318 - httpcore.connection - DEBUG - close.complete
2025-04-25 15:56:15,318 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 15:56:15,318 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:15,319 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:15,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,319 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:15,319 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,469 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A606A60510>
2025-04-25 15:56:15,469 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002A6069B19A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 15:56:15,623 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A606A24A70>
2025-04-25 15:56:15,623 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,624 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:15,624 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,624 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:15,624 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,809 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:15,810 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 15:56:15,810 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,810 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:15,810 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:15,810 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:15,810 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 15:56:15,810 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 15:56:15,814 - bot.settings - ERROR - Ошибка в get_user_settings для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:56:15,814 - bot.handlers - ERROR - Ошибка в callback_handler для пользователя 1635081908: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 2: ... SELECT subscribed, vacation_start, vacation_end, A2_arrival...
                                                             ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: 
                SELECT subscribed, vacation_start, vacation_end, A2_arrival_notification_times, A2_departure_notification_times
                FROM user_settings
                WHERE telegram_id = %(telegram_id)s
            ]
[parameters: {'telegram_id': 1635081908}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:56:15,814 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:56:15,814 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,815 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:15,815 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,815 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:15,815 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:15,987 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'610'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:15,987 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 15:56:15,987 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:15,987 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:15,987 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:15,988 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:15,988 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 709, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745560575, 'text': '❌ Произошла ошибка. Попробуй снова или свяжись с администратором.'}`
2025-04-25 15:56:25,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:25,476 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:25,476 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:25,476 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:25,476 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:25,476 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:25,476 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:56:25,476 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:56:25,476 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:25,477 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:25,477 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:25,477 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:25,477 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:25,477 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:35,640 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:35,640 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:35,640 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:35,640 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:35,640 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:35,640 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:35,640 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:56:35,641 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:56:35,641 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:35,641 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:35,641 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:35,641 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:35,641 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:35,642 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:45,798 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:45,798 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:45,798 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:45,798 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:45,799 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:45,799 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:45,799 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:56:45,799 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:56:45,799 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:45,799 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:45,799 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:45,799 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:45,800 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:45,800 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:56:55,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:56:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:56:55,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:56:55,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:56:55,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:56:55,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:56:55,956 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:56:55,956 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:56:55,956 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:56:55,956 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:56:55,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:56:55,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:56:55,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:56:55,957 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:56:55,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:03,520 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:57:03,520 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:58:03.519763+00:00 (in 59.999301 seconds)
2025-04-25 15:57:03,520 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:58:03 UTC)" (scheduled at 2025-04-25 05:57:03.519763+00:00)
2025-04-25 15:57:03,520 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:57:03,523 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:57:03,528 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:58:03 UTC)" executed successfully
2025-04-25 15:57:06,113 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:06,113 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:06,113 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:06,113 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:06,113 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:06,114 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:06,114 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:06,114 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:06,114 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:06,114 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:06,114 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:06,114 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:06,115 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:06,115 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:16,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:16,271 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:16,271 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:16,271 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:16,271 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:16,272 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:16,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:16,272 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:16,272 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:16,272 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:16,273 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:16,273 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:16,273 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:16,273 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:26,441 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:26,442 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:26,442 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:26,442 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:26,442 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:26,442 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:26,442 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:26,442 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:26,443 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:26,443 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:26,444 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:26,444 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:26,444 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:26,444 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:36,609 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:36,609 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:36,609 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:36,609 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:36,609 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:36,609 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:36,609 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:36,610 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:36,610 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:36,610 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:36,610 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:36,610 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:36,610 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:36,611 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:46,779 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:46,779 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:46,780 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:46,780 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:46,780 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:46,780 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:46,780 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:46,780 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:46,780 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:46,780 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:46,781 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:46,781 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:46,781 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:46,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:57:56,937 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:57:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:57:56,937 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:57:56,937 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:57:56,938 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:57:56,938 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:57:56,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:57:56,938 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:57:56,938 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:57:56,938 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:57:56,938 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:57:56,939 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:57:56,939 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:57:56,939 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:57:56,939 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:03,520 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:58:03,520 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 05:59:03.519763+00:00 (in 59.999051 seconds)
2025-04-25 15:58:03,520 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:59:03 UTC)" (scheduled at 2025-04-25 05:58:03.519763+00:00)
2025-04-25 15:58:03,521 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:58:03,524 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:58:03,526 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 05:59:03 UTC)" executed successfully
2025-04-25 15:58:07,095 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:07,096 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:07,096 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:07,096 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:07,096 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:07,096 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:07,096 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:07,096 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:07,096 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:07,097 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:07,097 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:07,097 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:07,097 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:07,097 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:17,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:17,255 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:17,255 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:17,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:17,255 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:17,255 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:17,255 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:17,256 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:17,256 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:17,256 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:17,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:17,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:17,256 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:17,256 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:27,412 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:27,412 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:27,412 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:27,412 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:27,412 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:27,412 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:27,413 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:27,413 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:27,413 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:27,413 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:27,413 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:27,413 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:27,414 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:27,414 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:37,569 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:37,569 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:37,570 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:37,570 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:37,570 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:37,570 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:37,570 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:37,570 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:37,570 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:37,570 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:37,571 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:37,571 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:37,571 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:37,571 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:47,730 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:47,731 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:47,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:47,731 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:47,731 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:47,731 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:47,731 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:47,731 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:47,731 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:47,732 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:47,732 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:47,732 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:47,732 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:47,732 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:58:57,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:58:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:58:57,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:58:57,889 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:58:57,889 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:58:57,889 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:58:57,889 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:58:57,890 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:58:57,890 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:58:57,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:58:57,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:58:57,890 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:58:57,890 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:58:57,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:58:57,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:03,520 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 15:59:03,520 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:00:03.519763+00:00 (in 59.998948 seconds)
2025-04-25 15:59:03,520 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:00:03 UTC)" (scheduled at 2025-04-25 05:59:03.519763+00:00)
2025-04-25 15:59:03,521 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 15:59:03,524 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 15:59:03,526 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:00:03 UTC)" executed successfully
2025-04-25 15:59:08,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:08,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:08,047 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:08,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:08,047 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:08,047 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:08,047 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:08,047 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:08,047 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:08,048 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:08,048 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:08,048 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:08,048 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:08,048 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:18,205 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:18,206 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:18,206 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:18,206 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:18,206 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:18,206 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:18,206 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:18,206 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:18,206 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:18,207 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:18,207 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:18,207 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:18,207 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:18,207 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:28,364 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:28,364 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:28,364 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:28,364 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:28,364 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:28,364 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:28,364 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:28,365 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:28,365 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:28,365 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:28,365 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:28,365 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:28,366 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:28,366 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:38,522 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:38,522 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:38,522 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:38,522 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:38,522 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:38,522 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:38,523 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:38,523 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:38,523 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:38,523 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:38,523 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:38,523 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:38,523 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:38,524 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:48,697 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:48,697 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:48,697 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:48,698 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:48,698 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:48,698 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:48,698 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:48,698 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:48,698 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:48,699 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:48,699 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:48,699 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:48,699 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:48,699 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 15:59:58,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 05:59:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 15:59:58,854 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 15:59:58,854 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 15:59:58,854 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 15:59:58,855 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 15:59:58,855 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 15:59:58,855 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 15:59:58,855 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 15:59:58,855 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 15:59:58,855 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 15:59:58,856 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 15:59:58,856 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 15:59:58,856 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 15:59:58,856 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:03,520 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:00:03,520 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:01:03.519763+00:00 (in 59.999059 seconds)
2025-04-25 16:00:03,520 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:01:03 UTC)" (scheduled at 2025-04-25 06:00:03.519763+00:00)
2025-04-25 16:00:03,520 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:00:03,523 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:00:03,526 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:01:03 UTC)" executed successfully
2025-04-25 16:00:09,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:09,012 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:09,013 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:09,013 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:09,013 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:09,013 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:09,013 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:09,013 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:09,013 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:09,014 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:09,014 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:09,014 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:09,014 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:09,014 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:19,179 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:19,179 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:19,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:19,179 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:19,179 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:19,179 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:19,179 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:19,179 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:19,179 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:19,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:19,180 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:19,180 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:19,180 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:19,180 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:29,336 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:29,336 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:29,337 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:29,337 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:29,337 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:29,337 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:29,337 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:29,337 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:29,337 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:29,338 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:29,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:29,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:29,338 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:29,338 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:39,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:39,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:39,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:39,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:39,500 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:39,500 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:39,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:39,500 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:39,500 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:39,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:39,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:39,501 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:39,501 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:39,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:49,659 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:49,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:49,659 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:49,659 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:49,659 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:49,659 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:49,659 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:49,660 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:49,660 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:49,660 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:49,660 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:49,660 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:49,661 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:49,662 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:00:59,817 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:00:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:00:59,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:00:59,818 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:00:59,818 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:00:59,818 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:00:59,818 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:00:59,818 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:00:59,818 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:00:59,818 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:00:59,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:00:59,819 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:00:59,819 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:00:59,819 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:00:59,819 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:01:03,521 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:01:03,521 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:02:03.519763+00:00 (in 59.998065 seconds)
2025-04-25 16:01:03,521 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:02:03 UTC)" (scheduled at 2025-04-25 06:01:03.519763+00:00)
2025-04-25 16:01:03,521 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:01:03,557 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:01:03,560 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:02:03 UTC)" executed successfully
2025-04-25 16:01:09,977 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:01:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:01:09,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:01:09,977 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:01:09,977 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:01:09,977 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:01:09,977 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:01:09,977 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:01:09,977 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:01:09,978 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:01:09,978 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:01:09,978 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:01:09,978 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:01:09,978 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:01:09,978 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:01:20,147 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:01:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:01:20,147 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:01:20,147 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:01:20,147 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:01:20,147 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:01:20,147 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:01:20,147 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:01:20,148 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:01:20,148 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:01:20,148 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:01:20,148 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:01:20,148 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:01:20,148 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:01:20,149 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:01:30,314 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:01:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:01:30,314 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:01:30,315 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:01:30,315 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:01:30,315 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:01:30,315 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:01:30,315 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:01:30,315 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:01:30,315 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:01:30,315 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:01:30,316 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:01:30,316 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:01:30,316 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:01:30,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:01:40,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:01:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:01:40,474 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:01:40,474 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:01:40,474 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:01:40,474 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:01:40,474 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:01:40,474 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:01:40,474 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:01:40,474 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:01:40,475 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:01:40,475 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:01:40,475 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:01:40,475 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:01:40,475 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:01:50,631 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:01:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:01:50,632 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:01:50,632 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:01:50,632 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:01:50,632 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:01:50,632 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:01:50,632 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:01:50,632 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:01:50,632 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:01:50,633 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:01:50,633 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:01:50,633 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:01:50,633 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:01:50,633 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:00,789 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:00,790 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:00,790 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:00,790 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:00,790 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:00,790 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:00,790 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:00,790 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:00,790 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:00,791 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:00,791 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:00,791 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:00,791 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:00,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:03,521 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:02:03,521 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:03:03.519763+00:00 (in 59.998401 seconds)
2025-04-25 16:02:03,521 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:03:03 UTC)" (scheduled at 2025-04-25 06:02:03.519763+00:00)
2025-04-25 16:02:03,521 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:02:03,526 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:02:03,529 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:03:03 UTC)" executed successfully
2025-04-25 16:02:10,948 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:10,948 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:10,948 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:10,949 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:10,949 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:10,949 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:10,949 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:10,949 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:10,949 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:10,949 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:10,950 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:10,950 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:10,950 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:10,950 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:21,107 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:21,107 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:21,107 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:21,107 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:21,107 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:21,107 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:21,107 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:21,107 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:21,108 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:21,108 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:21,108 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:21,108 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:21,108 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:21,108 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:31,277 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:31,278 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:31,278 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:31,278 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:31,278 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:31,278 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:31,278 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:31,278 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:31,278 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:31,279 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:31,279 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:31,279 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:31,279 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:31,279 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:41,436 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:41,436 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:41,436 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:41,436 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:41,436 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:41,437 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:41,437 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:41,437 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:41,437 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:41,437 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:41,438 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:41,438 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:41,438 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:41,438 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:02:51,594 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:02:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:02:51,594 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:02:51,594 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:02:51,594 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:02:51,594 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:02:51,594 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:02:51,594 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:02:51,594 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:02:51,595 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:02:51,595 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:02:51,595 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:02:51,595 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:02:51,595 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:02:51,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:01,759 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:01,759 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:01,759 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:01,759 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:01,759 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:01,759 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:01,759 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:03:01,759 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:03:01,760 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:01,760 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:01,761 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:01,761 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:01,761 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:01,761 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:03,521 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:03:03,521 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:04:03.519763+00:00 (in 59.998549 seconds)
2025-04-25 16:03:03,521 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:04:03 UTC)" (scheduled at 2025-04-25 06:03:03.519763+00:00)
2025-04-25 16:03:03,521 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:03:03,523 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:03:03,526 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:04:03 UTC)" executed successfully
2025-04-25 16:03:11,917 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:11,917 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:11,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:11,917 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:11,917 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:11,917 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:11,918 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:03:11,918 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:03:11,918 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:11,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:11,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:11,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:11,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:11,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:22,074 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:22,074 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:22,074 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:22,074 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:22,074 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:22,074 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:22,074 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:03:22,075 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:03:22,075 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:22,075 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:22,075 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:22,075 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:22,075 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:22,076 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:32,231 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:32,232 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:32,232 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:32,232 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:32,232 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:32,232 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:32,232 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:03:32,232 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:03:32,232 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:32,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:32,233 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:32,233 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:32,233 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:32,233 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:40,195 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 16:03:40,195 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 16:03:40,195 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 16:03:40,195 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 16:03:40,195 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 16:03:40,195 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:40,195 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 16:03:40,195 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489830, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:40,196 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:40,196 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:03:40,354 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A606A6C9E0>
2025-04-25 16:03:40,354 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002A6069B1640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:03:40,512 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002A606947AC0>
2025-04-25 16:03:40,512 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:40,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:40,512 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:40,513 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:40,513 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:40,667 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:40,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:40,667 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:40,667 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:40,667 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:40,667 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:40,668 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:03:40,668 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:03:40,668 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 16:03:40,668 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 16:03:40,668 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 16:03:40,668 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 16:03:40,668 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 16:03:40,668 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 16:03:40,680 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 16:03:40,680 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 16:03:40,680 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 16:03:40,680 - httpcore.connection - DEBUG - close.started
2025-04-25 16:03:40,680 - httpcore.connection - DEBUG - close.started
2025-04-25 16:03:40,680 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:03:40,680 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:03:40,680 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 16:03:40,680 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 16:03:40,681 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 16:03:45,398 - __main__ - INFO - Запуск бота...
2025-04-25 16:03:45,399 - __main__ - INFO - Токен успешно прочитан из TG_TOKEN.txt
2025-04-25 16:03:45,943 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:03:45,943 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:03:45,944 - __main__ - INFO - Приложение Telegram бота инициализировано
2025-04-25 16:03:45,944 - __main__ - INFO - ConversationHandler добавлен в приложение
2025-04-25 16:03:45,944 - __main__ - INFO - Обработчики для регистрации добавлены
2025-04-25 16:03:45,945 - bot.scheduler - INFO - Инициализация планировщика уведомлений...
2025-04-25 16:03:45,945 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 16:03:45,945 - bot.scheduler - INFO - Задача отправки уведомлений запланирована на выполнение каждую минуту через JobQueue
2025-04-25 16:03:45,945 - __main__ - INFO - Планировщик уведомлений запущен через JobQueue
2025-04-25 16:03:45,945 - __main__ - INFO - Бот начинает polling...
2025-04-25 16:03:45,945 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 16:03:45,946 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 16:03:45,946 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 16:03:45,950 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:03:46,105 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000179711AD550>
2025-04-25 16:03:46,105 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179711659A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:03:46,261 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000017971195BD0>
2025-04-25 16:03:46,262 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:46,262 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:46,262 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:46,262 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:46,262 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:46,416 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:46,417 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 16:03:46,418 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:46,418 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:46,418 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:46,418 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:46,419 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 16:03:46,419 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 16:03:46,419 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 16:03:46,419 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 16:03:46,419 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 16:03:46,419 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 16:03:46,420 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:46,420 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:46,420 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:46,420 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:46,421 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:46,579 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:46,579 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 16:03:46,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:46,580 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:46,580 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:46,580 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:46,580 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 16:03:46,580 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 16:03:46,580 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 16:03:46,580 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 16:03:46,580 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 16:03:46,580 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:46,581 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 16:03:46,581 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 16:03:46,581 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 16:03:46,581 - telegram.ext.Application - INFO - Application started
2025-04-25 16:03:46,581 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:03:46,581 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:03:46,581 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:04:45.945077+00:00 (in 59.363351 seconds)
2025-04-25 16:03:46,730 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000179711F0690>
2025-04-25 16:03:46,731 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000017971165640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:03:46,881 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797113E2C0>
2025-04-25 16:03:46,881 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:46,881 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:46,881 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:46,882 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:46,882 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:50,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:50,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:50,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:50,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:50,500 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:50,500 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:50,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489830, 'message': {'message_id': 710, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561030, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 16:03:50,500 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489830]
2025-04-25 16:03:50,500 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 3, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=710, supergroup_chat_created=False, text='/start'), update_id=829489830)
2025-04-25 16:03:50,501 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489831, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:50,502 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:50,502 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:50,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:50,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:50,502 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:53,965 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3466'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:53,965 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:53,965 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:53,965 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:53,965 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:53,966 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:53,966 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489831, 'callback_query': {'id': '7022623325151870711', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_vacation'}}]`
2025-04-25 16:03:53,966 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489831]
2025-04-25 16:03:53,966 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325151870711', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489831)
2025-04-25 16:03:53,971 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 16:03:53,971 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623325151870711'}`
2025-04-25 16:03:53,972 - httpcore.connection - DEBUG - close.started
2025-04-25 16:03:53,972 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:03:53,972 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:03:53,972 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489832, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:53,972 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:53,973 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:53,973 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:53,973 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:53,973 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:54,127 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797113DF30>
2025-04-25 16:03:54,127 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179711659A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:03:54,282 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000179711D04D0>
2025-04-25 16:03:54,282 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:54,282 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:54,282 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:54,283 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:54,283 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:54,446 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:54,447 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:03:54,447 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:54,447 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:54,447 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:54,447 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:54,447 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:03:54,448 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_vacation
2025-04-25 16:03:54,450 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:03:54,451 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:03:57,467 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3473'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:57,467 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:03:57,468 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,468 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:57,468 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:57,468 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:57,468 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489832, 'callback_query': {'id': '7022623322072259148', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 686, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745558570, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Добавить период отпуска', 'callback_data': 'add_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 16:03:57,468 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489832]
2025-04-25 16:03:57,468 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322072259148', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 5, 22, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=686, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='add_vacation', text='🏖️ Добавить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Периоды отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489832)
2025-04-25 16:03:57,469 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 686) with state None
2025-04-25 16:03:57,469 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322072259148'}`
2025-04-25 16:03:57,469 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,469 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489833, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:57,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,471 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:57,471 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,661 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:57,661 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:03:57,662 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,662 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:57,662 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:57,662 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:57,662 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:03:57,662 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 16:03:57,663 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:03:57,664 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:03:57,664 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 16:03:57,665 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 16:03:57,667 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 16:03:57,668 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:03:57,717 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на False
2025-04-25 16:03:57,718 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 16:03:57,718 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,719 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:57,719 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,719 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:57,719 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,917 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:57,917 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:03:57,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,917 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:57,917 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:57,918 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:57,918 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 711, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561037, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 16:03:57,920 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:03:57,921 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:03:57,922 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:03:57,922 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:03:57,922 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:03:57,922 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:03:57,922 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:03:58,133 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:03:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3039'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:03:58,133 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:03:58,133 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:03:58,133 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:03:58,133 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:03:58,134 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:03:58,134 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 712, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561038, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:04:02,361 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3311'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:02,361 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:02,362 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,362 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:02,362 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:02,362 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:02,362 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489833, 'callback_query': {'id': '7022623323328946863', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 712, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561038, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 16:04:02,362 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489833]
2025-04-25 16:04:02,362 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323328946863', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 3, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=712, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489833)
2025-04-25 16:04:02,363 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 712) with state None
2025-04-25 16:04:02,363 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323328946863'}`
2025-04-25 16:04:02,363 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,363 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489834, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:02,364 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,527 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:02,527 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:04:02,527 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,527 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:02,527 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:02,527 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:02,527 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:04:02,527 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 16:04:02,529 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:02,530 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:04:02,530 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 16:04:02,546 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 16:04:02,547 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 16:04:02,548 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:02,567 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-25 16:04:02,567 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 16:04:02,568 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,568 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:02,568 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,568 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:02,568 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,749 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:02,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:02,750 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,750 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:02,750 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:02,750 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:02,750 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 713, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 16:04:02,752 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:02,753 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:04:02,753 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,754 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:02,754 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,754 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:02,754 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:02,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3020'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:02,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:02,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:02,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:02,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:02,955 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:02,956 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:04:05,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3285'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:05,617 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:05,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:05,617 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:05,617 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:05,618 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489834, 'callback_query': {'id': '7022623322949952431', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'set_vacation'}}]`
2025-04-25 16:04:05,618 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489834]
2025-04-25 16:04:05,618 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='set_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322949952431', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 2, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=714, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489834)
2025-04-25 16:04:05,618 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 714) with state None
2025-04-25 16:04:05,618 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322949952431'}`
2025-04-25 16:04:05,619 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,619 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489835, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:05,619 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:05,619 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,619 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:05,619 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,620 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,620 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:05,620 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,620 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:05,620 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,796 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:05,797 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:04:05,797 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,797 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:05,797 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:05,797 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:05,797 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:04:05,797 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=set_vacation
2025-04-25 16:04:05,799 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:05,799 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:04:05,799 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Установить период отпуска'. Действие: запрос даты начала отпуска.
2025-04-25 16:04:05,799 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:04:05,800 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,800 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:05,800 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,800 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:05,800 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:05,978 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'583'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:05,978 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:05,978 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:05,978 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:05,978 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:05,978 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:05,978 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 715, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561045, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:04:05,979 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_START
2025-04-25 16:04:12,154 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:12,154 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:12,154 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:12,154 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:12,154 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:12,154 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:12,154 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489835, 'message': {'message_id': 716, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561052, 'text': '29-04-2025'}}]`
2025-04-25 16:04:12,155 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489835]
2025-04-25 16:04:12,155 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=716, supergroup_chat_created=False, text='29-04-2025'), update_id=829489835)
2025-04-25 16:04:12,155 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489836, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:12,155 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:12,156 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:12,156 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:12,156 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:12,156 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:17,240 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'330'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:17,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:17,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:17,241 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:17,241 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:17,241 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:17,241 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489836, 'message': {'message_id': 717, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561057, 'text': '123'}}]`
2025-04-25 16:04:17,241 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489836]
2025-04-25 16:04:17,241 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=717, supergroup_chat_created=False, text='123'), update_id=829489836)
2025-04-25 16:04:17,241 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489837, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:17,242 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:17,242 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:17,242 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:17,242 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:17,242 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:19,311 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'330'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:19,311 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:19,311 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:19,311 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:19,311 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:19,311 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:19,311 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489837, 'message': {'message_id': 718, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561059, 'text': '123'}}]`
2025-04-25 16:04:19,311 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489837]
2025-04-25 16:04:19,312 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 19, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=718, supergroup_chat_created=False, text='123'), update_id=829489837)
2025-04-25 16:04:19,312 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489838, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:19,312 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:19,313 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:19,313 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:19,313 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:19,313 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:20,968 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'330'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:20,968 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:20,968 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:20,969 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:20,969 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:20,969 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:20,969 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489838, 'message': {'message_id': 719, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561060, 'text': '312'}}]`
2025-04-25 16:04:20,969 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489838]
2025-04-25 16:04:20,969 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=719, supergroup_chat_created=False, text='312'), update_id=829489838)
2025-04-25 16:04:20,969 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489839, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:20,970 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:20,970 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:20,970 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:20,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:20,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,220 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3289'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:25,220 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:25,220 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:25,220 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:25,220 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:25,221 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489839, 'callback_query': {'id': '7022623321159368871', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 16:04:25,221 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489839]
2025-04-25 16:04:25,221 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321159368871', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 2, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=714, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489839)
2025-04-25 16:04:25,221 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 714) with state 0
2025-04-25 16:04:25,221 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321159368871'}`
2025-04-25 16:04:25,222 - httpcore.connection - DEBUG - close.started
2025-04-25 16:04:25,222 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:04:25,222 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:04:25,222 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489840, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:25,222 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,223 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:25,223 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,223 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:25,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,370 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797121A140>
2025-04-25 16:04:25,370 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179711659A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:04:25,519 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797121A250>
2025-04-25 16:04:25,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:25,520 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,520 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:25,520 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,673 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:25,673 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:04:25,673 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,673 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:25,673 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:25,673 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:25,674 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:04:25,674 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 16:04:25,675 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:25,676 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:04:25,676 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за сегодня'. Действие: получение данных о посещениях.
2025-04-25 16:04:25,697 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 16:04:25,698 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,698 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:25,698 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,698 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:25,698 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:25,867 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:25,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:25,868 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:25,868 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:25,868 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:25,868 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:25,868 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 720, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561065, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 16:04:27,702 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3291'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:27,703 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:27,703 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:27,703 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:27,703 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:27,703 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:27,703 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489840, 'callback_query': {'id': '7022623324920444712', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 16:04:27,703 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489840]
2025-04-25 16:04:27,703 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324920444712', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 2, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=714, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489840)
2025-04-25 16:04:27,704 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 714) with state None
2025-04-25 16:04:27,704 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324920444712'}`
2025-04-25 16:04:27,704 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:27,704 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489841, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:27,705 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:27,860 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:27,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:04:27,860 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:27,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:27,861 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:27,861 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:27,861 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:04:27,861 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 16:04:27,930 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:27,931 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:04:27,931 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за 10 дней'. Действие: получение данных о посещениях за 10 дней.
2025-04-25 16:04:27,936 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 16:04:27,937 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:27,937 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:27,937 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:27,937 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:27,937 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:28,109 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:28,109 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:28,110 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:28,110 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:28,110 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:28,110 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:28,110 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 721, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561068, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 16:04:32,930 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3302'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:32,931 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:32,931 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:32,931 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:32,931 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:32,931 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:32,931 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489841, 'callback_query': {'id': '7022623322659148656', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 16:04:32,931 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489841]
2025-04-25 16:04:32,932 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322659148656', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 2, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=714, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489841)
2025-04-25 16:04:32,932 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 714) with state None
2025-04-25 16:04:32,932 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322659148656'}`
2025-04-25 16:04:32,932 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:32,932 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489842, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:32,933 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:32,934 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:32,934 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:33,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:33,117 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:04:33,117 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:33,117 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:33,117 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:33,117 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:33,117 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:04:33,117 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 16:04:33,119 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:04:33,120 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:04:33,120 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Добавить время оповещений о приходе'. Действие: проверка лимита и запрос времени.
2025-04-25 16:04:33,120 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 16:04:33,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:33,121 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:33,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:33,121 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:33,121 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:33,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:33,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:04:33,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:33,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:33,326 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:33,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:33,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 722, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561073, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 16:04:33,326 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_ARRIVAL_NOTIFICATION
2025-04-25 16:04:41,422 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'331'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:41,422 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:41,422 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:41,422 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:41,422 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:41,422 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:41,422 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489842, 'message': {'message_id': 723, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561081, 'text': '9:23'}}]`
2025-04-25 16:04:41,422 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489842]
2025-04-25 16:04:41,423 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=723, supergroup_chat_created=False, text='9:23'), update_id=829489842)
2025-04-25 16:04:41,423 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:41,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:41,423 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:41,423 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:41,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:41,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:04:45,946 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:04:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:05:45.945077+00:00 (in 59.998351 seconds)
2025-04-25 16:04:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:05:45 UTC)" (scheduled at 2025-04-25 06:04:45.945077+00:00)
2025-04-25 16:04:45,947 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:04:45,951 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:04:45,956 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:05:45 UTC)" executed successfully
2025-04-25 16:04:51,574 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:04:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:04:51,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:04:51,574 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:04:51,574 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:04:51,574 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:04:51,574 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:04:51,574 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:04:51,574 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:04:51,574 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:04:51,575 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:04:51,575 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:04:51,575 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:04:51,575 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:04:51,575 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:01,732 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:01,732 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:01,733 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:01,733 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:01,733 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:01,733 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:01,733 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:01,733 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:01,733 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:01,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:01,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:01,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:01,735 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:01,735 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:11,885 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:11,885 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:11,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:11,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:11,886 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:11,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:11,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:11,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:11,886 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:11,886 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:11,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:11,887 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:11,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:11,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:22,038 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:22,038 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:22,038 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:22,038 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:22,038 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:22,039 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:22,039 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:22,039 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:22,039 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:22,039 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:22,039 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:22,039 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:22,040 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:22,040 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:32,193 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:32,193 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:32,193 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:32,193 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:32,193 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:32,193 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:32,194 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:32,194 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:32,194 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:32,194 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:32,194 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:32,194 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:32,195 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:32,195 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:42,344 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:42,344 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:42,345 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:42,345 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:42,345 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:42,345 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:42,345 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:42,345 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:42,345 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:42,346 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:42,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:42,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:42,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:42,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:45,946 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:05:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:06:45.945077+00:00 (in 59.998827 seconds)
2025-04-25 16:05:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:06:45 UTC)" (scheduled at 2025-04-25 06:05:45.945077+00:00)
2025-04-25 16:05:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:05:45,949 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:05:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:06:45 UTC)" executed successfully
2025-04-25 16:05:52,538 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:52,539 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:52,539 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:52,539 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:52,539 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:52,539 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:52,539 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:05:52,539 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:05:52,539 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489843, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:52,540 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:52,540 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:52,540 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:52,540 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:52,540 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:54,928 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3291'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:54,928 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:54,928 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:54,929 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:54,929 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:54,929 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:54,929 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489843, 'callback_query': {'id': '7022623324613539184', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 714, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561042, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 16:05:54,929 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489843]
2025-04-25 16:05:54,929 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324613539184', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 4, 2, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=714, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'),), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489843)
2025-04-25 16:05:54,930 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908, 714) with state 2
2025-04-25 16:05:54,930 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324613539184'}`
2025-04-25 16:05:54,930 - httpcore.connection - DEBUG - close.started
2025-04-25 16:05:54,930 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:05:54,930 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:05:54,931 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489844, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:54,931 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:54,931 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:54,931 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:54,931 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:54,931 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:55,083 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000017971189550>
2025-04-25 16:05:55,083 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000179711659A0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:05:55,238 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797118BD50>
2025-04-25 16:05:55,238 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:55,238 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:55,238 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:55,238 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:55,238 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:55,396 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:55,396 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:05:55,396 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:55,396 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:55,396 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:55,396 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:55,397 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:05:55,397 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 16:05:55,421 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:05:55,422 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:05:55,422 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за 10 дней'. Действие: получение данных о посещениях за 10 дней.
2025-04-25 16:05:55,447 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 16:05:55,448 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:55,448 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:55,448 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:55,448 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:55,448 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:05:55,640 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:55,640 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:05:55,640 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:55,640 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:55,641 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:55,641 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:55,641 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 724, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561155, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 16:05:58,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:05:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:05:58,961 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:05:58,961 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:05:58,961 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:05:58,961 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:05:58,961 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:05:58,961 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489844, 'message': {'message_id': 725, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745561158, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 16:05:58,961 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489844]
2025-04-25 16:05:58,961 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 5, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=725, supergroup_chat_created=False, text='/start'), update_id=829489844)
2025-04-25 16:05:58,962 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:05:58,962 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:05:58,962 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:05:58,962 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:05:58,963 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:05:58,963 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:09,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:09,114 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:09,114 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:09,114 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:09,114 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:09,114 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:09,115 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:09,115 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:09,115 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:09,115 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:09,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:09,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:09,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:09,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:19,270 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:19,270 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:19,270 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:19,270 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:19,270 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:19,271 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:19,271 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:19,271 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:19,271 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:19,271 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:19,271 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:19,271 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:19,272 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:19,272 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:29,427 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:29,428 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:29,428 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:29,428 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:29,428 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:29,428 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:29,428 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:29,428 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:29,428 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:29,429 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:29,429 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:29,429 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:29,429 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:29,429 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:39,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:39,581 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:39,581 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:39,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:39,581 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:39,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:39,581 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:39,581 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:39,581 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:39,582 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:39,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:39,582 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:39,582 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:39,582 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:45,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:06:45,947 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:07:45.945077+00:00 (in 59.997676 seconds)
2025-04-25 16:06:45,947 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:07:45 UTC)" (scheduled at 2025-04-25 06:06:45.945077+00:00)
2025-04-25 16:06:45,947 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:06:45,950 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:06:45,953 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:07:45 UTC)" executed successfully
2025-04-25 16:06:49,733 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:49,733 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:49,733 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:49,733 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:49,733 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:49,733 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:49,733 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:49,733 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:49,733 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:49,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:49,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:49,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:49,734 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:49,734 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:06:59,884 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:06:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:06:59,884 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:06:59,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:06:59,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:06:59,885 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:06:59,885 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:06:59,885 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:06:59,885 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:06:59,885 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:06:59,885 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:06:59,886 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:06:59,886 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:06:59,886 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:06:59,886 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:07:10,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:07:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:07:10,035 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:07:10,035 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:07:10,035 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:07:10,036 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:07:10,036 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:07:10,036 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:07:10,036 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:07:10,036 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:07:10,036 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:07:10,037 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:07:10,037 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:07:10,037 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:07:10,037 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:07:20,187 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:07:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:07:20,188 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:07:20,188 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:07:20,188 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:07:20,188 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:07:20,188 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:07:20,188 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:07:20,188 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:07:20,188 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:07:20,189 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:07:20,189 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:07:20,189 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:07:20,189 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:07:20,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:07:30,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:07:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:07:30,340 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:07:30,340 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:07:30,340 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:07:30,340 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:07:30,341 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:07:30,341 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:07:30,341 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:07:30,341 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:07:30,341 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:07:30,341 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:07:30,341 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:07:30,342 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:07:30,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:07:40,491 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:07:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:07:40,491 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:07:40,491 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:07:40,491 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:07:40,491 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:07:40,491 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:07:40,491 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:07:40,492 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:07:40,492 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:07:40,492 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:07:40,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:07:40,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:07:40,492 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:07:40,492 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:07:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:07:45,945 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:08:45.945077+00:00 (in 59.999198 seconds)
2025-04-25 16:07:45,945 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:08:45 UTC)" (scheduled at 2025-04-25 06:07:45.945077+00:00)
2025-04-25 16:07:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:07:45,949 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:07:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:08:45 UTC)" executed successfully
2025-04-25 16:07:50,653 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:07:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:07:50,654 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:07:50,654 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:07:50,654 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:07:50,654 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:07:50,654 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:07:50,654 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:07:50,654 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:07:50,654 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:07:50,655 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:07:50,655 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:07:50,655 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:07:50,655 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:07:50,655 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:00,805 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:00,805 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:00,805 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:00,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:00,806 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:00,806 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:00,806 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:00,806 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:00,806 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:00,806 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:00,807 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:00,807 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:00,807 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:00,807 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:10,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:10,956 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:10,956 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:10,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:10,957 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:10,957 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:10,957 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:10,957 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:10,957 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:10,957 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:10,958 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:10,958 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:10,958 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:10,958 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:21,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:21,114 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:21,114 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:21,114 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:21,114 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:21,114 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:21,115 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:21,115 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:21,115 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:21,115 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:21,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:21,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:21,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:21,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:31,265 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:31,266 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:31,266 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:31,266 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:31,266 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:31,266 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:31,266 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:31,266 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:31,266 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:31,267 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:31,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:31,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:31,267 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:31,267 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:41,418 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:41,419 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:41,419 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:41,419 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:41,419 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:41,419 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:41,419 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:41,420 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:41,420 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:41,420 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:41,420 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:41,420 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:41,421 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:41,421 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:08:45,946 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:08:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:09:45.945077+00:00 (in 59.998712 seconds)
2025-04-25 16:08:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:09:45 UTC)" (scheduled at 2025-04-25 06:08:45.945077+00:00)
2025-04-25 16:08:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:08:45,949 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:08:45,952 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:09:45 UTC)" executed successfully
2025-04-25 16:08:51,571 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:08:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:08:51,572 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:08:51,572 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:08:51,572 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:08:51,572 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:08:51,572 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:08:51,572 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:08:51,572 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:08:51,572 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:08:51,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:08:51,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:08:51,573 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:08:51,573 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:08:51,573 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:01,722 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:01,723 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:01,723 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:01,723 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:01,723 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:01,723 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:01,723 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:01,723 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:01,723 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:01,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:01,724 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:01,724 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:01,724 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:01,724 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:11,883 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:11,883 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:11,884 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:11,884 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:11,884 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:11,884 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:11,884 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:11,884 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:11,884 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:11,885 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:11,885 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:11,885 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:11,885 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:11,885 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:22,037 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:22,037 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:22,037 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:22,038 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:22,038 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:22,038 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:22,038 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:22,038 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:22,038 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:22,038 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:22,039 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:22,039 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:22,039 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:22,040 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:32,189 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:32,189 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:32,189 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:32,189 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:32,189 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:32,189 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:32,189 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:32,189 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:32,190 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:32,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:32,190 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:32,190 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:32,190 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:32,190 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:42,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:42,341 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:42,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:42,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:42,341 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:42,341 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:42,341 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:42,341 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:42,341 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:42,342 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:42,342 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:42,342 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:42,342 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:42,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:09:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:09:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:10:45.945077+00:00 (in 59.999072 seconds)
2025-04-25 16:09:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:10:45 UTC)" (scheduled at 2025-04-25 06:09:45.945077+00:00)
2025-04-25 16:09:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:09:45,950 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:09:45,953 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:10:45 UTC)" executed successfully
2025-04-25 16:09:52,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:09:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:09:52,494 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:09:52,494 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:09:52,494 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:09:52,494 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:09:52,494 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:09:52,494 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:09:52,494 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:09:52,494 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:09:52,494 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:09:52,495 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:09:52,495 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:09:52,495 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:09:52,495 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:02,646 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:02,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:02,646 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:02,646 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:02,646 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:02,646 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:02,647 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:02,647 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:02,647 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:02,647 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:02,647 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:02,647 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:02,648 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:02,648 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:12,798 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:12,798 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:12,798 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:12,798 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:12,798 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:12,798 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:12,798 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:12,798 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:12,799 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:12,799 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:12,799 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:12,799 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:12,799 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:12,799 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:22,963 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:22,963 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:22,963 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:22,963 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:22,963 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:22,964 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:22,964 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:22,964 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:22,964 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:22,964 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:22,965 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:22,965 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:22,965 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:22,965 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:33,116 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:33,116 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:33,117 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:33,118 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:33,118 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:33,118 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:33,118 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:33,118 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:33,118 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:33,118 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:33,119 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:33,119 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:33,119 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:33,119 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:43,291 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:43,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:43,292 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:43,292 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:43,292 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:43,292 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:43,292 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:43,292 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:43,292 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:43,292 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:43,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:43,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:43,293 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:43,293 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:10:45,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:10:45,947 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:11:45.945077+00:00 (in 59.997610 seconds)
2025-04-25 16:10:45,947 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:11:45 UTC)" (scheduled at 2025-04-25 06:10:45.945077+00:00)
2025-04-25 16:10:45,947 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:10:45,952 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:10:45,954 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:11:45 UTC)" executed successfully
2025-04-25 16:10:53,442 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:10:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:10:53,442 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:10:53,442 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:10:53,443 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:10:53,443 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:10:53,443 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:10:53,443 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:10:53,443 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:10:53,443 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:10:53,443 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:10:53,444 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:10:53,444 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:10:53,444 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:10:53,444 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:03,598 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:03,598 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:03,598 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:03,598 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:03,598 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:03,598 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:03,598 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:03,598 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:03,598 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:03,599 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:03,599 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:03,599 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:03,599 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:03,599 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:13,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:13,748 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:13,748 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:13,748 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:13,748 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:13,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:13,749 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:13,749 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:13,749 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:13,749 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:13,749 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:13,749 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:13,750 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:13,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:23,905 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:23,905 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:23,905 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:23,905 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:23,906 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:23,906 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:23,906 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:23,906 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:23,906 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:23,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:23,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:23,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:23,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:23,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:34,065 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:34,065 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:34,065 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:34,066 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:34,066 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:34,066 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:34,066 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:34,066 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:34,066 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:34,066 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:34,067 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:34,067 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:34,067 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:34,067 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:44,216 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:44,217 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:44,217 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:44,217 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:44,217 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:44,217 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:44,217 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:44,217 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:44,217 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:44,218 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:44,218 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:44,218 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:44,218 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:44,218 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:11:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:11:45,945 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:12:45.945077+00:00 (in 59.999276 seconds)
2025-04-25 16:11:45,945 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:12:45 UTC)" (scheduled at 2025-04-25 06:11:45.945077+00:00)
2025-04-25 16:11:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:11:45,948 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:11:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:12:45 UTC)" executed successfully
2025-04-25 16:11:54,368 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:11:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:11:54,368 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:11:54,368 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:11:54,368 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:11:54,368 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:11:54,368 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:11:54,369 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:11:54,369 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:11:54,369 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:11:54,369 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:11:54,369 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:11:54,369 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:11:54,370 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:11:54,370 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:04,519 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:04,519 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:04,520 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:04,520 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:04,520 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:04,520 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:04,520 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:04,520 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:04,520 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:04,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:04,521 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:04,521 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:04,521 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:04,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:14,671 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:14,671 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:14,672 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:14,672 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:14,672 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:14,672 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:14,672 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:14,672 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:14,672 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:14,672 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:14,673 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:14,673 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:14,673 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:14,673 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:24,823 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:24,824 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:24,824 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:24,824 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:24,824 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:24,824 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:24,824 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:24,824 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:24,824 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:24,825 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:24,825 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:24,825 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:24,825 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:24,825 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:34,975 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:34,975 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:34,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:34,975 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:34,975 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:34,975 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:34,975 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:34,976 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:34,976 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:34,976 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:34,976 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:34,976 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:34,977 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:34,977 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:45,133 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:45,134 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:45,134 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:45,134 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:45,134 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:45,134 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:45,134 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:45,135 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:45,135 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:45,135 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:45,135 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:45,135 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:45,135 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:45,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:12:45,946 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:12:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:13:45.945077+00:00 (in 59.998431 seconds)
2025-04-25 16:12:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:13:45 UTC)" (scheduled at 2025-04-25 06:12:45.945077+00:00)
2025-04-25 16:12:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:12:45,949 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:12:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:13:45 UTC)" executed successfully
2025-04-25 16:12:55,285 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:12:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:12:55,285 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:12:55,285 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:12:55,285 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:12:55,285 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:12:55,286 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:12:55,286 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:12:55,286 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:12:55,286 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:12:55,286 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:12:55,287 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:12:55,287 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:12:55,287 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:12:55,287 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:05,443 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:05,444 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:05,444 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:05,444 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:05,444 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:05,444 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:05,444 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:05,445 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:05,445 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:05,445 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:05,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:05,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:05,446 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:05,446 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:15,596 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:15,596 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:15,596 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:15,596 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:15,596 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:15,597 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:15,597 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:15,597 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:15,597 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:15,597 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:15,597 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:15,597 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:15,598 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:15,598 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:25,750 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:25,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:25,750 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:25,751 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:25,751 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:25,751 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:25,751 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:25,751 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:25,752 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:25,752 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:25,753 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:25,753 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:25,753 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:25,754 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:35,903 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:35,903 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:35,903 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:35,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:35,903 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:35,903 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:35,904 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:35,904 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:35,904 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:35,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:35,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:35,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:35,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:35,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:13:45,945 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:14:45.945077+00:00 (in 59.999486 seconds)
2025-04-25 16:13:45,945 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:14:45 UTC)" (scheduled at 2025-04-25 06:13:45.945077+00:00)
2025-04-25 16:13:45,945 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:13:45,965 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:13:45,967 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:14:45 UTC)" executed successfully
2025-04-25 16:13:46,054 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:46,054 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:46,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:46,054 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:46,054 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:46,055 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:46,055 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:46,055 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:46,055 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:46,055 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:46,055 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:46,056 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:46,056 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:46,056 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:13:56,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:13:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:13:56,213 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:13:56,213 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:13:56,213 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:13:56,213 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:13:56,213 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:13:56,213 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:13:56,214 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:13:56,214 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:13:56,214 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:13:56,215 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:13:56,215 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:13:56,215 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:13:56,215 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:06,381 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:06,381 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:06,381 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:06,381 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:06,381 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:06,381 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:06,381 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:06,382 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:06,382 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:06,382 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:06,382 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:06,382 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:06,382 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:06,382 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:16,537 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:16,537 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:16,538 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:16,538 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:16,538 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:16,538 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:16,538 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:16,538 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:16,538 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:16,538 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:16,539 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:16,539 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:16,539 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:16,539 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:26,688 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:26,689 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:26,689 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:26,689 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:26,689 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:26,689 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:26,689 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:26,689 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:26,690 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:26,690 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:26,690 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:26,690 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:26,690 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:26,690 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:36,839 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:36,839 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:36,839 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:36,840 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:36,840 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:36,840 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:36,840 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:36,840 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:36,840 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:36,840 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:36,841 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:36,841 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:36,841 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:36,841 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:14:45,945 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:15:45.945077+00:00 (in 59.999115 seconds)
2025-04-25 16:14:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:15:45 UTC)" (scheduled at 2025-04-25 06:14:45.945077+00:00)
2025-04-25 16:14:45,946 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:14:45,949 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:14:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:15:45 UTC)" executed successfully
2025-04-25 16:14:47,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:47,020 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:47,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:47,020 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:47,020 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:47,020 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:47,020 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:47,021 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:47,021 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:47,021 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:47,021 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:47,021 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:47,021 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:47,021 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:14:57,171 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:14:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:14:57,171 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:14:57,171 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:14:57,171 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:14:57,171 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:14:57,171 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:14:57,172 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:14:57,172 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:14:57,172 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:14:57,172 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:14:57,172 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:14:57,172 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:14:57,173 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:14:57,173 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:07,334 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:07,334 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:07,334 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:07,334 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:07,334 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:07,334 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:07,334 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:07,334 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:07,334 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:07,335 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:07,335 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:07,335 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:07,335 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:07,335 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:17,484 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:17,484 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:17,484 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:17,484 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:17,485 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:17,485 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:17,485 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:17,485 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:17,485 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:17,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:17,486 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:17,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:17,486 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:17,486 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:27,639 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:27,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:27,639 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:27,639 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:27,639 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:27,639 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:27,640 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:27,640 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:27,640 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:27,640 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:27,640 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:27,640 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:27,641 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:27,641 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:37,794 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:37,794 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:37,794 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:37,794 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:37,794 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:37,794 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:37,794 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:37,794 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:37,795 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:37,795 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:37,795 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:37,795 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:37,795 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:37,795 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:45,946 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:15:45,946 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:16:45.945077+00:00 (in 59.998280 seconds)
2025-04-25 16:15:45,946 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:16:45 UTC)" (scheduled at 2025-04-25 06:15:45.945077+00:00)
2025-04-25 16:15:45,947 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:15:45,952 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:15:45,954 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:16:45 UTC)" executed successfully
2025-04-25 16:15:47,951 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:47,951 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:47,951 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:47,951 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:47,951 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:47,951 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:47,951 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:47,951 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:47,952 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:47,952 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:47,952 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:47,952 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:47,952 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:47,952 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:15:58,103 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:15:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:15:58,103 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:15:58,103 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:15:58,103 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:15:58,103 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:15:58,103 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:15:58,103 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:15:58,103 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:15:58,103 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:15:58,104 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:15:58,104 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:15:58,104 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:15:58,104 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:15:58,104 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:08,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:08,255 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:08,256 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:08,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:08,256 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:08,256 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:08,256 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:08,256 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:08,256 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:08,256 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:08,257 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:08,257 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:08,257 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:08,257 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:18,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:18,408 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:18,408 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:18,408 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:18,409 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:18,409 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:18,409 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:18,409 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:18,409 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:18,409 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:18,410 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:18,410 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:18,410 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:18,410 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:28,561 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:28,562 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:28,562 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:28,562 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:28,562 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:28,562 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:28,562 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:28,562 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:28,562 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:28,563 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:28,563 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:28,563 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:28,563 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:28,563 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:38,713 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:38,713 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:38,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:38,713 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:38,713 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:38,713 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:38,713 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:38,714 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:38,714 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:38,714 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:38,714 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:38,714 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:38,715 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:38,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:45,945 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:16:45,945 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:17:45.945077+00:00 (in 59.999337 seconds)
2025-04-25 16:16:45,945 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:17:45 UTC)" (scheduled at 2025-04-25 06:16:45.945077+00:00)
2025-04-25 16:16:45,945 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:16:45,948 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedColumn: column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 40, in send_notification
    users = connection.execute(query).mappings().fetchall()
            ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column "a2_arrival_notification_times" does not exist
LINE 1: SELECT telegram_id, employee_id, A2_arrival_notification_tim...
                                         ^
HINT:  Perhaps you meant to reference the column "user_settings.arrival_notification_times".

[SQL: SELECT telegram_id, employee_id, A2_arrival_notification_times, A2_departure_notification_times, A2_vacation_periods FROM user_settings]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-25 16:16:45,951 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:17:45 UTC)" executed successfully
2025-04-25 16:16:48,864 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:48,864 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:48,864 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:48,864 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:48,864 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:48,864 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:48,864 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:48,865 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:48,865 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:48,865 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:48,865 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:48,865 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:48,865 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:48,865 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:16:59,015 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:16:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:16:59,015 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:16:59,015 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:16:59,015 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:16:59,016 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:16:59,016 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:16:59,016 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:16:59,016 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:16:59,016 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:16:59,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:16:59,016 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:16:59,017 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:16:59,017 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:16:59,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:17:09,173 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:17:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:17:09,173 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:17:09,174 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:17:09,174 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:17:09,174 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:17:09,174 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:17:09,174 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:17:09,174 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:17:09,174 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:17:09,175 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:17:09,175 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:17:09,176 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:17:09,176 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:17:09,176 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:17:19,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:17:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:17:19,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:17:19,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:17:19,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:17:19,326 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:17:19,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:17:19,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:17:19,326 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:17:19,326 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:17:19,327 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:17:19,327 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:17:19,327 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:17:19,327 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:17:19,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:17:26,421 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 16:17:26,421 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 16:17:26,421 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 16:17:26,422 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 16:17:26,422 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 16:17:26,422 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:17:26,422 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 16:17:26,422 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489845, 'allowed_updates': ['message', 'callback_query']}`
2025-04-25 16:17:26,423 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:17:26,423 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:17:26,580 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797117C230>
2025-04-25 16:17:26,580 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000017971165640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:17:26,737 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001797122E990>
2025-04-25 16:17:26,738 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:17:26,738 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:17:26,738 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:17:26,738 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:17:26,738 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:17:26,892 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:17:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:17:26,893 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:17:26,893 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:17:26,893 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:17:26,893 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:17:26,893 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:17:26,893 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:17:26,893 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:17:26,893 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 16:17:26,893 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 16:17:26,894 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 16:17:26,894 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 16:17:26,894 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 16:17:26,894 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 16:17:26,904 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 16:17:26,905 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 16:17:26,905 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 16:17:26,905 - httpcore.connection - DEBUG - close.started
2025-04-25 16:17:26,905 - httpcore.connection - DEBUG - close.started
2025-04-25 16:17:26,905 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:17:26,905 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:17:26,905 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 16:17:26,905 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 16:17:26,906 - __main__ - INFO - Бот успешно запущен и работает
2025-04-25 16:25:17,411 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:25:17,411 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:25:17,413 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 16:25:17,413 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 16:25:17,413 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 16:25:17,413 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 16:25:17,414 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 16:25:17,417 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:25:17,575 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DE5400>
2025-04-25 16:25:17,575 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:25:17,733 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DD5A90>
2025-04-25 16:25:17,733 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:17,733 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:17,733 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:17,733 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:17,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:17,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:17,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 16:25:17,890 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:17,890 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:17,890 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:17,890 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:17,890 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 16:25:17,890 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 16:25:17,890 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 16:25:17,890 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 16:25:17,890 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 16:25:17,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 16:25:17,891 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:17,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:17,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:17,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:17,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:18,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:18,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 16:25:18,047 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:18,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:18,047 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:18,047 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:18,047 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 16:25:18,047 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 16:25:18,047 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 16:25:18,047 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 16:25:18,047 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 16:25:18,048 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-25 16:25:18,048 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 16:25:18,048 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 16:25:18,048 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 16:25:18,048 - telegram.ext.Application - INFO - Application started
2025-04-25 16:25:18,048 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:25:18,048 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:25:18,048 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:26:17.412569+00:00 (in 59.363661 seconds)
2025-04-25 16:25:18,200 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924E28550>
2025-04-25 16:25:18,200 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:25:18,354 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924D763F0>
2025-04-25 16:25:18,354 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:18,354 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:18,354 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:18,354 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:18,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:25,735 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:25,735 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:25,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:25,735 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:25,735 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:25,735 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:25,735 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489845, 'message': {'message_id': 726, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562325, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 16:25:25,736 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489845]
2025-04-25 16:25:25,736 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=726, supergroup_chat_created=False, text='/start'), update_id=829489845)
2025-04-25 16:25:25,737 - bot.handlers - DEBUG - Получена команда /start от пользователя 1635081908
2025-04-25 16:25:25,772 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:25,773 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:25:25,778 - httpcore.connection - DEBUG - close.started
2025-04-25 16:25:25,778 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:25:25,779 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:25:25,779 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489846}`
2025-04-25 16:25:25,779 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:25,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:25,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:25,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:25,780 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:25,928 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924D77E10>
2025-04-25 16:25:25,928 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:25:26,078 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924E54170>
2025-04-25 16:25:26,078 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:26,079 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:26,079 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:26,079 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:26,079 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:26,250 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3597'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:26,250 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:26,250 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:26,251 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:26,251 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:26,251 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:26,251 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 727, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562326, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:25:29,907 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3869'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:29,908 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:29,908 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:29,908 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:29,908 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:29,908 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:29,908 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489846, 'callback_query': {'id': '7022623324172509973', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 727, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562326, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 16:25:29,908 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489846]
2025-04-25 16:25:29,909 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324172509973', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=727, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489846)
2025-04-25 16:25:29,909 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:29,909 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324172509973'}`
2025-04-25 16:25:29,910 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:29,910 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489847}`
2025-04-25 16:25:29,910 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:29,910 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:29,910 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:29,910 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:29,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:29,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:29,911 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:29,911 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:29,911 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:30,095 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:30,096 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:30,096 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:30,096 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:30,096 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:30,096 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:30,096 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:30,096 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 16:25:30,099 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:30,117 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:30,117 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 16:25:30,119 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 16:25:30,121 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 16:25:30,122 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:30,137 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на False
2025-04-25 16:25:30,137 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 16:25:30,138 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:30,138 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:30,138 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:30,138 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:30,138 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:30,346 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:30,346 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:30,346 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:30,346 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:30,346 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:30,346 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:30,346 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 728, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562330, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 16:25:30,349 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:30,350 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:25:30,351 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:30,351 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:30,351 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:30,352 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:30,352 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:30,560 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3226'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:30,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:30,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:30,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:30,560 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:30,560 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:30,560 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 729, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562330, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:25:32,377 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3498'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:32,377 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:32,377 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,377 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:32,377 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:32,378 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:32,378 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489847, 'callback_query': {'id': '7022623323793967438', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 729, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562330, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 16:25:32,378 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489847]
2025-04-25 16:25:32,378 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323793967438', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=729, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489847)
2025-04-25 16:25:32,378 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:32,378 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323793967438'}`
2025-04-25 16:25:32,379 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,379 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489848}`
2025-04-25 16:25:32,379 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:32,379 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:32,380 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,536 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:32,536 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:32,536 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,536 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:32,536 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:32,537 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:32,537 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:32,537 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 16:25:32,538 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:32,539 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:32,539 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 16:25:32,541 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 16:25:32,541 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 16:25:32,542 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:32,587 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-25 16:25:32,587 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 16:25:32,587 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,588 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:32,588 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,588 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:32,588 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,757 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:32,758 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:32,758 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,758 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:32,758 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:32,758 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:32,758 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 730, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562332, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 16:25:32,760 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:32,761 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:25:32,762 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,762 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:32,762 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,762 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:32,762 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:32,932 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3207'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:32,932 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:32,932 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:32,932 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:32,932 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:32,932 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:32,932 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 731, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562332, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:25:34,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3476'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:34,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:34,204 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,205 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:34,205 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:34,205 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:34,205 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489848, 'callback_query': {'id': '7022623321768594619', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 731, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562332, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 16:25:34,205 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489848]
2025-04-25 16:25:34,205 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321768594619', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 32, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=731, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489848)
2025-04-25 16:25:34,206 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:34,206 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321768594619'}`
2025-04-25 16:25:34,206 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,206 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489849}`
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:34,207 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,381 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:34,381 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:34,381 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,381 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:34,381 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:34,381 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:34,382 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:34,382 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 16:25:34,383 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:34,384 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:34,384 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за сегодня'. Действие: получение данных о посещениях.
2025-04-25 16:25:34,423 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 16:25:34,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,423 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:34,423 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:34,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:34,615 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:34,615 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:34,616 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:34,616 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:34,616 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:34,616 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:34,616 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 732, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562334, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 16:25:36,674 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3478'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:36,674 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:36,674 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:36,675 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:36,675 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:36,675 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:36,675 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489849, 'callback_query': {'id': '7022623322996826537', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 731, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562332, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 16:25:36,675 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489849]
2025-04-25 16:25:36,676 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322996826537', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 32, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=731, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489849)
2025-04-25 16:25:36,676 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:36,676 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322996826537'}`
2025-04-25 16:25:36,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:36,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489850}`
2025-04-25 16:25:36,678 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:36,678 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:36,678 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:36,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:36,678 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:36,679 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:36,679 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:36,679 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:36,679 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:36,836 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:36,836 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:36,836 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:36,836 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:36,836 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:36,837 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:36,837 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:36,837 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 16:25:36,839 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:36,840 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:36,840 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за 10 дней'. Действие: получение данных о посещениях за 10 дней.
2025-04-25 16:25:36,845 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 16:25:36,846 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:36,846 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:36,846 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:36,846 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:36,846 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:37,032 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:37,032 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:37,033 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:37,033 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:37,033 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:37,033 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:37,033 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 733, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562336, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 16:25:38,558 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3472'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:38,559 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:38,559 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,559 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:38,559 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:38,559 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:38,559 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489850, 'callback_query': {'id': '7022623321993287129', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 731, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562332, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'set_vacation'}}]`
2025-04-25 16:25:38,559 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489850]
2025-04-25 16:25:38,560 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='set_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321993287129', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 32, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=731, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489850)
2025-04-25 16:25:38,560 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:38,560 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321993287129'}`
2025-04-25 16:25:38,561 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,561 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489851}`
2025-04-25 16:25:38,561 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:38,562 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,563 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:38,563 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,730 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:38,730 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:38,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,731 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:38,731 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:38,731 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:38,731 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:38,731 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=set_vacation
2025-04-25 16:25:38,732 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:38,733 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:38,733 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Установить период отпуска'. Действие: запрос даты начала отпуска.
2025-04-25 16:25:38,733 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:25:38,734 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:38,734 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,734 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:38,734 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:38,902 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'583'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:38,903 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:38,903 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:38,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:38,903 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:38,903 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:38,903 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 734, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562338, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:25:38,903 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_START
2025-04-25 16:25:46,059 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:46,059 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:46,059 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:46,059 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:46,059 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:46,059 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:46,059 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489851, 'message': {'message_id': 735, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562345, 'text': '29-04-2025'}}]`
2025-04-25 16:25:46,059 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489851]
2025-04-25 16:25:46,060 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=735, supergroup_chat_created=False, text='29-04-2025'), update_id=829489851)
2025-04-25 16:25:46,060 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 0
2025-04-25 16:25:46,060 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату начала отпуска: 29-04-2025
2025-04-25 16:25:46,060 - bot.handlers - INFO - Дата начала отпуска успешно распарсена: 2025-04-29
2025-04-25 16:25:46,060 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:25:46,061 - httpcore.connection - DEBUG - close.started
2025-04-25 16:25:46,061 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:25:46,061 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:25:46,061 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489852}`
2025-04-25 16:25:46,062 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:46,062 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:46,062 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:46,062 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:46,062 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:46,207 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924E02470>
2025-04-25 16:25:46,208 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:25:46,356 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924E02580>
2025-04-25 16:25:46,357 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:46,357 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:46,357 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:46,357 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:46,357 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:46,523 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'601'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:46,523 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:46,524 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:46,524 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:46,524 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:46,524 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:46,524 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 736, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562346, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:25:46,524 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_END
2025-04-25 16:25:52,624 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:52,625 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:52,625 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:52,625 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:52,625 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:52,625 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:52,625 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489852, 'message': {'message_id': 737, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562352, 'text': '30-05-2025'}}]`
2025-04-25 16:25:52,625 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489852]
2025-04-25 16:25:52,626 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 52, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=737, supergroup_chat_created=False, text='30-05-2025'), update_id=829489852)
2025-04-25 16:25:52,626 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 1
2025-04-25 16:25:52,626 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату окончания отпуска: 30-05-2025
2025-04-25 16:25:52,626 - bot.handlers - INFO - Дата окончания отпуска успешно распарсена: 2025-05-30
2025-04-25 16:25:52,628 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET vacation_start = :vacation_start, vacation_end = :vacation_end
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30'}
2025-04-25 16:25:52,629 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30'}
2025-04-25 16:25:52,629 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:52,644 - bot.handlers - INFO - Период отпуска для пользователя 1635081908 успешно установлен: 2025-04-29 - 2025-05-30
2025-04-25 16:25:52,646 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:52,646 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:25:52,647 - httpcore.connection - DEBUG - close.started
2025-04-25 16:25:52,647 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:25:52,647 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:25:52,648 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489853}`
2025-04-25 16:25:52,648 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:52,649 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:52,649 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:52,649 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:52,649 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:52,799 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DD3750>
2025-04-25 16:25:52,799 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:25:52,952 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DD3B50>
2025-04-25 16:25:52,952 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:52,952 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:52,952 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:52,952 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:52,952 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:53,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3363'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:53,272 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:53,272 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:53,272 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:53,272 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:53,272 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:53,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 738, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562353, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:25:56,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3631'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:56,052 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:25:56,052 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,052 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:56,052 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:56,052 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:56,052 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489853, 'callback_query': {'id': '7022623321540580475', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 738, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562353, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 16:25:56,052 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489853]
2025-04-25 16:25:56,053 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321540580475', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 53, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=738, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489853)
2025-04-25 16:25:56,053 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:25:56,053 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321540580475'}`
2025-04-25 16:25:56,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,054 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489854}`
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:56,055 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,055 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:56,055 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,217 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:56,217 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:25:56,217 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,217 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:56,217 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:56,217 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:56,218 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:25:56,218 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 16:25:56,236 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:25:56,237 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:25:56,237 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 16:25:56,254 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 16:25:56,255 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 16:25:56,255 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:25:56,256 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:25:56,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,256 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:25:56,256 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:25:56,470 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:25:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:25:56,470 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:25:56,470 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:25:56,470 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:25:56,471 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:25:56,471 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:25:56,471 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 739, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562356, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:26:00,675 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3631'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:00,675 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:00,676 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:00,676 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:00,676 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:00,676 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:00,676 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489854, 'callback_query': {'id': '7022623322697968017', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 738, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562353, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 16:26:00,676 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489854]
2025-04-25 16:26:00,676 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322697968017', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 53, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=738, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489854)
2025-04-25 16:26:00,677 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:26:00,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322697968017'}`
2025-04-25 16:26:00,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:00,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489855}`
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:00,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:00,878 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:00,878 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:26:00,878 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:00,878 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:00,878 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:00,878 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:00,879 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:26:00,879 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 16:26:00,881 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:00,881 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:26:00,882 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 16:26:00,883 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 16:26:00,884 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 16:26:00,884 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:26:00,884 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:00,885 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:00,885 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:00,885 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:00,885 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:01,125 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:01,125 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:01,125 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:01,125 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:01,125 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:01,125 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:01,125 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 740, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562361, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:26:02,811 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3645'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:02,811 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:02,812 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:02,812 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:02,812 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:02,812 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:02,812 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489855, 'callback_query': {'id': '7022623322812211036', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 738, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562353, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 16:26:02,812 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489855]
2025-04-25 16:26:02,812 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322812211036', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 25, 53, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=738, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-05-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489855)
2025-04-25 16:26:02,813 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:26:02,813 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322812211036'}`
2025-04-25 16:26:02,813 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:02,813 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489856}`
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:02,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:02,815 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:02,815 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:02,972 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:02,973 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:26:02,973 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:02,973 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:02,973 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:02,973 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:02,973 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:26:02,973 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 16:26:02,975 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:02,976 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:26:02,976 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Добавить время оповещений о приходе'. Действие: проверка лимита и запрос времени.
2025-04-25 16:26:02,976 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 16:26:02,976 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:02,977 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:02,977 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:02,977 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:02,977 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:03,151 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:03,151 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:03,151 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:03,151 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:03,151 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:03,151 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:03,151 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 741, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562363, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 16:26:03,152 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_ARRIVAL_NOTIFICATION
2025-04-25 16:26:08,000 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'331'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:08,001 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:08,001 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:08,001 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:08,001 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:08,001 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:08,001 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489856, 'message': {'message_id': 742, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562367, 'text': '8:00'}}]`
2025-04-25 16:26:08,001 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489856]
2025-04-25 16:26:08,001 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 26, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=742, supergroup_chat_created=False, text='8:00'), update_id=829489856)
2025-04-25 16:26:08,001 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 2
2025-04-25 16:26:08,001 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл время оповещения о приходе: 8:00
2025-04-25 16:26:08,002 - bot.handlers - INFO - Время оповещения о приходе успешно нормализовано: 08:00
2025-04-25 16:26:08,004 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:08,007 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET arrival_notification_times = :arrival_notification_times
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56", "08:00"]'}
2025-04-25 16:26:08,008 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56", "08:00"]'}
2025-04-25 16:26:08,009 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56", "08:00"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:08,013 - bot.handlers - INFO - Время оповещения о приходе 08:00 успешно добавлено для пользователя 1635081908
2025-04-25 16:26:08,014 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56", "08:00"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:08,015 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Время оповещения о приходе 08:00 добавлено! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56, 08:00\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:26:08,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:08,016 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489857}`
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:08,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:08,225 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3396'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:08,225 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:08,226 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:08,226 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:08,226 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:08,226 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:08,226 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 743, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562368, 'text': '⏰ Время оповещения о приходе 08:00 добавлено! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56, 08:00\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:26:11,194 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3681'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:11,195 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:11,195 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,195 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:11,195 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:11,195 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:11,195 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489857, 'callback_query': {'id': '7022623323711313253', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 743, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562368, 'text': '⏰ Время оповещения о приходе 08:00 добавлено! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56, 08:00\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 16:26:11,195 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489857]
2025-04-25 16:26:11,195 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323711313253', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 26, 8, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=743, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='⏰ Время оповещения о приходе 08:00 добавлено! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56, 08:00\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489857)
2025-04-25 16:26:11,196 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:26:11,196 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323711313253'}`
2025-04-25 16:26:11,196 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,196 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489858}`
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:11,197 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,198 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:11,198 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,443 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:11,444 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:26:11,444 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,444 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:11,444 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:11,444 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:11,444 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:26:11,444 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 16:26:11,446 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56", "08:00"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:11,447 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56', '08:00'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:26:11,447 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений о приходе'. Действие: отображение списка для удаления.
2025-04-25 16:26:11,447 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),), (InlineKeyboardButton(callback_data='remove_arrival_time_08:00', text='08:00 🗑️'),)))}`
2025-04-25 16:26:11,447 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,448 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:11,448 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,448 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:11,448 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:11,802 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'738'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:11,802 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:11,803 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:11,803 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:11,803 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:11,803 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:11,803 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 744, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562371, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}], [{'text': '08:00 🗑️', 'callback_data': 'remove_arrival_time_08:00'}]]}}`
2025-04-25 16:26:13,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1016'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:13,160 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:13,160 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,160 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:13,160 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:13,160 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:13,160 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489858, 'callback_query': {'id': '7022623323809509612', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 744, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562371, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}], [{'text': '08:00 🗑️', 'callback_data': 'remove_arrival_time_08:00'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_time_08:00'}}]`
2025-04-25 16:26:13,160 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489858]
2025-04-25 16:26:13,161 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_time_08:00', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323809509612', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 26, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=744, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),), (InlineKeyboardButton(callback_data='remove_arrival_time_08:00', text='08:00 🗑️'),))), supergroup_chat_created=False, text='⏰ Выбери время оповещения о приходе для удаления: 👇')), update_id=829489858)
2025-04-25 16:26:13,161 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:26:13,161 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323809509612'}`
2025-04-25 16:26:13,161 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,161 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:13,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:13,163 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,342 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:13,343 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:26:13,343 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,343 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:13,343 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:13,343 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:13,343 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:26:13,343 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_time_08:00
2025-04-25 16:26:13,345 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56", "08:00"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:13,346 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56', '08:00'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:26:13,346 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку удаления времени оповещения о приходе: remove_arrival_time_08:00. Действие: удаление времени.
2025-04-25 16:26:13,348 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET arrival_notification_times = :arrival_notification_times
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56"]'}
2025-04-25 16:26:13,349 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56"]'}
2025-04-25 16:26:13,350 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:13,370 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Время оповещения о приходе 08:00 удалено! ✅'}`
2025-04-25 16:26:13,370 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,371 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:13,371 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,371 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:13,371 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,548 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'475'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:13,549 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:13,549 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,549 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:13,549 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:13,549 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:13,549 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 745, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562373, 'text': '⏰ Время оповещения о приходе 08:00 удалено! ✅'}`
2025-04-25 16:26:13,642 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:26:13,644 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:26:13,644 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,645 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:13,645 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,645 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:13,645 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:13,820 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3168'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:13,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:26:13,820 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:13,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:13,820 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:13,821 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:13,821 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 746, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745562373, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:26:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:26:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:27:17.412569+00:00 (in 59.997894 seconds)
2025-04-25 16:26:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:27:17 UTC)" (scheduled at 2025-04-25 06:26:17.412569+00:00)
2025-04-25 16:26:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:26:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:27:17 UTC)" executed successfully
2025-04-25 16:26:23,316 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:23,316 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:23,317 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:23,317 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:23,317 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:23,317 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:23,317 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:26:23,317 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:26:23,317 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:26:23,318 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:23,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:23,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:23,319 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:23,319 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:33,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:33,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:33,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:33,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:33,475 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:33,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:33,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:26:33,475 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:26:33,475 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:26:33,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:33,476 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:33,476 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:33,476 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:33,476 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:43,628 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:43,629 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:43,629 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:43,629 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:43,629 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:43,629 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:43,629 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:26:43,629 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:26:43,629 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:26:43,630 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:43,630 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:43,630 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:43,630 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:43,630 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:26:53,782 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:26:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:26:53,783 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:26:53,783 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:26:53,783 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:26:53,783 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:26:53,783 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:26:53,783 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:26:53,783 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:26:53,783 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:26:53,784 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:26:53,784 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:26:53,784 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:26:53,784 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:26:53,784 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:03,938 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:03,938 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:03,938 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:03,938 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:03,938 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:03,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:03,938 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:03,938 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:03,938 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:03,939 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:03,939 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:03,939 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:03,939 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:03,939 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:14,098 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:14,098 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:14,098 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:14,098 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:14,098 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:14,099 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:14,099 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:14,099 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:14,099 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:14,099 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:14,099 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:14,099 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:14,100 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:14,100 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:17,415 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:27:17,416 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:28:17.412569+00:00 (in 59.996526 seconds)
2025-04-25 16:27:17,416 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:28:17 UTC)" (scheduled at 2025-04-25 06:27:17.412569+00:00)
2025-04-25 16:27:17,416 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:27:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:28:17 UTC)" executed successfully
2025-04-25 16:27:24,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:24,255 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:24,255 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:24,255 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:24,255 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:24,255 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:24,255 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:24,255 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:24,255 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:24,256 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:24,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:24,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:24,256 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:24,256 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:34,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:34,408 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:34,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:34,409 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:34,409 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:34,409 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:34,409 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:34,409 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:34,409 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:34,410 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:34,410 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:34,410 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:34,410 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:34,410 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:44,562 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:44,563 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:44,563 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:44,563 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:44,563 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:44,563 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:44,563 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:44,563 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:44,563 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:44,564 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:44,564 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:44,564 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:44,564 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:44,564 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:27:54,716 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:27:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:27:54,717 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:27:54,717 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:27:54,717 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:27:54,717 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:27:54,717 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:27:54,717 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:27:54,717 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:27:54,717 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:27:54,718 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:27:54,718 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:27:54,718 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:27:54,718 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:27:54,718 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:04,870 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:04,871 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:04,871 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:04,871 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:04,871 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:04,871 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:04,871 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:04,871 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:04,871 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:04,872 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:04,872 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:04,872 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:04,873 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:04,873 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:15,025 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:15,026 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:15,026 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:15,026 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:15,026 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:15,026 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:15,026 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:15,026 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:15,026 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:15,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:15,027 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:15,027 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:15,027 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:15,027 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:28:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:29:17.412569+00:00 (in 59.998069 seconds)
2025-04-25 16:28:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:29:17 UTC)" (scheduled at 2025-04-25 06:28:17.412569+00:00)
2025-04-25 16:28:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:28:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:29:17 UTC)" executed successfully
2025-04-25 16:28:25,179 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:25,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:25,180 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:25,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:25,180 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:25,180 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:25,180 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:25,180 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:25,180 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:25,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:25,181 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:25,181 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:25,181 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:25,181 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:35,336 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:35,336 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:35,336 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:35,336 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:35,336 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:35,337 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:35,337 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:35,337 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:35,337 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:35,337 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:35,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:35,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:35,338 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:35,338 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:45,490 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:45,490 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:45,490 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:45,490 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:45,491 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:45,491 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:45,491 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:45,491 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:45,491 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:45,491 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:45,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:45,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:45,492 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:45,492 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:28:55,646 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:28:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:28:55,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:28:55,647 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:28:55,647 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:28:55,647 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:28:55,647 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:28:55,647 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:28:55,647 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:28:55,647 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:28:55,648 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:28:55,648 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:28:55,648 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:28:55,648 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:28:55,648 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:05,800 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:05,801 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:05,801 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:05,801 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:05,801 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:05,801 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:05,801 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:05,801 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:05,801 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:05,802 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:05,802 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:05,802 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:05,802 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:05,802 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:15,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:15,960 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:15,960 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:15,960 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:15,961 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:15,961 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:15,961 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:15,961 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:15,961 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:15,961 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:15,962 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:15,962 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:15,962 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:15,962 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:29:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:30:17.412569+00:00 (in 59.997643 seconds)
2025-04-25 16:29:17,415 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:30:17 UTC)" (scheduled at 2025-04-25 06:29:17.412569+00:00)
2025-04-25 16:29:17,415 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:29:17,446 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:30:17 UTC)" executed successfully
2025-04-25 16:29:26,116 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:26,116 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:26,116 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:26,116 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:26,116 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:26,116 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:26,116 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:26,117 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:26,117 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:26,117 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:26,117 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:26,117 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:26,118 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:26,118 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:36,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:36,271 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:36,271 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:36,271 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:36,271 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:36,271 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:36,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:36,272 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:36,272 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:36,272 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:36,272 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:36,272 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:36,273 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:36,273 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:46,425 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:46,425 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:46,425 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:46,425 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:46,425 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:46,425 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:46,426 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:46,426 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:46,426 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:46,426 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:46,426 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:46,426 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:46,426 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:46,427 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:29:56,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:29:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:29:56,580 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:29:56,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:29:56,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:29:56,581 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:29:56,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:29:56,581 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:29:56,581 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:29:56,581 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:29:56,581 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:29:56,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:29:56,582 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:29:56,582 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:29:56,582 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:06,734 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:06,734 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:06,734 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:06,734 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:06,735 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:06,735 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:06,735 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:06,735 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:06,735 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:06,735 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:06,735 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:06,735 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:06,736 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:06,736 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:16,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:16,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:16,889 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:16,889 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:16,889 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:16,889 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:16,890 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:16,890 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:16,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:16,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:16,890 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:16,890 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:16,890 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:16,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:30:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:31:17.412569+00:00 (in 59.997927 seconds)
2025-04-25 16:30:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:31:17 UTC)" (scheduled at 2025-04-25 06:30:17.412569+00:00)
2025-04-25 16:30:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:30:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:31:17 UTC)" executed successfully
2025-04-25 16:30:27,043 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:27,043 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:27,043 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:27,044 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:27,044 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:27,044 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:27,044 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:27,044 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:27,044 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:27,044 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:27,045 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:27,045 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:27,045 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:27,045 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:37,198 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:37,199 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:37,199 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:37,199 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:37,199 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:37,199 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:37,199 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:37,199 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:37,199 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:37,200 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:37,200 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:37,200 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:37,200 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:37,200 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:47,352 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:47,352 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:47,352 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:47,352 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:47,353 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:47,353 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:47,353 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:47,353 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:47,353 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:47,353 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:47,353 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:47,354 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:47,354 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:47,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:30:57,507 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:30:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:30:57,508 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:30:57,508 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:30:57,508 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:30:57,508 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:30:57,508 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:30:57,508 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:30:57,508 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:30:57,508 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:30:57,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:30:57,509 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:30:57,509 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:30:57,509 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:30:57,509 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:07,661 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:07,661 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:07,662 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:07,662 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:07,662 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:07,662 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:07,662 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:07,662 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:07,662 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:07,663 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:07,663 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:07,663 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:07,663 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:07,663 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:17,415 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:31:17,415 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:32:17.412569+00:00 (in 59.996762 seconds)
2025-04-25 16:31:17,415 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:32:17 UTC)" (scheduled at 2025-04-25 06:31:17.412569+00:00)
2025-04-25 16:31:17,416 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:31:17,424 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:32:17 UTC)" executed successfully
2025-04-25 16:31:17,816 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:17,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:17,817 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:17,817 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:17,817 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:17,817 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:17,817 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:17,817 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:17,817 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:17,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:17,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:17,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:17,818 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:17,818 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:27,970 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:27,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:27,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:27,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:27,971 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:27,971 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:27,971 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:27,971 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:27,971 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:27,971 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:27,972 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:27,972 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:27,972 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:27,972 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:38,124 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:38,124 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:38,124 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:38,124 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:38,124 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:38,124 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:38,124 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:38,124 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:38,125 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:38,125 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:38,125 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:38,125 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:38,125 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:38,125 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:48,314 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:48,314 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:48,314 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:48,314 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:48,315 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:48,315 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:48,315 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:48,315 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:48,315 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:48,315 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:48,316 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:48,316 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:48,316 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:48,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:31:58,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:31:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:31:58,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:31:58,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:31:58,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:31:58,475 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:31:58,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:31:58,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:31:58,475 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:31:58,475 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:31:58,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:31:58,476 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:31:58,476 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:31:58,476 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:31:58,476 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:08,631 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:08,631 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:08,631 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:08,632 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:08,632 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:08,632 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:08,632 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:08,632 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:08,632 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:08,632 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:08,633 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:08,633 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:08,633 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:08,633 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:32:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:33:17.412569+00:00 (in 59.998519 seconds)
2025-04-25 16:32:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:33:17 UTC)" (scheduled at 2025-04-25 06:32:17.412569+00:00)
2025-04-25 16:32:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:32:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:33:17 UTC)" executed successfully
2025-04-25 16:32:18,785 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:18,786 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:18,786 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:18,786 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:18,786 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:18,786 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:18,786 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:18,786 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:18,786 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:18,787 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:18,787 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:18,787 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:18,787 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:18,787 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:28,940 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:28,940 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:28,940 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:28,940 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:28,940 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:28,941 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:28,941 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:28,941 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:28,941 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:28,941 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:28,942 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:28,942 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:28,942 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:28,942 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:39,095 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:39,095 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:39,095 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:39,095 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:39,095 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:39,095 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:39,096 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:39,096 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:39,096 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:39,096 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:39,096 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:39,096 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:39,096 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:39,097 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:49,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:49,249 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:49,249 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:49,249 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:49,249 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:49,249 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:49,249 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:49,249 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:49,250 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:49,250 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:49,250 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:49,250 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:49,250 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:49,250 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:32:59,413 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:32:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:32:59,413 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:32:59,413 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:32:59,413 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:32:59,414 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:32:59,414 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:32:59,414 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:32:59,414 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:32:59,414 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:32:59,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:32:59,414 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:32:59,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:32:59,415 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:32:59,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:33:09,568 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:33:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:33:09,568 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:33:09,568 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:33:09,568 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:33:09,568 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:33:09,568 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:33:09,568 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:33:09,569 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:33:09,569 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:33:09,569 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:33:09,570 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:33:09,570 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:33:09,570 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:33:09,570 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:33:17,415 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:33:17,415 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:34:17.412569+00:00 (in 59.997331 seconds)
2025-04-25 16:33:17,415 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:34:17 UTC)" (scheduled at 2025-04-25 06:33:17.412569+00:00)
2025-04-25 16:33:17,415 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:33:17,423 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:34:17 UTC)" executed successfully
2025-04-25 16:33:19,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:33:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:33:19,725 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:33:19,725 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:33:19,725 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:33:19,725 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:33:19,725 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:33:19,725 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:33:19,725 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:33:19,725 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:33:19,726 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:33:19,726 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:33:19,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:33:19,726 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:33:19,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:33:29,885 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:33:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:33:29,885 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:33:29,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:33:29,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:33:29,885 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:33:29,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:33:29,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:33:29,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:33:29,886 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:33:29,886 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:33:29,886 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:33:29,886 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:33:29,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:33:29,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:33:40,039 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:33:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:33:40,039 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:33:40,039 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:33:40,040 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:33:40,040 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:33:40,040 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:33:40,040 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:33:40,040 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:33:40,040 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:33:40,040 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:33:40,041 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:33:40,041 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:33:40,041 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:33:40,041 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:33:50,194 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:33:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:33:50,194 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:33:50,194 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:33:50,195 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:33:50,195 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:33:50,195 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:33:50,195 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:33:50,195 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:33:50,195 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:33:50,195 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:33:50,196 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:33:50,196 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:33:50,196 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:33:50,196 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:00,350 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:00,351 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:00,351 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:00,351 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:00,351 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:00,351 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:00,351 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:00,351 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:00,351 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:00,352 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:00,352 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:00,352 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:00,352 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:00,352 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:10,504 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:10,504 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:10,505 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:10,505 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:10,505 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:10,505 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:10,505 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:10,505 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:10,505 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:10,505 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:10,506 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:10,506 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:10,506 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:10,506 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:34:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:35:17.412569+00:00 (in 59.998404 seconds)
2025-04-25 16:34:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:35:17 UTC)" (scheduled at 2025-04-25 06:34:17.412569+00:00)
2025-04-25 16:34:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:34:17,425 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:35:17 UTC)" executed successfully
2025-04-25 16:34:20,665 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:20,665 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:20,666 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:20,666 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:20,666 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:20,666 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:20,666 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:20,666 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:20,666 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:20,666 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:20,667 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:20,667 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:20,667 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:20,667 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:30,820 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:30,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:30,820 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:30,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:30,820 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:30,820 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:30,820 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:30,820 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:30,821 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:30,821 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:30,821 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:30,821 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:30,821 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:30,821 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:40,976 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:40,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:40,977 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:40,977 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:40,977 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:40,977 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:40,977 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:40,977 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:40,977 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:40,977 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:40,978 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:40,978 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:40,978 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:40,978 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:34:51,130 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:34:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:34:51,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:34:51,130 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:34:51,130 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:34:51,130 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:34:51,130 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:34:51,131 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:34:51,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:34:51,131 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:34:51,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:34:51,131 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:34:51,131 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:34:51,131 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:34:51,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:01,286 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:01,286 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:01,286 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:01,286 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:01,286 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:01,286 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:01,286 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:01,286 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:01,287 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:01,287 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:01,287 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:01,287 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:01,287 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:01,287 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:11,440 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:11,440 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:11,440 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:11,440 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:11,440 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:11,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:11,441 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:11,441 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:11,441 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:11,441 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:11,441 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:11,441 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:11,442 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:11,442 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:35:17,413 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:36:17.412569+00:00 (in 59.998778 seconds)
2025-04-25 16:35:17,413 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:36:17 UTC)" (scheduled at 2025-04-25 06:35:17.412569+00:00)
2025-04-25 16:35:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:35:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:36:17 UTC)" executed successfully
2025-04-25 16:35:21,595 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:21,595 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:21,595 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:21,595 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:21,595 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:21,595 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:21,595 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:21,596 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:21,596 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:21,596 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:21,596 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:21,596 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:21,596 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:21,596 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:31,749 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:31,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:31,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:31,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:31,749 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:31,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:31,749 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:31,750 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:31,750 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:31,750 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:31,750 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:31,750 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:31,750 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:31,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:41,902 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:41,903 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:41,903 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:41,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:41,903 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:41,903 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:41,903 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:41,903 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:41,903 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:41,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:41,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:41,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:41,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:41,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:35:52,057 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:35:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:35:52,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:35:52,057 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:35:52,057 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:35:52,057 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:35:52,057 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:35:52,057 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:35:52,057 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:35:52,058 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:35:52,058 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:35:52,058 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:35:52,058 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:35:52,058 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:35:52,058 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:02,214 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:02,215 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:02,215 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:02,215 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:02,215 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:02,215 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:02,215 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:02,215 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:02,215 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:02,216 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:02,216 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:02,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:02,216 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:02,216 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:12,368 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:12,368 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:12,368 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:12,368 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:12,368 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:12,368 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:12,368 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:12,368 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:12,368 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:12,369 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:12,369 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:12,369 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:12,369 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:12,369 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:36:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:37:17.412569+00:00 (in 59.998099 seconds)
2025-04-25 16:36:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:37:17 UTC)" (scheduled at 2025-04-25 06:36:17.412569+00:00)
2025-04-25 16:36:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:36:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:37:17 UTC)" executed successfully
2025-04-25 16:36:22,521 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:22,521 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:22,521 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:22,522 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:22,522 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:22,522 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:22,522 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:22,522 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:22,522 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:22,522 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:22,523 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:22,523 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:22,523 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:22,523 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:32,676 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:32,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:32,676 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:32,676 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:32,677 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:32,677 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:32,677 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:32,677 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:32,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:32,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:32,677 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:32,678 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:32,678 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:32,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:42,829 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:42,829 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:42,829 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:42,830 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:42,830 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:42,830 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:42,830 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:42,830 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:42,830 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:42,830 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:42,831 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:42,831 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:42,831 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:42,831 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:36:52,983 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:36:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:36:52,983 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:36:52,983 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:36:52,983 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:36:52,983 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:36:52,983 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:36:52,983 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:36:52,983 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:36:52,984 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:36:52,984 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:36:52,984 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:36:52,984 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:36:52,984 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:36:52,985 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:03,137 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:03,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:03,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:03,137 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:03,137 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:03,138 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:03,138 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:03,138 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:03,138 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:03,138 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:03,138 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:03,138 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:03,139 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:03,139 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:13,290 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:13,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:13,291 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:13,291 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:13,291 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:13,291 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:13,291 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:13,291 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:13,291 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:13,292 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:13,292 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:13,292 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:13,292 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:13,292 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:37:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:38:17.412569+00:00 (in 59.998505 seconds)
2025-04-25 16:37:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:38:17 UTC)" (scheduled at 2025-04-25 06:37:17.412569+00:00)
2025-04-25 16:37:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:37:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:38:17 UTC)" executed successfully
2025-04-25 16:37:23,444 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:23,444 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:23,444 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:23,444 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:23,444 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:23,444 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:23,444 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:23,444 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:23,445 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:23,445 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:23,445 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:23,445 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:23,445 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:23,445 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:33,597 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:33,597 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:33,598 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:33,598 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:33,598 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:33,598 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:33,598 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:33,598 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:33,598 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:33,598 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:33,599 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:33,599 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:33,599 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:33,599 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:43,753 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:43,754 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:43,754 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:43,754 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:43,754 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:43,754 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:43,754 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:43,754 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:43,755 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:43,755 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:43,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:43,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:43,755 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:43,755 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:37:53,908 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:37:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:37:53,908 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:37:53,908 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:37:53,908 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:37:53,908 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:37:53,908 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:37:53,909 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:37:53,909 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:37:53,909 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:37:53,909 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:37:53,909 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:37:53,909 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:37:53,910 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:37:53,910 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:04,061 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:04,061 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:04,061 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:04,062 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:04,062 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:04,062 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:04,062 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:04,062 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:04,062 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:04,062 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:04,062 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:04,063 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:04,063 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:04,063 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:14,215 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:14,215 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:14,215 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:14,215 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:14,215 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:14,215 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:14,216 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:14,216 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:14,216 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:14,216 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:14,216 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:14,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:14,217 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:14,217 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:38:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:39:17.412569+00:00 (in 59.998004 seconds)
2025-04-25 16:38:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:39:17 UTC)" (scheduled at 2025-04-25 06:38:17.412569+00:00)
2025-04-25 16:38:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:38:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:39:17 UTC)" executed successfully
2025-04-25 16:38:24,370 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:24,370 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:24,370 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:24,370 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:24,370 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:24,370 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:24,370 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:24,370 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:24,371 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:24,371 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:24,371 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:24,371 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:24,371 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:24,371 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:34,523 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:34,524 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:34,524 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:34,524 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:34,524 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:34,524 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:34,524 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:34,524 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:34,524 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:34,525 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:34,525 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:34,525 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:34,525 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:34,525 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:44,680 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:44,680 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:44,680 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:44,680 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:44,681 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:44,681 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:44,681 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:44,681 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:44,681 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:44,681 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:44,681 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:44,682 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:44,682 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:44,682 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:38:54,834 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:38:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:38:54,834 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:38:54,834 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:38:54,835 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:38:54,835 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:38:54,835 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:38:54,835 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:38:54,835 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:38:54,835 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:38:54,835 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:38:54,836 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:38:54,836 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:38:54,836 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:38:54,836 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:04,988 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:04,989 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:04,989 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:04,989 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:04,989 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:04,989 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:04,989 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:04,989 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:04,989 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:04,990 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:04,990 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:04,990 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:04,990 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:04,990 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:15,157 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:15,157 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:15,157 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:15,157 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:15,157 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:15,157 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:15,157 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:15,157 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:15,157 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:15,158 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:15,158 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:15,158 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:15,158 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:15,158 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:39:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:40:17.412569+00:00 (in 59.998375 seconds)
2025-04-25 16:39:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:40:17 UTC)" (scheduled at 2025-04-25 06:39:17.412569+00:00)
2025-04-25 16:39:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:39:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:40:17 UTC)" executed successfully
2025-04-25 16:39:25,311 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:25,311 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:25,311 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:25,311 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:25,311 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:25,311 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:25,312 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:25,312 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:25,312 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:25,312 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:25,312 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:25,312 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:25,312 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:25,313 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:35,465 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:35,466 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:35,466 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:35,466 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:35,466 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:35,466 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:35,467 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:35,467 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:35,467 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:35,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:35,467 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:35,467 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:35,467 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:35,467 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:45,620 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:45,620 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:45,620 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:45,620 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:45,620 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:45,621 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:45,621 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:45,621 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:45,621 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:45,621 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:45,621 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:45,621 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:45,622 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:45,622 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:39:55,774 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:39:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:39:55,774 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:39:55,774 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:39:55,774 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:39:55,774 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:39:55,774 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:39:55,774 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:39:55,774 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:39:55,775 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:39:55,775 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:39:55,775 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:39:55,775 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:39:55,775 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:39:55,775 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:05,928 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:05,928 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:05,929 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:05,929 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:05,929 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:05,929 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:05,929 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:05,929 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:05,929 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:05,929 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:05,930 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:05,930 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:05,930 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:05,930 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:16,081 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:16,082 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:16,082 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:16,082 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:16,082 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:16,082 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:16,082 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:16,082 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:16,082 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:16,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:16,083 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:16,083 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:16,083 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:16,083 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:40:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:41:17.412569+00:00 (in 59.998553 seconds)
2025-04-25 16:40:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:41:17 UTC)" (scheduled at 2025-04-25 06:40:17.412569+00:00)
2025-04-25 16:40:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:40:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:41:17 UTC)" executed successfully
2025-04-25 16:40:26,234 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:26,235 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:26,235 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:26,235 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:26,235 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:26,235 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:26,235 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:26,235 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:26,235 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:26,236 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:26,236 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:26,236 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:26,236 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:26,236 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:36,388 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:36,388 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:36,388 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:36,389 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:36,389 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:36,389 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:36,389 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:36,389 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:36,389 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:36,389 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:36,390 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:36,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:36,390 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:36,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:46,545 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:46,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:46,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:46,546 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:46,546 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:46,546 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:46,546 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:46,546 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:46,546 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:46,546 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:40:46,704 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DB9130>
2025-04-25 16:40:46,704 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:40:46,862 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DBBC50>
2025-04-25 16:40:46,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:46,862 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:46,862 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:46,862 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:46,862 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:40:57,018 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:40:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:40:57,019 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:40:57,019 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:40:57,019 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:40:57,019 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:40:57,019 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:40:57,019 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:40:57,019 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:40:57,019 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:40:57,020 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:40:57,020 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:40:57,020 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:40:57,020 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:40:57,020 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:07,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:07,177 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:07,177 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:07,177 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:07,178 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:07,178 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:07,178 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:07,178 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:07,178 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:07,178 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:07,178 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:07,178 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:07,179 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:07,179 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:17,335 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:17,336 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:17,336 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:17,336 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:17,336 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:17,336 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:17,336 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:17,336 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:17,337 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:17,337 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:17,337 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:17,337 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:17,337 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:17,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:41:17,413 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:42:17.412569+00:00 (in 59.999061 seconds)
2025-04-25 16:41:17,413 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:42:17 UTC)" (scheduled at 2025-04-25 06:41:17.412569+00:00)
2025-04-25 16:41:17,413 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:41:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:42:17 UTC)" executed successfully
2025-04-25 16:41:27,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:27,494 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:27,494 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:27,494 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:27,494 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:27,494 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:27,495 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:27,495 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:27,495 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:27,495 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:27,495 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:27,495 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:27,496 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:27,496 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:37,653 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:37,653 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:37,653 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:37,653 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:37,653 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:37,653 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:37,653 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:37,653 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:37,654 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:37,654 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:37,654 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:37,654 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:37,654 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:37,654 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:47,811 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:47,812 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:47,812 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:47,812 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:47,812 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:47,812 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:47,813 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:47,813 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:47,813 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:47,813 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:47,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:47,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:47,814 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:47,814 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:41:57,972 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:41:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:41:57,972 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:41:57,972 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:41:57,972 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:41:57,972 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:41:57,972 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:41:57,972 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:41:57,972 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:41:57,973 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:41:57,973 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:41:57,973 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:41:57,973 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:41:57,973 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:41:57,973 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:08,130 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:08,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:08,130 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:08,131 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:08,131 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:08,131 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:08,131 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:08,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:08,131 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:08,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:08,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:08,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:08,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:08,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:42:17,415 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:43:17.412569+00:00 (in 59.997558 seconds)
2025-04-25 16:42:17,415 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:43:17 UTC)" (scheduled at 2025-04-25 06:42:17.412569+00:00)
2025-04-25 16:42:17,415 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:42:17,424 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:43:17 UTC)" executed successfully
2025-04-25 16:42:18,289 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:18,289 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:18,289 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:18,289 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:18,290 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:18,290 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:18,290 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:18,290 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:18,290 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:18,290 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:18,290 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:18,291 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:18,291 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:18,291 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:28,447 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:28,448 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:28,448 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:28,448 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:28,448 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:28,448 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:28,448 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:28,448 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:28,448 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:28,449 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:28,449 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:28,449 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:28,449 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:28,449 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:38,612 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:38,612 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:38,612 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:38,612 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:38,612 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:38,612 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:38,612 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:38,612 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:38,612 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:38,613 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:38,613 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:38,613 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:38,613 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:38,613 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:48,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:48,770 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:48,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:48,771 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:48,771 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:48,771 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:48,771 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:48,771 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:48,771 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:48,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:48,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:48,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:48,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:48,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:42:58,930 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:42:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:42:58,930 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:42:58,930 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:42:58,930 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:42:58,930 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:42:58,931 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:42:58,931 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:42:58,931 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:42:58,931 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:42:58,931 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:42:58,931 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:42:58,931 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:42:58,932 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:42:58,932 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:09,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:09,089 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:09,089 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:09,089 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:09,089 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:09,089 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:09,089 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:09,090 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:09,090 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:09,090 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:09,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:09,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:09,090 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:09,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:17,413 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:43:17,413 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:44:17.412569+00:00 (in 59.999087 seconds)
2025-04-25 16:43:17,413 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:44:17 UTC)" (scheduled at 2025-04-25 06:43:17.412569+00:00)
2025-04-25 16:43:17,413 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:43:17,420 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:44:17 UTC)" executed successfully
2025-04-25 16:43:19,256 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:19,256 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:19,256 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:19,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:19,256 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:19,257 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:19,257 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:19,257 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:19,257 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:19,257 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:19,257 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:19,257 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:19,258 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:19,258 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:29,414 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:29,415 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:29,415 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:29,415 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:29,415 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:29,415 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:29,415 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:29,415 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:29,415 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:29,416 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:29,416 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:29,416 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:29,416 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:29,416 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:39,573 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:39,573 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:39,573 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:39,573 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:39,573 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:39,574 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:39,574 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:39,574 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:39,574 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:39,574 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:39,574 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:39,574 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:39,575 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:39,575 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:49,731 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:49,731 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:49,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:49,732 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:49,732 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:49,732 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:49,732 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:49,732 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:49,732 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:49,732 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:49,733 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:49,733 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:49,733 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:49,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:43:59,891 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:43:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:43:59,892 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:43:59,892 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:43:59,892 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:43:59,892 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:43:59,892 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:43:59,892 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:43:59,892 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:43:59,892 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:43:59,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:43:59,893 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:43:59,893 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:43:59,893 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:43:59,893 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:44:10,050 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:44:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:44:10,051 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:44:10,051 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:44:10,051 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:44:10,051 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:44:10,051 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:44:10,051 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:44:10,051 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:44:10,051 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:44:10,052 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:44:10,052 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:44:10,052 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:44:10,052 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:44:10,052 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:44:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:44:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:45:17.412569+00:00 (in 59.998004 seconds)
2025-04-25 16:44:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:45:17 UTC)" (scheduled at 2025-04-25 06:44:17.412569+00:00)
2025-04-25 16:44:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:44:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:45:17 UTC)" executed successfully
2025-04-25 16:44:20,209 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:44:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:44:20,210 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:44:20,210 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:44:20,210 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:44:20,210 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:44:20,210 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:44:20,210 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:44:20,210 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:44:20,210 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:44:20,211 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:44:20,211 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:44:20,211 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:44:20,211 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:44:20,211 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:44:30,369 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:44:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:44:30,369 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:44:30,369 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:44:30,369 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:44:30,369 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:44:30,369 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:44:30,369 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:44:30,369 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:44:30,370 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:44:30,370 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:44:30,370 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:44:30,370 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:44:30,370 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:44:30,370 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:44:40,528 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:44:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:44:40,528 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:44:40,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:44:40,528 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:44:40,528 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:44:40,528 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:44:40,528 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:44:40,528 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:44:40,529 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:44:40,529 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:44:40,529 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:44:40,529 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:44:40,529 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:44:40,529 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:44:50,686 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:44:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:44:50,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:44:50,686 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:44:50,686 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:44:50,686 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:44:50,686 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:44:50,687 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:44:50,687 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:44:50,687 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:44:50,687 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:44:50,687 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:44:50,687 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:44:50,687 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:44:50,688 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:00,852 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:00,852 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:00,852 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:00,852 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:00,852 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:00,853 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:00,853 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:00,853 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:00,853 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:00,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:00,853 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:00,853 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:00,854 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:00,854 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:11,013 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:11,013 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:11,013 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:11,013 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:11,013 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:11,013 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:11,013 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:11,013 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:11,013 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:11,014 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:11,014 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:11,014 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:11,014 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:11,014 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:45:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:46:17.412569+00:00 (in 59.998231 seconds)
2025-04-25 16:45:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:46:17 UTC)" (scheduled at 2025-04-25 06:45:17.412569+00:00)
2025-04-25 16:45:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:45:17,421 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:46:17 UTC)" executed successfully
2025-04-25 16:45:21,173 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:21,173 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:21,173 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:21,173 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:21,174 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:21,174 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:21,174 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:21,174 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:21,174 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:21,175 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:21,175 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:21,175 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:21,175 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:21,175 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:31,332 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:31,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:31,332 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:31,333 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:31,333 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:31,333 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:31,333 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:31,333 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:31,333 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:31,333 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:31,334 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:31,334 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:31,334 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:31,334 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:41,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:41,499 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:41,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:41,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:41,499 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:41,499 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:41,499 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:41,500 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:41,500 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:41,500 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:41,500 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:41,500 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:41,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:41,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:45:51,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:45:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:45:51,658 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:45:51,658 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:45:51,658 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:45:51,658 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:45:51,658 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:45:51,658 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:45:51,658 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:45:51,659 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:45:51,659 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:45:51,659 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:45:51,659 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:45:51,659 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:45:51,659 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:01,817 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:01,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:01,817 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:01,817 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:01,817 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:01,817 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:01,818 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:01,818 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:01,818 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:01,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:01,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:01,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:01,818 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:01,819 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:11,977 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:11,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:11,977 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:11,977 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:11,977 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:11,977 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:11,977 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:11,977 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:11,978 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:11,978 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:11,978 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:11,978 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:11,978 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:11,978 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:17,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:46:17,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:47:17.412569+00:00 (in 59.998370 seconds)
2025-04-25 16:46:17,414 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:47:17 UTC)" (scheduled at 2025-04-25 06:46:17.412569+00:00)
2025-04-25 16:46:17,414 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:46:17,422 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:47:17 UTC)" executed successfully
2025-04-25 16:46:22,136 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:22,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:22,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:22,137 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:22,137 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:22,137 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:22,137 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:22,137 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:22,137 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:22,138 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:22,138 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:22,138 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:22,138 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:22,138 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:32,296 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:32,296 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:32,296 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:32,296 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:32,296 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:32,296 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:32,296 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:32,296 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:32,297 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:32,297 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:32,297 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:32,297 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:32,297 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:32,297 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:42,454 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:42,455 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:42,455 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:42,455 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:42,455 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:42,455 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:42,455 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:42,455 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:42,455 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:42,456 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:42,456 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:42,456 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:42,456 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:42,456 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:46:52,646 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:46:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:46:52,646 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:46:52,646 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:46:52,646 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:46:52,647 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:46:52,647 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:46:52,647 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:46:52,647 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:46:52,647 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:46:52,648 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:46:52,648 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:46:52,648 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:46:52,648 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:46:52,649 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:02,805 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:02,806 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:02,806 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:02,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:02,806 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:02,806 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:02,807 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:02,807 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:02,807 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:02,807 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:02,808 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:02,808 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:02,808 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:02,808 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:12,965 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:12,965 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:12,965 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:12,965 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:12,966 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:12,966 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:12,966 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:12,966 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:12,966 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:12,967 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:12,967 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:12,967 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:12,967 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:12,967 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:17,415 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:47:17,415 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:48:17.412569+00:00 (in 59.997063 seconds)
2025-04-25 16:47:17,415 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:48:17 UTC)" (scheduled at 2025-04-25 06:47:17.412569+00:00)
2025-04-25 16:47:17,415 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:47:17,424 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:48:17 UTC)" executed successfully
2025-04-25 16:47:23,123 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:23,124 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:23,124 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:23,124 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:23,124 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:23,124 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:23,124 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:23,124 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:23,124 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:23,125 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:23,125 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:23,125 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:23,125 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:23,125 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:33,281 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:33,282 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:33,282 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:33,282 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:33,282 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:33,282 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:33,282 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:33,282 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:33,282 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:33,283 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:33,283 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:33,283 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:33,283 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:33,283 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:43,440 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:43,440 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:43,440 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:43,441 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:43,441 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:43,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:43,441 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:43,441 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:43,441 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:43,442 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:43,442 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:43,442 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:43,442 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:43,442 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:47:53,599 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:47:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:47:53,599 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:47:53,599 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:47:53,599 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:47:53,600 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:47:53,600 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:47:53,600 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:47:53,601 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:47:53,601 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:47:53,601 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:47:53,602 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:47:53,602 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:47:53,602 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:47:53,602 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:48:03,760 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:48:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:48:03,760 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:48:03,760 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:48:03,760 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:48:03,760 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:48:03,760 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:48:03,760 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:48:03,760 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:48:03,761 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489859}`
2025-04-25 16:48:03,761 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:48:03,761 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:48:03,761 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:48:03,761 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:48:03,761 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:48:12,387 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 16:48:12,387 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 16:48:12,387 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 16:48:12,388 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 16:48:12,388 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 16:48:12,388 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:48:12,388 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 16:48:12,388 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489859}`
2025-04-25 16:48:12,389 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:48:12,389 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:48:12,549 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924E33230>
2025-04-25 16:48:12,549 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027924DA52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:48:12,704 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027924DD82F0>
2025-04-25 16:48:12,704 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:48:12,705 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:48:12,705 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:48:12,705 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:48:12,705 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:48:12,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:48:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:48:12,855 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:48:12,855 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:48:12,855 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:48:12,855 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:48:12,855 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:48:12,856 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:48:12,856 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:48:12,856 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 16:48:12,856 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 16:48:12,856 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 16:48:12,856 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 16:48:12,856 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 16:48:12,856 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 16:48:12,867 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 16:48:12,867 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 16:48:12,867 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 16:48:12,867 - httpcore.connection - DEBUG - close.started
2025-04-25 16:48:12,867 - httpcore.connection - DEBUG - close.started
2025-04-25 16:48:12,867 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:48:12,867 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:48:12,867 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 16:48:12,867 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 16:53:54,943 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:53:54,943 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:53:54,945 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 16:53:54,945 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 16:53:54,945 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 16:53:54,946 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 16:53:54,946 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 16:53:54,951 - httpcore.connection - DEBUG - connect_tcp.started host='mdproxy.md.int' port=8080 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:53:54,953 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000156C4BB5940>
2025-04-25 16:53:54,953 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'CONNECT']>
2025-04-25 16:53:54,953 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:53:54,953 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'CONNECT']>
2025-04-25 16:53:54,953 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:53:54,953 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'CONNECT']>
2025-04-25 16:53:54,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 407, b'Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )', [(b'Via', b'1.1 MDPROXY'), (b'Proxy-Authenticate', b'Negotiate'), (b'Proxy-Authenticate', b'Kerberos'), (b'Proxy-Authenticate', b'NTLM'), (b'Proxy-Authenticate', b'Digest qop="auth",algorithm=MD5-sess,nonce="+Upgraded+v19d8d8fc4a50b8d20c671d16573ecbac67b9592cfaeb5db01d7a7e0c6ef1527424eac6c9eb50058567e5da0c6d54c3a8bc85ed97559e14dc5",charset=utf-8,realm="md.int"'), (b'Proxy-Authenticate', b'Basic realm="MDPROXY.md.int"'), (b'Connection', b'close'), (b'Proxy-Connection', b'close'), (b'Pragma', b'no-cache'), (b'Cache-Control', b'no-cache'), (b'Content-Type', b'text/html'), (b'Content-Length', b'708')])
2025-04-25 16:53:54,956 - httpcore.connection - DEBUG - close.started
2025-04-25 16:53:54,956 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:53:54,956 - telegram.ext - ERROR - Network Retry Loop (Bootstrap Initialize Application): Failed run number 0 of 0. Aborting.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 297, in handle_async_request
    raise ProxyError(msg)
httpcore.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 277, in do_request
    res = await self._client.request(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\shish.me\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_utils\networkloop.py", line 115, in network_retry_loop
    if not await do_action():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_utils\networkloop.py", line 93, in do_action
    return await action_cb()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_application.py", line 486, in initialize
    await self.bot.initialize()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 308, in initialize
    await super().initialize()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 835, in initialize
    await self.get_me()
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 1969, in get_me
    return await super().get_me(
           ^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 967, in get_me
    result = await self._post(
             ^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 691, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_extbot.py", line 362, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\_bot.py", line 720, in _do_post
    result = await request.post(
             ^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 197, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
                    ^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\request\_httpxrequest.py", line 301, in do_request
    raise NetworkError(f"httpx.{err.__class__.__name__}: {err}") from err
telegram.error.NetworkError: httpx.ProxyError: 407 Proxy Authentication Required ( Forefront TMG requires authorization to fulfill the request. Access to the Web Proxy filter is denied.  )
2025-04-25 16:53:55,066 - telegram.ext.Application - DEBUG - This Application is already shut down. Returning.
2025-04-25 16:54:05,819 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:54:05,819 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 16:54:05,821 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 16:54:05,821 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 16:54:05,821 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 16:54:05,822 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 16:54:05,822 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 16:54:05,826 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:54:05,982 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA595400>
2025-04-25 16:54:05,982 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027DCA555640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:54:06,139 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA585A90>
2025-04-25 16:54:06,139 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:06,139 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:06,139 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:06,139 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:06,139 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:06,293 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:06,293 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 16:54:06,294 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:06,294 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:06,294 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:06,294 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:06,294 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 16:54:06,294 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 16:54:06,294 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 16:54:06,294 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 16:54:06,294 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 16:54:06,294 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 16:54:06,295 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:06,295 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:06,295 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:06,295 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:06,295 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:06,455 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:06,455 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 16:54:06,455 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:06,456 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:06,456 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:06,456 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:06,456 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 16:54:06,456 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 16:54:06,456 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 16:54:06,456 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 16:54:06,456 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 16:54:06,457 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-25 16:54:06,457 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 16:54:06,457 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 16:54:06,457 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 16:54:06,457 - telegram.ext.Application - INFO - Application started
2025-04-25 16:54:06,458 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:54:06,458 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:54:06,458 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:55:05.820651+00:00 (in 59.362328 seconds)
2025-04-25 16:54:06,617 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA5D8550>
2025-04-25 16:54:06,618 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027DCA5552E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:54:06,779 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA5263F0>
2025-04-25 16:54:06,779 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:06,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:06,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:06,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:06,780 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:07,109 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:07,109 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:07,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:07,109 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:07,109 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:07,109 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:07,110 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489859, 'message': {'message_id': 747, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564046, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 16:54:07,110 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489859]
2025-04-25 16:54:07,110 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 6, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=747, supergroup_chat_created=False, text='/start'), update_id=829489859)
2025-04-25 16:54:07,111 - bot.handlers - DEBUG - Получена команда /start от пользователя 1635081908
2025-04-25 16:54:07,116 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:54:07,117 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:54:07,122 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:07,122 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489860}`
2025-04-25 16:54:07,123 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:07,123 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:07,123 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:07,123 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:07,123 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:07,124 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:07,124 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:07,124 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:07,124 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:07,300 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3558'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:07,300 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:54:07,300 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:07,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:07,301 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:07,301 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:07,301 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 748, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564047, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:54:10,317 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3823'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:10,318 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:10,318 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,318 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:10,318 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:10,318 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:10,318 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489860, 'callback_query': {'id': '7022623323365305528', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 748, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564047, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'set_vacation'}}]`
2025-04-25 16:54:10,318 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489860]
2025-04-25 16:54:10,319 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='set_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323365305528', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=748, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489860)
2025-04-25 16:54:10,319 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:54:10,319 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323365305528'}`
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,320 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489861}`
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,320 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,321 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:10,321 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,321 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:10,321 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,483 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:10,483 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:54:10,484 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,484 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:10,484 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:10,484 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:10,484 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:54:10,484 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=set_vacation
2025-04-25 16:54:10,486 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-05-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:54:10,486 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-05-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:54:10,487 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Установить период отпуска'. Действие: запрос даты начала отпуска.
2025-04-25 16:54:10,487 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:54:10,487 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,487 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:10,487 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,487 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:10,487 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:10,672 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'583'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:10,672 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:54:10,672 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:10,672 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:10,672 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:10,672 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:10,672 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 749, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564050, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:54:10,673 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_START
2025-04-25 16:54:11,802 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3826'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:11,803 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:11,803 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:11,803 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:11,803 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:11,803 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:11,803 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489861, 'callback_query': {'id': '7022623322531037783', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 748, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564047, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 16:54:11,803 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489861]
2025-04-25 16:54:11,804 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322531037783', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=748, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-05-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489861)
2025-04-25 16:54:11,804 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 0
2025-04-25 16:54:11,804 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489862}`
2025-04-25 16:54:11,804 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:11,805 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:11,805 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:11,805 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:11,805 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:18,420 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:18,420 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:18,420 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:18,421 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:18,421 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:18,421 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:18,421 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489862, 'message': {'message_id': 750, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564058, 'text': '29-04-2025'}}]`
2025-04-25 16:54:18,421 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489862]
2025-04-25 16:54:18,421 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 18, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=750, supergroup_chat_created=False, text='29-04-2025'), update_id=829489862)
2025-04-25 16:54:18,421 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 0
2025-04-25 16:54:18,421 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату начала отпуска: 29-04-2025
2025-04-25 16:54:18,422 - bot.handlers - INFO - Дата начала отпуска успешно распарсена: 2025-04-29
2025-04-25 16:54:18,422 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:54:18,422 - httpcore.connection - DEBUG - close.started
2025-04-25 16:54:18,423 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:54:18,423 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:54:18,423 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489863}`
2025-04-25 16:54:18,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:18,424 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:18,424 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:18,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:18,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:18,573 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA601480>
2025-04-25 16:54:18,573 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027DCA555640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:54:18,726 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA60CB90>
2025-04-25 16:54:18,726 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:18,726 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:18,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:18,726 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:18,726 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:19,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'601'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:19,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:54:19,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:19,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:19,475 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:19,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:19,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 751, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564058, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-25 16:54:19,475 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_END
2025-04-25 16:54:25,649 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:25,649 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:25,649 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:25,649 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:25,650 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:25,650 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:25,650 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489863, 'message': {'message_id': 752, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564065, 'text': '30-04-2025'}}]`
2025-04-25 16:54:25,650 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489863]
2025-04-25 16:54:25,650 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=752, supergroup_chat_created=False, text='30-04-2025'), update_id=829489863)
2025-04-25 16:54:25,650 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 1
2025-04-25 16:54:25,650 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату окончания отпуска: 30-04-2025
2025-04-25 16:54:25,651 - bot.handlers - INFO - Дата окончания отпуска успешно распарсена: 2025-04-30
2025-04-25 16:54:25,652 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET vacation_start = :vacation_start, vacation_end = :vacation_end
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'vacation_start': '2025-04-29', 'vacation_end': '2025-04-30'}
2025-04-25 16:54:25,706 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'vacation_start': '2025-04-29', 'vacation_end': '2025-04-30'}
2025-04-25 16:54:25,708 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-04-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:54:25,709 - bot.handlers - INFO - Период отпуска для пользователя 1635081908 успешно установлен: 2025-04-29 - 2025-04-30
2025-04-25 16:54:25,710 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-04-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:54:25,711 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 16:54:25,711 - httpcore.connection - DEBUG - close.started
2025-04-25 16:54:25,712 - httpcore.connection - DEBUG - close.complete
2025-04-25 16:54:25,712 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 16:54:25,712 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489864}`
2025-04-25 16:54:25,712 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:25,713 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:25,713 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:25,713 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:25,713 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:25,866 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA5B2250>
2025-04-25 16:54:25,866 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027DCA555640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 16:54:26,022 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA5B2360>
2025-04-25 16:54:26,022 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:26,022 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:26,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:26,022 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:26,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:26,221 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3363'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:26,221 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:54:26,222 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:26,222 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:26,222 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:26,222 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:26,222 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 16:54:28,355 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3631'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:28,355 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:28,355 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,355 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:28,355 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:28,356 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:28,356 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489864, 'callback_query': {'id': '7022623321957989236', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 16:54:28,356 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489864]
2025-04-25 16:54:28,356 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321957989236', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489864)
2025-04-25 16:54:28,356 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 16:54:28,356 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321957989236'}`
2025-04-25 16:54:28,357 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,357 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:54:28,357 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:28,357 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:28,358 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,608 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:28,608 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 16:54:28,608 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,608 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:28,608 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:28,608 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:28,608 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 16:54:28,608 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 16:54:28,626 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': '2025-04-29', 'vacation_end': '2025-04-30', 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 16:54:28,627 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 16:54:28,627 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 16:54:28,630 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 16:54:28,631 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 16:54:28,631 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:54:28,632 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,632 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:28,632 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,632 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:28,632 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:28,887 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:28,887 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 16:54:28,887 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:28,888 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:28,888 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:28,888 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:28,888 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 754, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564068, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 16:54:38,530 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:38,530 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:38,530 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:38,530 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:38,530 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:38,530 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:38,530 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:54:38,530 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:54:38,530 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:54:38,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:38,531 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:38,531 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:38,531 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:38,531 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:48,690 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:48,690 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:48,690 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:48,690 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:48,691 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:48,691 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:48,691 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:54:48,691 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:54:48,691 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:54:48,691 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:48,691 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:48,692 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:48,692 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:48,692 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:54:58,860 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:54:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:54:58,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:54:58,860 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:54:58,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:54:58,860 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:54:58,861 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:54:58,861 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:54:58,861 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:54:58,861 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:54:58,861 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:54:58,861 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:54:58,861 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:54:58,862 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:54:58,862 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:05,822 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:55:05,822 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:56:05.820651+00:00 (in 59.998331 seconds)
2025-04-25 16:55:05,822 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:56:05 UTC)" (scheduled at 2025-04-25 06:55:05.820651+00:00)
2025-04-25 16:55:05,822 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:55:05,830 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:56:05 UTC)" executed successfully
2025-04-25 16:55:09,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:09,021 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:09,021 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:09,021 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:09,021 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:09,021 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:09,021 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:09,021 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:09,021 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:09,022 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:09,022 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:09,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:09,022 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:09,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:19,180 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:19,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:19,181 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:19,181 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:19,181 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:19,181 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:19,181 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:19,181 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:19,181 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:19,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:19,182 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:19,182 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:19,182 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:19,182 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:29,346 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:29,346 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:29,346 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:29,346 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:29,346 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:29,346 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:29,346 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:29,346 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:29,346 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:29,347 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:29,347 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:29,347 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:29,347 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:29,347 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:39,508 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:39,508 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:39,508 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:39,508 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:39,508 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:39,508 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:39,509 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:39,509 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:39,509 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:39,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:39,509 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:39,509 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:39,509 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:39,510 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:49,669 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:49,670 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:49,670 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:49,670 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:49,670 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:49,670 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:49,670 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:49,670 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:49,670 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:49,670 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:49,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:49,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:49,671 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:49,671 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:55:59,829 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:55:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:55:59,829 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:55:59,830 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:55:59,830 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:55:59,830 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:55:59,830 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:55:59,830 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:55:59,830 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:55:59,830 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:55:59,830 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:55:59,831 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:55:59,831 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:55:59,831 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:55:59,831 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:56:05,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:56:05,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:57:05.820651+00:00 (in 59.998895 seconds)
2025-04-25 16:56:05,821 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:57:05 UTC)" (scheduled at 2025-04-25 06:56:05.820651+00:00)
2025-04-25 16:56:05,822 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:56:05,829 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:57:05 UTC)" executed successfully
2025-04-25 16:56:10,005 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:56:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:56:10,005 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:56:10,005 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:56:10,005 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:56:10,005 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:56:10,005 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:56:10,005 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:56:10,005 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:56:10,006 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:56:10,006 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:56:10,006 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:56:10,006 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:56:10,006 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:56:10,006 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:56:20,165 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:56:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:56:20,165 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:56:20,165 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:56:20,165 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:56:20,166 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:56:20,166 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:56:20,166 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:56:20,166 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:56:20,166 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:56:20,166 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:56:20,167 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:56:20,167 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:56:20,167 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:56:20,167 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:56:30,333 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:56:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:56:30,333 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:56:30,333 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:56:30,334 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:56:30,334 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:56:30,334 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:56:30,334 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:56:30,334 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:56:30,334 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:56:30,335 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:56:30,335 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:56:30,335 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:56:30,336 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:56:30,336 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:56:40,498 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:56:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:56:40,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:56:40,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:56:40,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:56:40,498 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:56:40,498 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:56:40,498 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:56:40,498 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:56:40,499 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:56:40,499 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:56:40,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:56:40,499 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:56:40,499 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:56:40,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:56:50,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:56:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:56:50,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:56:50,659 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:56:50,659 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:56:50,659 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:56:50,659 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:56:50,659 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:56:50,659 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:56:50,659 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:56:50,660 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:56:50,660 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:56:50,660 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:56:50,660 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:56:50,660 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:00,849 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:00,850 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:00,850 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:00,850 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:00,850 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:00,850 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:00,850 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:00,850 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:00,850 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:00,851 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:00,851 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:00,851 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:00,851 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:00,851 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:05,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:57:05,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:58:05.820651+00:00 (in 59.999391 seconds)
2025-04-25 16:57:05,821 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:58:05 UTC)" (scheduled at 2025-04-25 06:57:05.820651+00:00)
2025-04-25 16:57:05,821 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:57:05,845 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:58:05 UTC)" executed successfully
2025-04-25 16:57:11,010 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:11,011 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:11,011 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:11,011 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:11,011 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:11,011 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:11,011 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:11,011 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:11,011 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:11,012 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:11,012 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:11,012 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:11,012 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:11,012 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:21,175 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:21,175 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:21,175 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:21,175 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:21,175 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:21,175 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:21,176 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:21,176 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:21,176 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:21,176 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:21,176 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:21,176 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:21,177 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:21,177 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:31,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:31,337 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:31,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:31,338 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:31,338 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:31,338 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:31,338 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:31,338 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:31,338 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:31,339 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:31,339 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:31,339 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:31,339 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:31,339 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:41,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:41,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:41,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:41,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:41,498 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:41,498 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:41,498 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:41,498 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:41,498 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:41,499 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:41,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:41,499 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:41,499 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:41,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:57:51,657 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:57:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:57:51,658 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:57:51,658 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:57:51,658 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:57:51,658 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:57:51,658 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:57:51,658 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:57:51,658 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:57:51,658 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:57:51,659 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:57:51,659 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:57:51,659 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:57:51,659 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:57:51,659 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:01,828 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:01,828 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:01,828 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:01,829 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:01,829 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:01,829 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:01,829 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:01,829 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:01,829 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:01,829 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:01,830 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:01,830 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:01,830 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:01,830 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:05,822 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:58:05,822 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 06:59:05.820651+00:00 (in 59.998328 seconds)
2025-04-25 16:58:05,822 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:59:05 UTC)" (scheduled at 2025-04-25 06:58:05.820651+00:00)
2025-04-25 16:58:05,822 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:58:05,830 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 06:59:05 UTC)" executed successfully
2025-04-25 16:58:11,988 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:11,988 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:11,988 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:11,988 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:11,988 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:11,988 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:11,988 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:11,989 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:11,989 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:11,989 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:11,989 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:11,989 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:11,989 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:11,989 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:22,154 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:22,154 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:22,154 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:22,155 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:22,155 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:22,155 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:22,155 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:22,155 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:22,155 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:22,155 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:22,156 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:22,156 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:22,156 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:22,156 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:32,315 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:32,315 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:32,315 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:32,315 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:32,315 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:32,315 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:32,316 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:32,316 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:32,316 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:32,316 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:32,317 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:32,317 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:32,317 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:32,317 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:42,475 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:42,475 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:42,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:42,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:42,475 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:42,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:42,475 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:42,475 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:42,476 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:42,476 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:42,476 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:42,476 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:42,476 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:42,476 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:58:52,635 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:58:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:58:52,636 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:58:52,636 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:58:52,636 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:58:52,636 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:58:52,636 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:58:52,636 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:58:52,636 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:58:52,636 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:58:52,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:58:52,637 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:58:52,637 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:58:52,637 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:58:52,637 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:02,812 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:02,813 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:02,813 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:02,813 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:02,813 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:02,813 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:02,813 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:02,813 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:02,813 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:02,814 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:02,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:02,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:02,814 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:02,814 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:05,822 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 16:59:05,822 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:00:05.820651+00:00 (in 59.998153 seconds)
2025-04-25 16:59:05,822 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:00:05 UTC)" (scheduled at 2025-04-25 06:59:05.820651+00:00)
2025-04-25 16:59:05,822 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 16:59:05,828 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 16:59:05,828 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 16:59:05,829 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:00:05 UTC)" executed successfully
2025-04-25 16:59:12,977 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:12,977 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:12,977 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:12,977 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:12,977 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:12,977 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:12,978 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:12,978 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:12,978 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:12,978 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:12,978 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:12,978 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:12,979 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:12,979 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:23,137 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:23,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:23,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:23,137 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:23,137 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:23,137 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:23,137 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:23,138 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:23,138 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:23,138 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:23,138 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:23,138 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:23,139 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:23,139 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:33,296 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:33,297 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:33,297 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:33,297 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:33,297 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:33,297 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:33,297 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:33,297 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:33,297 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:33,298 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:33,298 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:33,298 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:33,298 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:33,298 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:43,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:43,457 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:43,457 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:43,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:43,457 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:43,457 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:43,457 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:43,457 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:43,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:43,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:43,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:43,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:43,458 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:43,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 16:59:53,616 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 06:59:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 16:59:53,616 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 16:59:53,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 16:59:53,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 16:59:53,617 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 16:59:53,617 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 16:59:53,617 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 16:59:53,617 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 16:59:53,617 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 16:59:53,617 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 16:59:53,618 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 16:59:53,618 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 16:59:53,618 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 16:59:53,618 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:03,777 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:03,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:03,777 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:03,777 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:03,777 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:03,777 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:03,778 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:03,778 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:03,778 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 17:00:03,778 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:03,778 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:03,778 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:03,778 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:03,779 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:05,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:00:05,822 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:01:05.820651+00:00 (in 59.998511 seconds)
2025-04-25 17:00:05,822 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:01:05 UTC)" (scheduled at 2025-04-25 07:00:05.820651+00:00)
2025-04-25 17:00:05,822 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:00:05,827 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:00:05,828 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:00:05,828 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:01:05 UTC)" executed successfully
2025-04-25 17:00:13,942 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:13,942 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:13,942 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:13,943 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:13,943 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:13,943 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:13,943 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:13,943 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:13,943 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 17:00:13,943 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:13,944 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:13,944 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:13,944 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:13,944 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:24,103 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:24,103 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:24,103 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:24,103 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:24,103 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:24,103 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:24,104 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:24,104 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:24,104 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 17:00:24,104 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:24,104 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:24,104 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:24,104 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:24,104 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:34,263 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:34,263 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:34,263 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:34,263 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:34,263 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:34,263 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:34,264 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:34,264 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:34,264 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 17:00:34,264 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:34,264 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:34,264 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:34,265 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:34,265 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:44,422 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:44,422 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:44,423 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:44,423 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:44,423 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:44,423 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:44,423 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:44,423 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:44,423 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489865}`
2025-04-25 17:00:44,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:44,424 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:44,424 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:44,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:44,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:48,550 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 17:00:48,550 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 17:00:48,550 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 17:00:48,551 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 17:00:48,551 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 17:00:48,551 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:48,551 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 17:00:48,551 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489865}`
2025-04-25 17:00:48,552 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:48,552 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:00:48,703 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA583A50>
2025-04-25 17:00:48,704 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027DCA5552E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:00:48,858 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027DCA583750>
2025-04-25 17:00:48,858 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:48,859 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:48,859 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:48,859 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:48,859 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:49,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:49,012 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:00:49,012 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:49,012 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:49,012 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:49,012 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:49,012 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:00:49,013 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:00:49,013 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 17:00:49,013 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 17:00:49,013 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 17:00:49,013 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 17:00:49,013 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 17:00:49,013 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 17:00:49,025 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 17:00:49,025 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 17:00:49,025 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 17:00:49,025 - httpcore.connection - DEBUG - close.started
2025-04-25 17:00:49,025 - httpcore.connection - DEBUG - close.started
2025-04-25 17:00:49,025 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:00:49,026 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:00:49,026 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 17:00:49,026 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 17:00:54,129 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:00:54,129 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:00:54,131 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 17:00:54,131 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 17:00:54,131 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 17:00:54,131 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 17:00:54,132 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 17:00:54,135 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:00:54,290 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000203574F5400>
2025-04-25 17:00:54,290 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000203574B5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:00:54,442 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000203574E5A90>
2025-04-25 17:00:54,442 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:54,442 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:54,442 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:54,442 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:54,442 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:54,591 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:54,591 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 17:00:54,591 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:54,592 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:54,592 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:54,592 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:54,592 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 17:00:54,592 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 17:00:54,592 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 17:00:54,592 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 17:00:54,592 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 17:00:54,592 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 17:00:54,593 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:54,593 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:54,593 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:54,593 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:54,593 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:00:54,742 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:00:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:00:54,743 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 17:00:54,743 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:00:54,743 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:00:54,743 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:00:54,743 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:00:54,743 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 17:00:54,743 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 17:00:54,743 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 17:00:54,743 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 17:00:54,743 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 17:00:54,744 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-25 17:00:54,744 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 17:00:54,744 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 17:00:54,744 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 17:00:54,744 - telegram.ext.Application - INFO - Application started
2025-04-25 17:00:54,744 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:00:54,744 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:00:54,744 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:01:54.130470+00:00 (in 59.385503 seconds)
2025-04-25 17:00:54,896 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000020357534550>
2025-04-25 17:00:54,896 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000203574B52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:00:55,050 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000020357482650>
2025-04-25 17:00:55,050 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:00:55,050 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:00:55,050 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:00:55,050 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:00:55,050 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:01,373 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3631'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:01,373 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:01,373 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:01,374 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:01,374 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:01,374 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:01,374 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489865, 'callback_query': {'id': '7022623322307476106', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 17:01:01,374 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489865]
2025-04-25 17:01:01,374 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322307476106', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489865)
2025-04-25 17:01:01,378 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:01,378 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322307476106'}`
2025-04-25 17:01:01,379 - httpcore.connection - DEBUG - close.started
2025-04-25 17:01:01,379 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:01:01,379 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:01:01,379 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489866}`
2025-04-25 17:01:01,380 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:01,380 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:01,380 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:01,380 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:01,380 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:01,534 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002035755C050>
2025-04-25 17:01:01,534 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000203574B5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:01:01,690 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000203574C7D10>
2025-04-25 17:01:01,690 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:01,691 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:01,691 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:01,691 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:01,691 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:01,993 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:01,993 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:01,994 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:01,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:01,994 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:01,994 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:01,994 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:01,994 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 17:01:01,996 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:01,997 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:01,997 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 17:01:01,998 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 17:01:01,999 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 17:01:01,999 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:01:02,000 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:02,000 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:02,000 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:02,000 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:02,000 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:02,259 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:02,259 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:02,259 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:02,260 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:02,260 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:02,260 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:02,260 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 755, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564462, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:01:06,456 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3635'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:06,456 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:06,456 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:06,456 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:06,456 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:06,456 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:06,456 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489866, 'callback_query': {'id': '7022623322907218997', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:01:06,456 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489866]
2025-04-25 17:01:06,457 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322907218997', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489866)
2025-04-25 17:01:06,457 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:06,457 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322907218997'}`
2025-04-25 17:01:06,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:06,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489867}`
2025-04-25 17:01:06,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:06,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:06,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:06,767 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:06,768 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:06,768 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:06,768 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:06,768 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:06,768 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:06,768 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:06,768 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:01:06,770 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:06,770 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:06,771 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:01:06,772 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:01:06,821 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:01:06,822 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:06,822 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:06,823 - bot.handlers - ERROR - Не удалось обновить статус подписки для пользователя 1635081908
2025-04-25 17:01:06,823 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:01:06,823 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:06,824 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:06,824 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:06,824 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:06,824 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:07,075 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'524'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:07,075 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:07,076 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:07,076 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:07,076 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:07,076 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:07,076 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 756, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564466, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:01:08,777 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3635'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:08,777 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:08,778 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:08,778 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:08,778 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:08,778 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:08,778 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489867, 'callback_query': {'id': '7022623322223260250', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:01:08,778 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489867]
2025-04-25 17:01:08,779 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322223260250', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489867)
2025-04-25 17:01:08,779 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:08,779 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322223260250'}`
2025-04-25 17:01:08,780 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:08,780 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489868}`
2025-04-25 17:01:08,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:08,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:08,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:08,987 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:08,987 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:08,988 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:08,988 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:08,988 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:08,988 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:08,988 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:08,988 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:01:08,990 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:08,990 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:08,991 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:01:08,992 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:01:09,037 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:01:09,039 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:09,039 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:09,040 - bot.handlers - ERROR - Не удалось обновить статус подписки для пользователя 1635081908
2025-04-25 17:01:09,040 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:01:09,040 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:09,040 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:09,040 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:09,041 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:09,041 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:09,251 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'524'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:09,251 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:09,251 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:09,251 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:09,251 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:09,251 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:09,251 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 757, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564469, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:01:11,393 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3632'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:11,393 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:11,394 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,394 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:11,394 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:11,394 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:11,394 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489868, 'callback_query': {'id': '7022623323605178295', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 17:01:11,394 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489868]
2025-04-25 17:01:11,394 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323605178295', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489868)
2025-04-25 17:01:11,395 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:11,395 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323605178295'}`
2025-04-25 17:01:11,395 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,395 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489869}`
2025-04-25 17:01:11,396 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:11,396 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,396 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:11,396 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,396 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,397 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:11,397 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,397 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:11,397 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,557 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:11,557 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:11,558 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,558 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:11,558 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:11,558 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:11,558 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:11,558 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 17:01:11,560 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:11,560 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:11,560 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за сегодня'. Действие: получение данных о посещениях.
2025-04-25 17:01:11,566 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:01:11,567 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,567 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:11,567 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,567 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:11,567 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:11,749 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:11,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:11,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:11,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:11,749 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:11,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:11,750 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 758, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564471, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:01:13,725 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3634'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:13,725 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:13,725 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:13,726 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:13,726 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:13,726 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:13,726 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489869, 'callback_query': {'id': '7022623324046161289', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 17:01:13,726 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489869]
2025-04-25 17:01:13,726 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324046161289', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489869)
2025-04-25 17:01:13,727 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:13,727 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324046161289'}`
2025-04-25 17:01:13,727 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:13,727 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489870}`
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:13,728 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:13,934 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:13,935 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:13,935 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:13,935 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:13,935 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:13,935 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:13,935 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:13,935 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 17:01:13,936 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:13,937 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:13,937 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за 10 дней'. Действие: получение данных о посещениях за 10 дней.
2025-04-25 17:01:13,940 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 17:01:13,941 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:13,941 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:13,941 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:13,941 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:13,941 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:14,132 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:14,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:14,132 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:14,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:14,132 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:14,132 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:14,133 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 759, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564474, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 17:01:16,040 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3645'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:16,040 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:16,040 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,040 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:16,040 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:16,040 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:16,041 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489870, 'callback_query': {'id': '7022623323573590209', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-25 17:01:16,041 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489870]
2025-04-25 17:01:16,041 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323573590209', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489870)
2025-04-25 17:01:16,041 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:16,041 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323573590209'}`
2025-04-25 17:01:16,042 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,042 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489871}`
2025-04-25 17:01:16,042 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:16,042 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,042 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:16,043 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,250 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:16,250 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:16,250 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,250 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:16,250 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:16,250 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:16,250 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:16,250 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-25 17:01:16,252 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:16,253 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:16,253 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Добавить время оповещений о приходе'. Действие: проверка лимита и запрос времени.
2025-04-25 17:01:16,253 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 17:01:16,254 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,254 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:16,254 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,254 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:16,254 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:16,464 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:16,464 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:16,464 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:16,464 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:16,464 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:16,464 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:16,464 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 760, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564476, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-25 17:01:16,464 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_ARRIVAL_NOTIFICATION
2025-04-25 17:01:19,468 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3635'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:19,468 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:19,468 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:19,468 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:19,468 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:19,468 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:19,469 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489871, 'callback_query': {'id': '7022623321298523306', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 753, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564066, 'text': '🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:01:19,469 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489871]
2025-04-25 17:01:19,469 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321298523306', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 6, 54, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=753, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-04-29 - 2025-04-30 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489871)
2025-04-25 17:01:19,469 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 2
2025-04-25 17:01:19,469 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489872}`
2025-04-25 17:01:19,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:19,470 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:19,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:19,470 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:19,470 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:25,462 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'331'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:25,462 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:25,462 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:25,462 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:25,462 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:25,463 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:25,463 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489872, 'message': {'message_id': 761, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564485, 'text': '3:44'}}]`
2025-04-25 17:01:25,463 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489872]
2025-04-25 17:01:25,463 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=761, supergroup_chat_created=False, text='3:44'), update_id=829489872)
2025-04-25 17:01:25,463 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 2
2025-04-25 17:01:25,463 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл время оповещения о приходе: 3:44
2025-04-25 17:01:25,464 - bot.handlers - INFO - Время оповещения о приходе успешно нормализовано: 03:44
2025-04-25 17:01:25,465 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:25,467 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET arrival_notification_times = :arrival_notification_times
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56", "03:44"]'}
2025-04-25 17:01:25,486 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56", "03:44"]'}
2025-04-25 17:01:25,488 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:25,488 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:25,489 - bot.handlers - ERROR - Не удалось обновить время оповещения о приходе для пользователя 1635081908
2025-04-25 17:01:25,489 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-25 17:01:25,489 - httpcore.connection - DEBUG - close.started
2025-04-25 17:01:25,489 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:01:25,489 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:01:25,490 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489873}`
2025-04-25 17:01:25,490 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:25,490 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:25,490 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:25,490 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:25,491 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:25,642 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002035756E140>
2025-04-25 17:01:25,642 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000203574B5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:01:25,800 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002035756E250>
2025-04-25 17:01:25,801 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:25,801 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:25,801 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:25,801 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:25,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:25,975 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'579'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:25,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:25,976 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:25,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:25,976 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:25,976 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:25,976 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 762, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564485, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-25 17:01:34,858 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 17:01:34,858 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 17:01:34,858 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 17:01:34,858 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 17:01:34,858 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 17:01:34,858 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:34,858 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 17:01:34,858 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489873}`
2025-04-25 17:01:34,859 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:34,859 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:01:35,008 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000203574DF750>
2025-04-25 17:01:35,008 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000203574B52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:01:35,164 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000020357575050>
2025-04-25 17:01:35,164 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:35,165 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:35,165 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:35,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:35,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:35,319 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:35,319 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:35,320 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:35,320 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:35,320 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:35,320 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:35,320 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:01:35,320 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:01:35,320 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 17:01:35,320 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 17:01:35,320 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 17:01:35,320 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 17:01:35,320 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 17:01:35,321 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 17:01:35,331 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 17:01:35,331 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 17:01:35,331 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 17:01:35,332 - httpcore.connection - DEBUG - close.started
2025-04-25 17:01:35,332 - httpcore.connection - DEBUG - close.started
2025-04-25 17:01:35,332 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:01:35,332 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:01:35,332 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 17:01:35,332 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 17:01:40,146 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:01:40,146 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:01:40,147 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 17:01:40,147 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 17:01:40,147 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 17:01:40,148 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 17:01:40,148 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 17:01:40,152 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:01:40,304 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A386755400>
2025-04-25 17:01:40,304 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A386715640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:01:40,460 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A386745A90>
2025-04-25 17:01:40,460 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:40,460 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:40,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:40,461 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:40,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:40,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:40,617 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 17:01:40,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:40,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:40,617 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:40,617 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:40,618 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 17:01:40,618 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 17:01:40,618 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 17:01:40,618 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 17:01:40,618 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 17:01:40,618 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 17:01:40,618 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:40,619 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:40,619 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:40,619 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:40,619 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:40,771 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:40,772 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 17:01:40,772 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:40,772 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:40,772 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:40,772 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:40,772 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 17:01:40,772 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 17:01:40,773 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 17:01:40,773 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 17:01:40,773 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 17:01:40,773 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-25 17:01:40,773 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 17:01:40,773 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 17:01:40,773 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 17:01:40,774 - telegram.ext.Application - INFO - Application started
2025-04-25 17:01:40,774 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:01:40,774 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:01:40,774 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:02:40.146971+00:00 (in 59.372546 seconds)
2025-04-25 17:01:40,918 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A386794550>
2025-04-25 17:01:40,918 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A3867152E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:01:41,064 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A3866E2650>
2025-04-25 17:01:41,064 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:41,065 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:41,065 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:41,065 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:41,065 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:45,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:45,115 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:45,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:45,115 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:45,115 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:45,115 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:45,115 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489873, 'message': {'message_id': 763, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564505, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-25 17:01:45,115 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489873]
2025-04-25 17:01:45,116 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=763, supergroup_chat_created=False, text='/start'), update_id=829489873)
2025-04-25 17:01:45,117 - bot.handlers - DEBUG - Получена команда /start от пользователя 1635081908
2025-04-25 17:01:45,123 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:45,125 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:01:45,130 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:45,130 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489874}`
2025-04-25 17:01:45,131 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:45,131 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:45,131 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:45,131 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:45,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:45,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:45,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:45,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:45,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:45,546 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3565'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:45,546 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:45,546 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:45,546 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:45,546 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:45,546 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:45,547 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 764, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564505, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:01:47,161 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3837'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:47,162 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:47,162 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,162 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:47,162 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:47,162 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:47,162 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489874, 'callback_query': {'id': '7022623322355710092', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 764, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564505, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:01:47,162 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489874]
2025-04-25 17:01:47,163 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322355710092', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=764, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489874)
2025-04-25 17:01:47,163 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:47,163 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322355710092'}`
2025-04-25 17:01:47,164 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,164 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489875}`
2025-04-25 17:01:47,164 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:47,164 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:47,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,329 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:47,329 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:47,329 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,329 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:47,329 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:47,330 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:47,330 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:47,330 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:01:47,331 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:47,332 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56', '03:44'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:47,332 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:01:47,335 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:01:47,337 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:01:47,338 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:47,359 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на False
2025-04-25 17:01:47,359 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 17:01:47,360 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,360 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:47,360 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,360 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:47,360 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,531 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:47,532 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:47,532 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,532 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:47,532 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:47,532 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:47,532 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 765, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564507, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 17:01:47,535 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:47,537 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:01:47,537 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,538 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:47,538 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,538 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:47,538 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:47,713 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3194'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:47,713 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:47,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:47,713 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:47,713 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:47,713 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:47,714 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 766, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564507, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:01:50,433 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3466'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:50,434 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:50,434 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,434 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:50,434 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:50,434 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:50,434 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489875, 'callback_query': {'id': '7022623324119283324', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 766, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564507, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:01:50,434 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489875]
2025-04-25 17:01:50,435 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324119283324', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 47, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=766, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489875)
2025-04-25 17:01:50,435 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:50,435 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324119283324'}`
2025-04-25 17:01:50,435 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,436 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489876}`
2025-04-25 17:01:50,436 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:50,436 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,436 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:50,436 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,437 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,437 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:50,437 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,437 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:50,437 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,593 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:50,593 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:50,593 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,593 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:50,593 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:50,593 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:50,594 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:50,594 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:01:50,596 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:50,597 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56', '03:44'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:50,597 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:01:50,598 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:01:50,599 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:01:50,600 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:50,603 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-25 17:01:50,603 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 17:01:50,603 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,604 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:50,604 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,604 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:50,604 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,779 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:50,779 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:50,780 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,780 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:50,780 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:50,780 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:50,780 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 767, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564510, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 17:01:50,782 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:50,783 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:01:50,784 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,784 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:50,784 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,784 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:50,784 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:50,976 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3175'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:50,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:50,976 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:50,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:50,976 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:50,976 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:50,976 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 768, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564510, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:01:55,614 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3460'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:55,614 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:55,614 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,614 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:55,615 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:55,615 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:55,615 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489876, 'callback_query': {'id': '7022623321786280531', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 768, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564510, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 17:01:55,615 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489876]
2025-04-25 17:01:55,615 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321786280531', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=768, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489876)
2025-04-25 17:01:55,615 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:55,616 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321786280531'}`
2025-04-25 17:01:55,616 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,616 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489877}`
2025-04-25 17:01:55,616 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:55,616 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:55,617 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,774 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:55,775 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:55,775 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,775 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:55,775 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:55,775 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:55,775 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:55,775 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 17:01:55,778 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:55,778 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56', '03:44'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:55,779 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений о приходе'. Действие: отображение списка для удаления.
2025-04-25 17:01:55,779 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),), (InlineKeyboardButton(callback_data='remove_arrival_time_03:44', text='03:44 🗑️'),)))}`
2025-04-25 17:01:55,779 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:55,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:55,780 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:55,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'738'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:55,956 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:55,957 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:55,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:55,957 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:55,957 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:55,957 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 769, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564515, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}], [{'text': '03:44 🗑️', 'callback_data': 'remove_arrival_time_03:44'}]]}}`
2025-04-25 17:01:57,730 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1016'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:57,731 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:01:57,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:57,731 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:57,731 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:57,731 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:57,731 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489877, 'callback_query': {'id': '7022623321416626844', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 769, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564515, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}], [{'text': '03:44 🗑️', 'callback_data': 'remove_arrival_time_03:44'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_time_03:44'}}]`
2025-04-25 17:01:57,731 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489877]
2025-04-25 17:01:57,731 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_time_03:44', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321416626844', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=769, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),), (InlineKeyboardButton(callback_data='remove_arrival_time_03:44', text='03:44 🗑️'),))), supergroup_chat_created=False, text='⏰ Выбери время оповещения о приходе для удаления: 👇')), update_id=829489877)
2025-04-25 17:01:57,732 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:01:57,732 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321416626844'}`
2025-04-25 17:01:57,732 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:57,732 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489878}`
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:57,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:57,891 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:57,891 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:01:57,891 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:57,891 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:57,892 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:57,892 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:57,892 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:01:57,892 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_time_03:44
2025-04-25 17:01:57,894 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56", "03:44"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:57,895 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56', '03:44'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:01:57,895 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку удаления времени оповещения о приходе: remove_arrival_time_03:44. Действие: удаление времени.
2025-04-25 17:01:57,898 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET arrival_notification_times = :arrival_notification_times
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56"]'}
2025-04-25 17:01:57,899 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'arrival_notification_times': '["11:56"]'}
2025-04-25 17:01:57,900 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:57,917 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Время оповещения о приходе 03:44 удалено! ✅'}`
2025-04-25 17:01:57,917 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:57,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:57,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:57,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:57,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:58,100 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'475'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:58,100 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:58,101 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:58,101 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:58,101 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:58,101 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:58,101 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 770, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564518, 'text': '⏰ Время оповещения о приходе 03:44 удалено! ✅'}`
2025-04-25 17:01:58,103 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:01:58,104 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:01:58,105 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:01:58,105 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:01:58,105 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:01:58,105 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:01:58,105 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:01:58,289 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:01:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3168'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:01:58,289 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:01:58,289 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:01:58,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:01:58,290 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:01:58,290 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:01:58,290 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 771, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564518, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:02:02,133 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3444'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:02,133 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:02,133 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,133 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:02,133 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:02,133 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:02,133 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489878, 'callback_query': {'id': '7022623322232194209', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 768, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564510, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 17:02:02,134 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489878]
2025-04-25 17:02:02,134 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322232194209', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=768, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56, 03:44\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489878)
2025-04-25 17:02:02,134 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:02:02,134 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322232194209'}`
2025-04-25 17:02:02,135 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,135 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489879}`
2025-04-25 17:02:02,135 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:02,136 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,416 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:02,416 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:02:02,416 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,416 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:02,416 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:02,416 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:02,417 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:02:02,417 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 17:02:02,419 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:02:02,420 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:02:02,420 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за сегодня'. Действие: получение данных о посещениях.
2025-04-25 17:02:02,426 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:02:02,426 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,426 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:02,426 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,426 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:02,427 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:02,613 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:02,613 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:02:02,613 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:02,613 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:02,614 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:02,614 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:02,614 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 772, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564522, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:02:12,280 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:12,280 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:12,281 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:12,281 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:12,281 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:12,281 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:12,281 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:02:12,281 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:02:12,281 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489879}`
2025-04-25 17:02:12,281 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:12,282 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:12,282 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:12,282 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:12,282 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,379 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3436'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:13,379 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:13,379 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:13,379 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:13,379 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:13,379 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:13,379 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489879, 'callback_query': {'id': '7022623323465378930', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 771, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564518, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 17:02:13,380 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489879]
2025-04-25 17:02:13,380 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323465378930', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=771, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489879)
2025-04-25 17:02:13,380 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:02:13,380 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323465378930'}`
2025-04-25 17:02:13,381 - httpcore.connection - DEBUG - close.started
2025-04-25 17:02:13,381 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:02:13,381 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:02:13,381 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:02:13,381 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,382 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:13,382 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:13,382 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:13,382 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,534 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A3867BDA70>
2025-04-25 17:02:13,534 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A386715640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:02:13,690 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A3867C4830>
2025-04-25 17:02:13,690 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,690 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:13,690 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:13,690 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:13,690 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,855 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:13,856 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:02:13,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:13,856 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:13,856 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:13,856 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:13,856 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:02:13,856 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 17:02:13,858 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:02:13,859 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:02:13,859 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 17:02:13,861 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 17:02:13,862 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 17:02:13,863 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:02:13,863 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:13,864 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:13,864 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:13,864 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:13,865 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:14,049 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:14,049 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:02:14,049 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:14,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:14,050 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:14,050 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:14,050 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 773, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564533, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:02:23,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:23,526 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:23,526 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:23,526 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:23,526 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:23,526 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:23,527 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:02:23,527 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:02:23,527 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:02:23,527 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:23,527 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:23,527 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:23,527 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:23,528 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:33,676 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:33,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:33,676 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:33,676 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:33,676 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:33,676 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:33,677 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:02:33,677 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:02:33,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:02:33,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:33,677 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:33,677 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:33,677 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:33,678 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:40,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:02:40,148 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:03:40.146971+00:00 (in 59.998807 seconds)
2025-04-25 17:02:40,148 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:03:40 UTC)" (scheduled at 2025-04-25 07:02:40.146971+00:00)
2025-04-25 17:02:40,148 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:02:40,156 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:02:40,156 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:02:40,157 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:03:40 UTC)" executed successfully
2025-04-25 17:02:43,825 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:43,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:43,825 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:43,825 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:43,826 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:43,826 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:43,826 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:02:43,826 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:02:43,826 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:02:43,826 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:43,827 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:43,827 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:43,827 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:43,827 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:02:53,971 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:02:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:02:53,971 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:02:53,971 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:02:53,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:02:53,971 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:02:53,971 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:02:53,971 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:02:53,972 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:02:53,972 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:02:53,972 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:02:53,972 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:02:53,972 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:02:53,973 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:02:53,973 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:04,118 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:04,118 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:04,119 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:04,119 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:04,119 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:04,119 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:04,119 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:03:04,119 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:03:04,119 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489880}`
2025-04-25 17:03:04,119 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:04,120 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:04,120 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:04,120 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:04,120 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,182 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3453'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:13,182 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:13,183 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,183 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:13,183 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:13,183 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:13,183 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489880, 'callback_query': {'id': '7022623321168384833', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 771, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564518, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 17:03:13,183 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489880]
2025-04-25 17:03:13,183 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321168384833', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=771, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489880)
2025-04-25 17:03:13,184 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:03:13,184 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321168384833'}`
2025-04-25 17:03:13,184 - httpcore.connection - DEBUG - close.started
2025-04-25 17:03:13,184 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:03:13,185 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:03:13,185 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489881}`
2025-04-25 17:03:13,185 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,185 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:13,186 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,186 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:13,186 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,337 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A3867CC270>
2025-04-25 17:03:13,337 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A386715640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:03:13,489 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A3867CC160>
2025-04-25 17:03:13,490 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,490 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:13,490 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,490 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:13,490 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,668 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:13,669 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:03:13,669 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,669 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:13,669 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:13,669 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:13,669 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:03:13,669 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 17:03:13,672 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:03:13,673 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:03:13,673 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений о приходе'. Действие: отображение списка для удаления.
2025-04-25 17:03:13,673 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),),))}`
2025-04-25 17:03:13,674 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,674 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:13,674 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,674 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:13,675 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:13,915 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'656'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:13,916 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:13,916 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:13,916 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:13,916 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:13,916 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:13,916 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 774, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564593, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}]]}}`
2025-04-25 17:03:17,420 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3455'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:17,421 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:17,421 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,421 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:17,421 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:17,421 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:17,421 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489881, 'callback_query': {'id': '7022623324177387295', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 771, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564518, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_departure_notification_time'}}]`
2025-04-25 17:03:17,421 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489881]
2025-04-25 17:03:17,422 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324177387295', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 1, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=771, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55, 12:26\n\nВыбери, что хочешь сделать: 👇')), update_id=829489881)
2025-04-25 17:03:17,422 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:03:17,422 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324177387295'}`
2025-04-25 17:03:17,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,423 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489882}`
2025-04-25 17:03:17,424 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:17,424 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:17,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,425 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,425 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:17,425 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,425 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:17,425 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,619 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:17,619 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:03:17,620 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,620 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:17,620 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:17,620 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:17,620 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:03:17,620 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_departure_notification_time
2025-04-25 17:03:17,622 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:03:17,624 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:03:17,624 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений об уходе'. Действие: отображение списка для удаления.
2025-04-25 17:03:17,624 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🚪 Выбери время оповещения об уходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_departure_time_17:55', text='17:55 🗑️'),), (InlineKeyboardButton(callback_data='remove_departure_time_12:26', text='12:26 🗑️'),)))}`
2025-04-25 17:03:17,625 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,625 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:17,625 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,625 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:17,625 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:17,817 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'742'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:17,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:17,818 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:17,818 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:17,818 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:17,818 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:17,818 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 775, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564597, 'text': '🚪 Выбери время оповещения об уходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '17:55 🗑️', 'callback_data': 'remove_departure_time_17:55'}], [{'text': '12:26 🗑️', 'callback_data': 'remove_departure_time_12:26'}]]}}`
2025-04-25 17:03:19,860 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1022'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:19,860 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:19,860 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:19,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:19,860 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:19,860 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:19,860 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489882, 'callback_query': {'id': '7022623324750541800', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 775, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564597, 'text': '🚪 Выбери время оповещения об уходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '17:55 🗑️', 'callback_data': 'remove_departure_time_17:55'}], [{'text': '12:26 🗑️', 'callback_data': 'remove_departure_time_12:26'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_departure_time_12:26'}}]`
2025-04-25 17:03:19,860 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489882]
2025-04-25 17:03:19,861 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_departure_time_12:26', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324750541800', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=775, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_departure_time_17:55', text='17:55 🗑️'),), (InlineKeyboardButton(callback_data='remove_departure_time_12:26', text='12:26 🗑️'),))), supergroup_chat_created=False, text='🚪 Выбери время оповещения об уходе для удаления: 👇')), update_id=829489882)
2025-04-25 17:03:19,861 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:03:19,861 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324750541800'}`
2025-04-25 17:03:19,861 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:19,862 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489883}`
2025-04-25 17:03:19,862 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:19,862 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:19,862 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:19,862 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:19,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:19,863 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:19,863 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:19,863 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:19,863 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:20,066 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:20,067 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:03:20,067 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:20,067 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:20,067 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:20,067 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:20,067 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:03:20,067 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_departure_time_12:26
2025-04-25 17:03:20,069 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "12:26"]'}
2025-04-25 17:03:20,070 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '12:26']
2025-04-25 17:03:20,070 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку удаления времени оповещения об уходе: remove_departure_time_12:26. Действие: удаление времени.
2025-04-25 17:03:20,072 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET departure_notification_times = :departure_notification_times
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:20,073 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:20,074 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:20,120 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🚪 Время оповещения об уходе 12:26 удалено! ✅'}`
2025-04-25 17:03:20,121 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:20,121 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:20,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:20,121 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:20,121 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:20,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'475'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:20,326 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:20,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:20,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:20,326 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:20,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:20,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 776, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564600, 'text': '🚪 Время оповещения об уходе 12:26 удалено! ✅'}`
2025-04-25 17:03:20,328 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:20,330 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:03:20,330 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:20,330 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:20,331 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:20,331 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:20,331 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:20,527 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3161'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:20,527 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:20,527 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:20,527 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:20,527 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:20,528 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:20,528 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 777, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564600, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:03:22,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3433'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:22,239 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:22,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:22,240 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:22,240 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:22,240 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489883, 'callback_query': {'id': '7022623324812975857', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 777, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564600, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:03:22,240 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489883]
2025-04-25 17:03:22,240 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324812975857', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=777, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489883)
2025-04-25 17:03:22,241 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:03:22,241 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324812975857'}`
2025-04-25 17:03:22,241 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,241 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489884}`
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:22,242 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,412 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:22,413 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:03:22,413 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,413 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:22,413 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:22,413 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:22,413 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:03:22,413 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:03:22,415 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:22,416 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:03:22,416 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:03:22,418 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:03:22,419 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:03:22,420 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:22,445 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на False
2025-04-25 17:03:22,445 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 17:03:22,446 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:22,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,446 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:22,446 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,629 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:22,629 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:22,630 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,630 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:22,630 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:22,630 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:22,630 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 778, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564602, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-25 17:03:22,632 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:22,633 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:03:22,634 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,634 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:22,634 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,634 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:22,634 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:22,837 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3180'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:22,837 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:22,837 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:22,838 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:22,838 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:22,838 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:22,838 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 779, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564602, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:03:23,953 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3452'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:23,953 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:23,953 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:23,954 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:23,954 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:23,954 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:23,954 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489884, 'callback_query': {'id': '7022623323650819039', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 779, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564602, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:03:23,954 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489884]
2025-04-25 17:03:23,954 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323650819039', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 22, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=779, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489884)
2025-04-25 17:03:23,955 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:03:23,955 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323650819039'}`
2025-04-25 17:03:23,955 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:23,955 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:23,956 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:24,113 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:24,113 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:03:24,113 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:24,113 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:24,113 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:24,113 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:24,114 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:03:24,114 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:03:24,116 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:24,117 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:03:24,117 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:03:24,118 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                    UPDATE user_settings
                    SET subscribed = :subscribed
                    WHERE telegram_id = :telegram_id
                , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:03:24,119 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:03:24,120 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:24,145 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-25 17:03:24,145 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 17:03:24,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:24,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:24,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:24,146 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:24,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:24,324 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:24,325 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:24,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:24,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:24,325 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:24,325 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:24,325 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 780, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-25 17:03:24,327 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:03:24,328 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-25 17:03:24,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:24,329 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:24,329 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:24,329 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:24,329 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:24,553 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3161'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:24,553 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:03:24,553 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:24,553 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:24,554 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:24,554 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:24,554 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-25 17:03:34,115 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:34,115 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:34,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:34,115 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:34,115 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:34,115 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:34,115 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:03:34,115 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:03:34,116 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:03:34,116 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:34,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:34,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:34,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:34,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:40,148 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:03:40,148 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:04:40.146971+00:00 (in 59.998052 seconds)
2025-04-25 17:03:40,149 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:04:40 UTC)" (scheduled at 2025-04-25 07:03:40.146971+00:00)
2025-04-25 17:03:40,149 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:03:40,156 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:03:40,156 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:03:40,156 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:04:40 UTC)" executed successfully
2025-04-25 17:03:44,270 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:44,270 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:44,270 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:44,270 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:44,270 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:44,270 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:44,271 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:03:44,271 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:03:44,271 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:03:44,271 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:44,271 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:44,271 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:44,271 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:44,272 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:03:54,416 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:03:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:03:54,416 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:03:54,416 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:03:54,416 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:03:54,416 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:03:54,417 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:03:54,417 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:03:54,417 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:03:54,417 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:03:54,417 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:03:54,417 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:03:54,417 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:03:54,418 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:03:54,418 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:04,561 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:04,561 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:04,561 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:04,561 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:04,562 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:04,562 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:04,562 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:04,562 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:04,562 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:04,562 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:04,563 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:04,563 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:04,563 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:04,563 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:14,707 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:14,707 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:14,707 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:14,707 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:14,708 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:14,708 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:14,708 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:14,708 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:14,708 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:14,708 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:14,708 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:14,709 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:14,709 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:14,709 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:24,852 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:24,853 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:24,853 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:24,853 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:24,853 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:24,853 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:24,853 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:24,853 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:24,853 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:24,854 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:24,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:24,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:24,854 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:24,854 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:35,004 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:35,004 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:35,004 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:35,004 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:35,004 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:35,004 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:35,004 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:35,004 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:35,005 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:35,005 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:35,005 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:35,005 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:35,005 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:35,005 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:40,148 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:04:40,148 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:05:40.146971+00:00 (in 59.998682 seconds)
2025-04-25 17:04:40,148 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:05:40 UTC)" (scheduled at 2025-04-25 07:04:40.146971+00:00)
2025-04-25 17:04:40,148 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:04:40,155 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:04:40,155 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:04:40,155 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:05:40 UTC)" executed successfully
2025-04-25 17:04:45,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:45,150 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:45,150 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:45,151 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:45,151 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:45,151 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:45,151 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:45,151 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:45,151 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:45,151 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:45,152 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:45,152 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:45,152 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:45,152 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:04:55,296 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:04:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:04:55,296 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:04:55,296 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:04:55,297 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:04:55,297 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:04:55,297 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:04:55,297 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:04:55,297 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:04:55,297 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:04:55,297 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:04:55,298 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:04:55,298 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:04:55,298 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:04:55,298 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:05,443 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:05,443 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:05,444 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:05,444 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:05,444 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:05,444 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:05,444 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:05,444 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:05,444 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:05,444 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:05,445 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:05,445 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:05,445 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:05,445 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:15,590 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:15,590 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:15,590 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:15,590 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:15,590 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:15,591 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:15,591 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:15,591 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:15,591 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:15,591 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:15,592 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:15,592 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:15,592 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:15,592 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:25,737 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:25,738 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:25,738 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:25,738 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:25,738 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:25,738 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:25,738 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:25,738 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:25,738 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:25,739 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:25,739 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:25,739 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:25,739 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:25,739 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:35,885 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:35,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:35,886 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:35,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:35,886 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:35,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:35,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:35,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:35,886 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:35,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:35,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:35,887 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:35,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:35,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:40,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:05:40,148 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:06:40.146971+00:00 (in 59.998845 seconds)
2025-04-25 17:05:40,148 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:06:40 UTC)" (scheduled at 2025-04-25 07:05:40.146971+00:00)
2025-04-25 17:05:40,148 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:05:40,155 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:05:40,155 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:05:40,156 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:06:40 UTC)" executed successfully
2025-04-25 17:05:46,033 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:46,033 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:46,033 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:46,033 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:46,033 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:46,033 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:46,034 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:46,034 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:46,034 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:46,034 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:46,034 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:46,034 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:46,034 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:46,034 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:05:56,179 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:05:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:05:56,179 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:05:56,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:05:56,179 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:05:56,179 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:05:56,180 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:05:56,180 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:05:56,180 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:05:56,180 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:05:56,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:05:56,180 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:05:56,180 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:05:56,181 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:05:56,181 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:06,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:06,325 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:06,326 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:06,326 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:06,326 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:06,326 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:06,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:06,326 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:06,326 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:06:06,326 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:06,327 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:06,327 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:06,327 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:06,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:16,473 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:16,474 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:16,474 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:16,474 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:16,474 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:16,474 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:16,474 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:16,474 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:16,474 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:06:16,475 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:16,475 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:16,475 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:16,475 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:16,475 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:26,630 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:26,630 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:26,631 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:26,631 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:26,631 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:26,631 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:26,631 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:26,631 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:26,631 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:06:26,632 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:26,632 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:26,632 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:26,633 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:26,633 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:36,789 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:36,789 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:36,789 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:36,789 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:36,789 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:36,790 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:36,790 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:36,790 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:36,790 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:06:36,790 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:36,790 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:36,791 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:36,791 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:36,791 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:40,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:06:40,148 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:07:40.146971+00:00 (in 59.998962 seconds)
2025-04-25 17:06:40,148 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:07:40 UTC)" (scheduled at 2025-04-25 07:06:40.146971+00:00)
2025-04-25 17:06:40,148 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:06:40,154 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:06:40,154 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:06:40,155 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:07:40 UTC)" executed successfully
2025-04-25 17:06:46,944 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:46,945 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:46,945 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:46,945 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:46,945 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:46,945 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:46,945 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:46,945 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:46,945 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489885}`
2025-04-25 17:06:46,946 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:46,946 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:46,946 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:46,946 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:46,946 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:50,326 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 17:06:50,327 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 17:06:50,327 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 17:06:50,327 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 17:06:50,327 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 17:06:50,327 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:50,327 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 17:06:50,327 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489885}`
2025-04-25 17:06:50,328 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:50,328 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:06:50,509 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A38673CD50>
2025-04-25 17:06:50,509 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A3867152E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:06:50,663 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A38673D050>
2025-04-25 17:06:50,663 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:50,663 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:50,663 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:50,663 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:50,663 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:50,818 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:50,818 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:50,818 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:50,818 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:50,818 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:50,818 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:50,819 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:06:50,819 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:06:50,819 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 17:06:50,819 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 17:06:50,819 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 17:06:50,819 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 17:06:50,819 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 17:06:50,819 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 17:06:50,830 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 17:06:50,830 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 17:06:50,830 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 17:06:50,830 - httpcore.connection - DEBUG - close.started
2025-04-25 17:06:50,830 - httpcore.connection - DEBUG - close.started
2025-04-25 17:06:50,830 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:06:50,830 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:06:50,831 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 17:06:50,831 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-25 17:06:55,933 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:06:55,934 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-25 17:06:55,935 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-25 17:06:55,935 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-25 17:06:55,935 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-25 17:06:55,936 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-25 17:06:55,936 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-25 17:06:55,940 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:06:56,093 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C15400>
2025-04-25 17:06:56,093 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:06:56,248 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C05A90>
2025-04-25 17:06:56,249 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:56,249 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:56,249 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:56,249 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:56,249 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:56,401 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:56,402 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-25 17:06:56,402 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:56,402 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:56,402 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:56,402 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:56,402 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-25 17:06:56,402 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-25 17:06:56,403 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-25 17:06:56,403 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-25 17:06:56,403 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-25 17:06:56,403 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-25 17:06:56,403 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:56,403 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:56,403 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:56,403 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:56,404 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:56,556 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:56,556 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-25 17:06:56,556 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:56,556 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:56,556 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:56,556 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:56,556 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-25 17:06:56,556 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-25 17:06:56,556 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-25 17:06:56,556 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-25 17:06:56,557 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-25 17:06:56,557 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-25 17:06:56,557 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-25 17:06:56,557 - apscheduler.scheduler - INFO - Scheduler started
2025-04-25 17:06:56,557 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-25 17:06:56,557 - telegram.ext.Application - INFO - Application started
2025-04-25 17:06:56,557 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:06:56,558 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:06:56,558 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:07:55.934797+00:00 (in 59.376638 seconds)
2025-04-25 17:06:56,710 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C54550>
2025-04-25 17:06:56,710 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:06:56,864 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BA2650>
2025-04-25 17:06:56,864 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:56,864 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:56,864 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:56,864 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:56,864 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3433'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:57,017 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:57,017 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,017 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:57,017 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:57,018 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:57,018 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489885, 'callback_query': {'id': '7022623323187608145', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:06:57,018 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489885]
2025-04-25 17:06:57,018 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323187608145', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489885)
2025-04-25 17:06:57,022 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:06:57,023 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323187608145'}`
2025-04-25 17:06:57,023 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,023 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489886}`
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:57,024 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,232 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:57,232 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:06:57,232 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,232 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:57,232 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:57,232 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:57,232 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:06:57,232 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:06:57,235 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:06:57,236 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:06:57,236 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:06:57,238 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:06:57,272 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:06:57,273 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:06:57,274 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:06:57,275 - bot.handlers - ERROR - Не удалось обновить статус подписки для пользователя 1635081908
2025-04-25 17:06:57,275 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:06:57,275 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,276 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:57,276 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,276 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:57,276 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:57,454 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'524'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:57,455 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:06:57,455 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:57,455 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:57,455 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:57,455 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:57,455 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 782, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564817, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:06:59,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3433'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:06:59,854 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:06:59,854 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:06:59,854 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:06:59,854 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:06:59,854 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:06:59,855 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489886, 'callback_query': {'id': '7022623325272974173', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:06:59,855 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489886]
2025-04-25 17:06:59,855 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325272974173', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489886)
2025-04-25 17:06:59,855 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:06:59,855 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623325272974173'}`
2025-04-25 17:06:59,856 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:59,856 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489887}`
2025-04-25 17:06:59,856 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:59,856 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:59,856 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:59,856 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:06:59,857 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:06:59,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:06:59,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:06:59,857 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:06:59,857 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:00,016 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:06:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:00,016 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:07:00,017 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:00,017 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:00,017 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:00,017 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:00,017 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:07:00,017 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:07:00,019 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:07:00,019 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:07:00,019 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:07:00,021 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:07:00,024 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-25 17:07:00,026 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:07:00,026 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:07:00,027 - bot.handlers - ERROR - Не удалось обновить статус подписки для пользователя 1635081908
2025-04-25 17:07:00,027 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:07:00,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:00,027 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:00,027 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:00,028 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:00,028 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:00,201 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'524'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:00,202 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:07:00,202 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:00,202 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:00,202 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:00,202 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:00,202 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 783, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564820, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:07:01,456 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3429'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:01,456 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:01,456 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,456 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:01,457 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:01,457 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:01,457 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489887, 'callback_query': {'id': '7022623325038690211', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 17:07:01,457 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489887]
2025-04-25 17:07:01,457 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325038690211', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489887)
2025-04-25 17:07:01,458 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:07:01,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623325038690211'}`
2025-04-25 17:07:01,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489888}`
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:01,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:01,617 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:07:01,617 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,617 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:01,617 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:01,617 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:01,617 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:07:01,617 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-25 17:07:01,620 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:07:01,620 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:07:01,621 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-25 17:07:01,622 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-25 17:07:01,623 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-25 17:07:01,623 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:07:01,624 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,624 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:01,624 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,624 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:01,624 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:01,801 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:01,801 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:07:01,801 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:01,801 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:01,801 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:01,801 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:01,801 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 784, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564821, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-25 17:07:03,783 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3445'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:03,783 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:03,783 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:03,783 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:03,784 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:03,784 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:03,784 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489888, 'callback_query': {'id': '7022623321200956105', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_departure_notification_time'}}]`
2025-04-25 17:07:03,784 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489888]
2025-04-25 17:07:03,784 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321200956105', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489888)
2025-04-25 17:07:03,784 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:07:03,785 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321200956105'}`
2025-04-25 17:07:03,785 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:03,785 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:03,785 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:03,786 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:03,946 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:03,946 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:07:03,946 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:03,946 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:03,947 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:03,947 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:03,947 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:07:03,947 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_departure_notification_time
2025-04-25 17:07:03,949 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:07:03,950 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55']
2025-04-25 17:07:03,951 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Добавить время оповещений об уходе'. Действие: проверка лимита и запрос времени.
2025-04-25 17:07:03,951 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🚪 Введи время оповещения об уходе в формате ЧЧ:ММ или Ч:ММ (например, 17:00 или 9:00):'}`
2025-04-25 17:07:03,951 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:03,951 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:03,951 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:03,952 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:03,952 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:04,137 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:04,137 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:07:04,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:04,138 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:04,138 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:04,138 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:04,138 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 785, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564824, 'text': '🚪 Введи время оповещения об уходе в формате ЧЧ:ММ или Ч:ММ (например, 17:00 или 9:00):'}`
2025-04-25 17:07:04,138 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_DEPARTURE_NOTIFICATION
2025-04-25 17:07:13,941 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:13,942 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:13,942 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:13,942 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:13,942 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:13,942 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:13,942 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:07:13,942 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:07:13,943 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:13,943 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:13,943 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:13,943 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:13,943 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:13,943 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:24,123 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:24,123 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:24,123 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:24,124 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:24,124 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:24,124 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:24,124 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:07:24,124 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:07:24,124 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:24,124 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:24,125 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:24,125 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:24,125 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:24,125 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:34,306 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:34,306 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:34,307 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:34,307 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:34,307 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:34,307 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:34,307 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:07:34,307 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:07:34,307 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:34,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:34,308 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:34,308 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:34,308 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:34,308 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:44,466 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:44,466 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:44,466 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:44,466 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:44,467 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:44,467 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:44,467 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:07:44,467 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:07:44,467 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:44,467 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:44,468 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:44,468 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:44,468 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:44,468 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:54,621 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:07:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:07:54,621 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:07:54,621 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:07:54,621 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:07:54,621 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:07:54,621 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:07:54,621 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:07:54,621 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:07:54,622 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:07:54,622 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:07:54,622 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:07:54,622 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:07:54,622 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:07:54,622 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:07:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:07:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:08:55.934797+00:00 (in 59.998220 seconds)
2025-04-25 17:07:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:08:55 UTC)" (scheduled at 2025-04-25 07:07:55.934797+00:00)
2025-04-25 17:07:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:07:55,946 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:07:55,946 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:07:55,947 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:08:55 UTC)" executed successfully
2025-04-25 17:08:04,802 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:04,802 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:04,802 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:04,802 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:04,802 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:04,802 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:04,803 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:04,803 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:04,803 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:04,803 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:04,803 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:04,803 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:04,804 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:04,804 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:14,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:14,960 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:14,960 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:14,960 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:14,961 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:14,961 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:14,961 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:14,961 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:14,961 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:14,961 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:14,961 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:14,961 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:14,962 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:14,962 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:25,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:25,115 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:25,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:25,115 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:25,115 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:25,115 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:25,115 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:25,115 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:25,115 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:25,116 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:25,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:25,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:25,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:25,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:35,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:35,272 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:35,272 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:35,272 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:35,272 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:35,272 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:35,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:35,272 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:35,272 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:35,273 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:35,273 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:35,273 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:35,273 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:35,273 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:45,426 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:45,426 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:45,426 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:45,426 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:45,426 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:45,426 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:45,427 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:45,427 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:45,427 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:45,427 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:45,427 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:45,427 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:45,427 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:45,428 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:55,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:08:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:08:55,580 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:08:55,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:08:55,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:08:55,581 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:08:55,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:08:55,581 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:08:55,581 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:08:55,581 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:08:55,581 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:08:55,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:08:55,582 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:08:55,582 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:08:55,582 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:08:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:08:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:09:55.934797+00:00 (in 59.999176 seconds)
2025-04-25 17:08:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:09:55 UTC)" (scheduled at 2025-04-25 07:08:55.934797+00:00)
2025-04-25 17:08:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:08:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:08:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:08:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:09:55 UTC)" executed successfully
2025-04-25 17:09:05,735 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:05,735 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:05,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:05,735 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:05,736 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:05,736 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:05,736 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:05,736 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:05,736 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:05,736 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:05,737 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:05,737 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:05,737 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:05,737 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:09:15,890 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:15,890 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:15,891 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:15,891 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:15,891 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:15,891 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:15,891 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:15,891 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:15,891 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:15,891 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:15,892 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:15,892 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:15,892 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:15,892 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:09:26,054 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:26,054 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:26,054 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:26,055 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:26,055 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:26,055 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:26,055 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:26,055 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:26,055 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:26,056 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:26,056 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:26,056 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:26,056 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:26,056 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:09:36,209 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:36,209 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:36,210 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:36,210 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:36,210 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:36,210 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:36,210 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:36,210 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:36,210 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:36,211 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:36,211 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:36,211 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:36,211 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:36,211 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:09:46,363 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:46,364 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:46,364 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:46,364 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:46,364 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:46,364 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:46,364 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:46,364 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:46,364 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:46,365 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:46,365 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:46,365 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:46,365 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:46,365 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:09:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:09:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:10:55.934797+00:00 (in 59.998691 seconds)
2025-04-25 17:09:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:10:55 UTC)" (scheduled at 2025-04-25 07:09:55.934797+00:00)
2025-04-25 17:09:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:09:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:09:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:09:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:10:55 UTC)" executed successfully
2025-04-25 17:09:56,519 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:09:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:09:56,520 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:09:56,520 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:09:56,520 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:09:56,520 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:09:56,520 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:09:56,520 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:09:56,521 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:09:56,521 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:09:56,521 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:09:56,521 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:09:56,521 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:09:56,522 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:09:56,522 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:06,676 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:06,676 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:06,676 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:06,676 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:06,676 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:06,676 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:06,676 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:06,676 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:06,677 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:06,677 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:06,677 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:06,677 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:06,677 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:06,677 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:16,858 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:16,858 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:16,858 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:16,858 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:16,858 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:16,858 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:16,858 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:16,859 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:16,859 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:16,859 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:16,859 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:16,859 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:16,860 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:16,860 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:27,015 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:27,015 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:27,015 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:27,015 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:27,015 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:27,015 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:27,015 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:27,016 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:27,016 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:27,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:27,016 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:27,016 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:27,016 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:27,016 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:37,170 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:37,170 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:37,170 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:37,170 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:37,170 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:37,170 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:37,170 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:37,170 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:37,171 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:37,171 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:37,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:37,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:37,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:37,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:47,338 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:47,338 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:47,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:47,338 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:47,338 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:47,338 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:47,339 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:47,339 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:47,339 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:47,339 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:47,340 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:47,340 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:47,340 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:47,340 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:10:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:10:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:11:55.934797+00:00 (in 59.998742 seconds)
2025-04-25 17:10:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:11:55 UTC)" (scheduled at 2025-04-25 07:10:55.934797+00:00)
2025-04-25 17:10:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:10:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:10:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:10:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:11:55 UTC)" executed successfully
2025-04-25 17:10:57,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:10:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:10:57,493 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:10:57,493 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:10:57,493 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:10:57,493 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:10:57,493 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:10:57,493 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:10:57,494 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:10:57,494 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:10:57,494 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:10:57,494 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:10:57,494 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:10:57,494 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:10:57,494 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:07,649 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:07,649 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:07,649 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:07,649 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:07,650 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:07,650 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:07,650 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:07,650 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:07,650 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:07,650 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:07,651 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:07,651 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:07,651 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:07,651 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:17,804 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:17,805 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:17,805 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:17,805 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:17,805 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:17,805 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:17,805 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:17,805 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:17,805 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:17,806 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:17,806 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:17,806 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:17,806 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:17,806 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:27,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:27,960 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:27,961 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:27,961 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:27,961 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:27,961 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:27,961 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:27,961 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:27,961 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:27,962 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:27,962 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:27,963 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:27,963 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:27,963 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:38,125 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:38,125 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:38,125 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:38,125 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:38,125 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:38,125 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:38,125 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:38,125 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:38,126 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:38,126 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:38,126 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:38,126 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:38,126 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:38,126 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:48,280 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:48,280 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:48,281 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:48,281 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:48,281 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:48,281 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:48,281 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:48,281 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:48,281 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:48,281 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:48,282 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:48,282 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:48,282 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:48,282 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:11:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:11:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:12:55.934797+00:00 (in 59.998632 seconds)
2025-04-25 17:11:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:12:55 UTC)" (scheduled at 2025-04-25 07:11:55.934797+00:00)
2025-04-25 17:11:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:11:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:11:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:11:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:12:55 UTC)" executed successfully
2025-04-25 17:11:58,435 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:11:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:11:58,435 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:11:58,435 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:11:58,435 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:11:58,435 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:11:58,435 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:11:58,435 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:11:58,435 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:11:58,436 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:11:58,436 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:11:58,436 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:11:58,436 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:11:58,436 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:11:58,436 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:08,589 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:08,589 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:08,589 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:08,589 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:08,589 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:08,589 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:08,589 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:08,589 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:08,590 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:08,590 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:08,590 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:08,590 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:08,590 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:08,590 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:18,745 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:18,745 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:18,746 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:18,746 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:18,746 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:18,746 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:18,746 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:18,746 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:18,746 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:18,747 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:18,747 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:18,748 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:18,748 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:18,748 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:28,902 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:28,902 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:28,903 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:28,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:28,903 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:28,903 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:28,903 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:28,903 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:28,903 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:28,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:28,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:28,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:28,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:28,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:39,057 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:39,057 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:39,058 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:39,058 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:39,058 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:39,058 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:39,058 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:39,058 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:39,058 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:39,058 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:39,059 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:39,059 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:39,059 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:39,059 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:49,211 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:49,211 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:49,211 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:49,211 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:49,211 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:49,212 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:49,212 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:49,212 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:49,212 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:49,212 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:49,212 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:49,213 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:49,213 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:49,213 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:12:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:12:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:13:55.934797+00:00 (in 59.999100 seconds)
2025-04-25 17:12:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:13:55 UTC)" (scheduled at 2025-04-25 07:12:55.934797+00:00)
2025-04-25 17:12:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:12:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:12:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:12:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:13:55 UTC)" executed successfully
2025-04-25 17:12:59,365 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:12:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:12:59,365 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:12:59,365 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:12:59,365 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:12:59,366 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:12:59,366 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:12:59,366 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:12:59,366 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:12:59,366 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:12:59,366 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:12:59,366 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:12:59,366 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:12:59,367 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:12:59,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:09,519 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:13:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:13:09,519 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:13:09,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:13:09,519 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:13:09,519 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:13:09,519 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:13:09,520 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:13:09,520 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:13:09,520 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:13:09,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:13:09,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:13:09,520 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:13:09,521 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:13:09,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:19,673 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:13:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:13:19,674 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:13:19,674 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:13:19,674 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:13:19,674 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:13:19,675 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:13:19,675 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:13:19,675 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:13:19,675 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:13:19,675 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:13:19,676 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:13:19,676 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:13:19,676 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:13:19,676 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:29,835 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:13:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:13:29,836 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:13:29,836 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:13:29,836 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:13:29,836 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:13:29,836 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:13:29,836 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:13:29,836 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:13:29,836 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:13:29,837 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:13:29,837 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:13:29,837 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:13:29,837 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:13:29,837 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:39,992 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:13:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:13:39,992 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:13:39,992 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:13:39,992 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:13:39,992 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:13:39,993 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:13:39,993 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:13:39,993 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:13:39,993 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:13:39,993 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:13:39,994 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:13:39,994 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:13:39,994 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:13:39,994 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:50,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:13:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:13:50,150 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:13:50,150 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:13:50,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:13:50,150 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:13:50,150 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:13:50,150 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:13:50,150 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:13:50,150 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:13:50,151 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:13:50,151 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:13:50,151 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:13:50,151 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:13:50,151 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:13:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:13:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:14:55.934797+00:00 (in 59.999277 seconds)
2025-04-25 17:13:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:14:55 UTC)" (scheduled at 2025-04-25 07:13:55.934797+00:00)
2025-04-25 17:13:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:13:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:13:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:13:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:14:55 UTC)" executed successfully
2025-04-25 17:14:00,303 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:00,304 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:00,304 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:00,304 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:00,304 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:00,304 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:00,304 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:00,304 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:00,304 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:00,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:00,305 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:00,305 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:00,305 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:00,305 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:10,460 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:10,460 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:10,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:10,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:10,461 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:10,461 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:10,461 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:10,461 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:10,461 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:10,461 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:10,461 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:10,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:10,462 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:10,462 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:20,615 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:20,615 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:20,615 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:20,615 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:20,615 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:20,615 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:20,616 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:20,616 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:20,616 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:20,616 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:20,616 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:20,616 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:20,616 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:20,616 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:30,771 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:30,771 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:30,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:30,771 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:30,771 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:30,772 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:30,772 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:30,772 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:30,772 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:30,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:30,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:30,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:30,773 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:30,773 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:40,929 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:40,929 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:40,929 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:40,929 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:40,929 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:40,929 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:40,929 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:40,929 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:40,929 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:40,930 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:40,930 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:40,930 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:40,930 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:40,930 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:51,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:14:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:14:51,082 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:14:51,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:14:51,083 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:14:51,083 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:14:51,083 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:14:51,083 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:14:51,083 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:14:51,083 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:14:51,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:14:51,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:14:51,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:14:51,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:14:51,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:14:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:14:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:15:55.934797+00:00 (in 59.998721 seconds)
2025-04-25 17:14:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:15:55 UTC)" (scheduled at 2025-04-25 07:14:55.934797+00:00)
2025-04-25 17:14:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:14:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:14:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:14:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:15:55 UTC)" executed successfully
2025-04-25 17:15:01,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:01,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:01,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:01,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:01,240 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:01,240 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:01,240 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:01,240 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:01,240 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:01,241 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:01,241 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:01,241 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:01,241 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:01,241 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:11,398 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:11,398 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:11,399 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:11,399 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:11,399 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:11,399 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:11,399 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:11,399 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:11,399 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:11,399 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:11,400 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:11,400 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:11,400 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:11,400 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:21,558 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:21,558 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:21,558 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:21,559 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:21,559 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:21,559 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:21,559 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:21,559 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:21,559 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:21,559 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:21,560 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:21,560 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:21,560 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:21,560 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:31,713 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:31,714 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:31,714 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:31,714 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:31,714 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:31,714 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:31,714 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:31,714 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:31,714 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:31,715 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:31,715 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:31,715 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:31,715 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:31,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:41,868 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:41,868 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:41,868 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:41,868 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:41,868 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:41,868 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:41,868 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:41,869 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:41,869 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:41,869 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:41,869 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:41,869 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:41,869 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:41,870 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:52,022 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:15:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:15:52,023 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:15:52,023 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:15:52,023 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:15:52,023 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:15:52,023 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:15:52,023 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:15:52,023 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:15:52,023 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:15:52,024 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:15:52,024 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:15:52,024 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:15:52,024 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:15:52,024 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:15:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:15:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:16:55.934797+00:00 (in 59.998773 seconds)
2025-04-25 17:15:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:16:55 UTC)" (scheduled at 2025-04-25 07:15:55.934797+00:00)
2025-04-25 17:15:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:15:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:15:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:15:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:16:55 UTC)" executed successfully
2025-04-25 17:16:02,178 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:02,178 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:02,178 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:02,178 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:02,178 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:02,178 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:02,178 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:02,178 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:02,179 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:02,179 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:02,179 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:02,179 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:02,179 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:02,179 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:12,333 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:12,333 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:12,334 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:12,334 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:12,334 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:12,334 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:12,334 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:12,334 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:12,334 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:12,334 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:12,335 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:12,335 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:12,335 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:12,335 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:22,488 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:22,488 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:22,488 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:22,488 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:22,488 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:22,488 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:22,488 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:22,488 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:22,489 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:22,489 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:22,489 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:22,489 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:22,489 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:22,490 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:32,642 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:32,642 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:32,642 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:32,642 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:32,642 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:32,642 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:32,642 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:32,642 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:32,643 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:32,643 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:32,643 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:32,643 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:32,643 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:32,643 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:42,796 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:42,796 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:42,796 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:42,796 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:42,796 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:42,797 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:42,797 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:42,797 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:42,797 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:42,797 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:42,797 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:42,797 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:42,798 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:42,798 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:52,953 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:16:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:16:52,953 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:16:52,953 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:16:52,954 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:16:52,954 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:16:52,954 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:16:52,954 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:16:52,954 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:16:52,954 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:16:52,955 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:16:52,955 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:16:52,955 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:16:52,956 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:16:52,956 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:16:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:16:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:17:55.934797+00:00 (in 59.999273 seconds)
2025-04-25 17:16:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:17:55 UTC)" (scheduled at 2025-04-25 07:16:55.934797+00:00)
2025-04-25 17:16:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:16:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:16:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:16:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:17:55 UTC)" executed successfully
2025-04-25 17:17:03,108 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:03,108 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:03,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:03,109 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:03,109 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:03,109 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:03,109 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:03,109 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:03,109 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:03,109 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:03,110 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:03,110 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:03,110 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:03,110 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:13,262 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:13,262 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:13,262 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:13,262 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:13,262 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:13,262 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:13,263 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:13,263 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:13,263 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:13,263 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:13,263 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:13,263 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:13,263 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:13,264 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:23,417 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:23,417 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:23,417 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:23,417 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:23,417 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:23,417 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:23,418 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:23,418 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:23,418 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:23,418 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:23,419 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:23,419 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:23,419 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:23,419 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:33,571 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:33,571 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:33,571 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:33,571 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:33,571 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:33,571 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:33,571 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:33,571 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:33,571 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:33,572 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:33,572 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:33,572 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:33,572 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:33,572 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:43,725 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:43,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:43,726 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:43,726 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:43,726 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:43,726 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:43,726 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:43,726 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:43,726 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:43,726 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:43,727 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:43,727 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:43,727 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:43,727 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:53,879 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:17:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:17:53,880 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:17:53,880 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:17:53,880 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:17:53,880 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:17:53,880 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:17:53,880 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:17:53,881 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:17:53,881 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:17:53,881 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:17:53,882 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:17:53,882 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:17:53,882 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:17:53,882 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:17:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:17:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:18:55.934797+00:00 (in 59.998768 seconds)
2025-04-25 17:17:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:18:55 UTC)" (scheduled at 2025-04-25 07:17:55.934797+00:00)
2025-04-25 17:17:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:17:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:17:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:17:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:18:55 UTC)" executed successfully
2025-04-25 17:18:04,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:04,035 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:04,036 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:04,036 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:04,036 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:04,036 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:04,036 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:04,036 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:04,036 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:04,036 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:04,037 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:04,037 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:04,037 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:04,037 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:14,189 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:14,189 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:14,189 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:14,189 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:14,189 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:14,189 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:14,190 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:14,190 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:14,190 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:14,190 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:14,191 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:14,191 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:14,191 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:14,191 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:24,344 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:24,344 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:24,344 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:24,345 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:24,345 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:24,345 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:24,345 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:24,345 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:24,345 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:24,346 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:24,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:24,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:24,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:24,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:34,500 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:34,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:34,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:34,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:34,500 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:34,500 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:34,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:34,500 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:34,500 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:34,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:34,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:34,501 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:34,501 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:34,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:44,654 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:44,654 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:44,654 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:44,654 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:44,654 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:44,654 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:44,655 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:44,655 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:44,655 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:44,655 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:44,655 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:44,655 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:44,655 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:44,656 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:54,808 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:18:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:18:54,808 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:18:54,809 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:18:54,809 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:18:54,809 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:18:54,809 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:18:54,809 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:18:54,809 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:18:54,809 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:18:54,809 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:18:54,810 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:18:54,810 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:18:54,810 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:18:54,810 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:18:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:18:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:19:55.934797+00:00 (in 59.999463 seconds)
2025-04-25 17:18:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:19:55 UTC)" (scheduled at 2025-04-25 07:18:55.934797+00:00)
2025-04-25 17:18:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:18:55,941 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:18:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:18:55,942 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:19:55 UTC)" executed successfully
2025-04-25 17:19:04,962 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:04,963 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:04,963 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:04,963 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:04,963 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:04,963 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:04,963 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:04,963 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:04,963 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:04,964 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:04,964 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:04,964 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:04,964 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:04,964 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:15,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:15,117 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:15,117 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:15,117 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:15,117 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:15,118 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:15,118 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:15,118 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:15,118 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:15,118 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:15,118 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:15,118 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:15,119 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:15,119 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:25,271 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:25,271 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:25,271 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:25,271 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:25,271 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:25,272 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:25,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:25,272 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:25,272 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:25,272 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:25,272 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:25,272 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:25,273 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:25,273 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:35,427 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:35,427 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:35,427 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:35,427 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:35,427 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:35,427 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:35,427 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:35,427 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:35,427 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:35,428 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:35,428 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:35,428 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:35,428 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:35,428 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:45,581 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:45,581 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:45,581 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:45,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:45,582 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:45,582 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:45,582 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:45,582 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:45,582 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:45,582 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:45,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:45,582 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:45,583 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:45,583 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:55,735 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:19:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:19:55,735 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:19:55,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:19:55,735 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:19:55,736 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:19:55,736 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:19:55,736 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:19:55,736 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:19:55,736 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:19:55,736 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:19:55,737 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:19:55,737 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:19:55,737 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:19:55,737 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:19:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:19:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:20:55.934797+00:00 (in 59.998722 seconds)
2025-04-25 17:19:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:20:55 UTC)" (scheduled at 2025-04-25 07:19:55.934797+00:00)
2025-04-25 17:19:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:19:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:19:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:19:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:20:55 UTC)" executed successfully
2025-04-25 17:20:05,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:05,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:05,890 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:05,890 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:05,890 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:05,890 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:05,890 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:05,890 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:05,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:05,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:05,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:05,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:05,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:05,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:20:16,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:16,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:16,046 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:16,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:16,046 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:16,047 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:16,047 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:16,047 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:16,047 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:16,047 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:16,047 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:16,047 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:16,048 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:16,048 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:20:26,201 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:26,201 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:26,201 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:26,201 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:26,201 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:26,201 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:26,201 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:26,202 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:26,202 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:26,202 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:26,202 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:26,202 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:26,202 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:26,202 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:20:36,360 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:36,360 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:36,360 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:36,360 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:36,361 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:36,361 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:36,361 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:36,361 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:36,361 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:36,361 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:36,361 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:36,362 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:36,362 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:36,362 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:20:46,516 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:46,516 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:46,516 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:46,516 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:46,516 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:46,516 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:46,516 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:46,516 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:46,516 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:46,517 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:46,517 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:46,517 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:46,517 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:46,517 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:20:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:20:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:21:55.934797+00:00 (in 59.998074 seconds)
2025-04-25 17:20:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:21:55 UTC)" (scheduled at 2025-04-25 07:20:55.934797+00:00)
2025-04-25 17:20:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:20:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:20:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:20:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:21:55 UTC)" executed successfully
2025-04-25 17:20:56,670 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:20:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:20:56,671 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:20:56,671 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:20:56,671 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:20:56,671 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:20:56,671 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:20:56,671 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:20:56,671 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:20:56,671 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:20:56,672 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:20:56,672 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:20:56,672 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:20:56,672 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:20:56,672 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:06,825 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:06,825 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:06,825 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:06,825 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:06,825 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:06,825 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:06,825 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:06,825 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:06,826 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:06,826 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:06,826 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:06,826 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:06,826 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:06,826 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:16,983 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:16,984 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:16,984 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:16,984 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:16,984 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:16,984 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:16,984 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:16,984 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:16,984 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:16,985 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:16,985 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:16,985 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:16,985 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:16,985 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:27,141 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:27,141 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:27,141 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:27,141 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:27,141 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:27,141 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:27,141 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:27,141 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:27,142 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:27,142 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:27,142 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:27,142 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:27,142 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:27,142 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:37,303 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:37,303 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:37,303 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:37,303 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:37,303 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:37,303 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:37,303 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:37,303 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:37,304 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:37,304 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:37,304 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:37,304 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:37,304 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:37,304 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:47,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:47,457 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:47,457 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:47,457 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:47,458 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:47,458 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:47,458 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:47,458 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:47,458 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:47,458 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:47,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:47,459 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:47,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:47,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:21:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:21:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:22:55.934797+00:00 (in 59.999108 seconds)
2025-04-25 17:21:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:22:55 UTC)" (scheduled at 2025-04-25 07:21:55.934797+00:00)
2025-04-25 17:21:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:21:55,945 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:21:55,945 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:21:55,946 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:22:55 UTC)" executed successfully
2025-04-25 17:21:57,633 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:21:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:21:57,633 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:21:57,633 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:21:57,633 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:21:57,633 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:21:57,633 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:21:57,633 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:21:57,633 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:21:57,634 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:21:57,634 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:21:57,634 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:21:57,634 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:21:57,634 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:21:57,634 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:07,800 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:07,800 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:07,800 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:07,800 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:07,800 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:07,800 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:07,801 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:07,801 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:07,801 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:07,801 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:07,802 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:07,802 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:07,802 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:07,802 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:17,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:17,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:17,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:17,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:17,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:17,956 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:17,956 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:17,956 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:17,956 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:17,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:17,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:17,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:17,957 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:17,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:28,110 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:28,111 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:28,111 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:28,111 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:28,111 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:28,111 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:28,111 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:28,111 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:28,111 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:28,112 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:28,112 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:28,112 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:28,112 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:28,112 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:38,266 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:38,266 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:38,266 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:38,266 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:38,267 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:38,267 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:38,267 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:38,267 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:38,267 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:38,267 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:38,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:38,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:38,268 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:38,268 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:48,424 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:48,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:48,424 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:48,424 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:48,424 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:48,424 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:48,424 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:48,425 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:48,425 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:48,425 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:48,425 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:48,425 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:48,425 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:48,425 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:22:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:22:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:23:55.934797+00:00 (in 59.997621 seconds)
2025-04-25 17:22:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:23:55 UTC)" (scheduled at 2025-04-25 07:22:55.934797+00:00)
2025-04-25 17:22:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:22:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:22:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:22:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:23:55 UTC)" executed successfully
2025-04-25 17:22:58,579 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:22:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:22:58,579 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:22:58,579 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:22:58,579 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:22:58,580 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:22:58,580 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:22:58,580 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:22:58,580 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:22:58,580 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:22:58,580 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:22:58,581 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:22:58,581 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:22:58,581 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:22:58,581 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:08,733 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:08,734 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:08,734 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:08,734 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:08,734 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:08,734 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:08,734 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:08,734 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:08,734 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:08,735 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:08,735 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:08,735 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:08,735 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:08,735 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:18,914 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:18,915 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:18,915 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:18,915 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:18,915 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:18,915 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:18,915 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:18,915 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:18,915 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:18,916 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:23:19,072 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BA35C0>
2025-04-25 17:23:19,072 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:23:19,231 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C84A70>
2025-04-25 17:23:19,231 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:19,231 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:19,231 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:19,231 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:19,231 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:29,387 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:29,387 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:29,387 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:29,387 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:29,387 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:29,387 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:29,387 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:29,387 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:29,388 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:29,388 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:29,388 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:29,388 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:29,388 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:29,388 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:39,545 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:39,545 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:39,545 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:39,545 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:39,545 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:39,545 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:39,545 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:39,545 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:39,546 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:39,546 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:39,546 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:39,546 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:39,546 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:39,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:49,702 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:49,703 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:49,703 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:49,703 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:49,703 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:49,703 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:49,703 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:49,703 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:49,703 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:49,703 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:49,704 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:49,704 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:49,704 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:49,704 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:23:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:23:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:24:55.934797+00:00 (in 59.998573 seconds)
2025-04-25 17:23:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:24:55 UTC)" (scheduled at 2025-04-25 07:23:55.934797+00:00)
2025-04-25 17:23:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:23:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:23:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:23:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:24:55 UTC)" executed successfully
2025-04-25 17:23:59,862 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:23:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:23:59,862 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:23:59,862 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:23:59,862 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:23:59,862 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:23:59,862 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:23:59,863 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:23:59,863 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:23:59,863 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:23:59,863 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:23:59,863 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:23:59,863 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:23:59,863 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:23:59,864 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:10,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:24:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:24:10,020 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:24:10,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:24:10,020 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:24:10,020 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:24:10,021 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:24:10,021 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:24:10,021 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:24:10,021 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:24:10,021 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:24:10,022 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:24:10,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:24:10,022 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:24:10,022 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:20,179 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:24:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:24:20,179 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:24:20,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:24:20,179 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:24:20,180 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:24:20,180 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:24:20,180 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:24:20,180 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:24:20,180 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:24:20,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:24:20,180 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:24:20,180 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:24:20,181 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:24:20,181 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:30,342 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:24:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:24:30,342 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:24:30,342 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:24:30,342 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:24:30,342 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:24:30,342 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:24:30,342 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:24:30,342 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:24:30,342 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:24:30,343 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:24:30,343 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:24:30,343 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:24:30,343 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:24:30,343 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:40,500 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:24:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:24:40,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:24:40,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:24:40,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:24:40,500 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:24:40,500 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:24:40,500 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:24:40,501 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:24:40,501 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:24:40,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:24:40,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:24:40,501 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:24:40,501 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:24:40,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:50,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:24:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:24:50,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:24:50,659 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:24:50,659 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:24:50,659 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:24:50,659 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:24:50,659 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:24:50,659 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:24:50,659 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:24:50,660 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:24:50,660 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:24:50,660 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:24:50,660 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:24:50,660 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:24:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:24:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:25:55.934797+00:00 (in 59.998074 seconds)
2025-04-25 17:24:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:25:55 UTC)" (scheduled at 2025-04-25 07:24:55.934797+00:00)
2025-04-25 17:24:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:24:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:24:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:24:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:25:55 UTC)" executed successfully
2025-04-25 17:25:00,816 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:00,816 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:00,816 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:00,816 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:00,816 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:00,816 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:00,816 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:00,817 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:00,817 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:00,817 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:00,817 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:00,817 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:00,817 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:00,817 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:10,975 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:10,975 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:10,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:10,975 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:10,975 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:10,975 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:10,976 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:10,976 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:10,976 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:10,976 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:10,976 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:10,976 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:10,976 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:10,976 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:21,132 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:21,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:21,133 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:21,133 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:21,133 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:21,133 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:21,133 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:21,133 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:21,133 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:21,133 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:21,134 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:21,134 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:21,134 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:21,134 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:31,294 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:31,295 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:31,295 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:31,295 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:31,295 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:31,295 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:31,295 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:31,295 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:31,295 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:31,296 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:31,296 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:31,296 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:31,296 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:31,296 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:41,453 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:41,453 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:41,453 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:41,453 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:41,453 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:41,453 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:41,453 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:41,453 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:41,454 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:41,454 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:41,454 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:41,454 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:41,454 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:41,454 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:51,612 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:25:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:25:51,612 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:25:51,613 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:25:51,613 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:25:51,613 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:25:51,613 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:25:51,613 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:25:51,613 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:25:51,613 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:25:51,613 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:25:51,614 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:25:51,614 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:25:51,614 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:25:51,614 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:25:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:25:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:26:55.934797+00:00 (in 59.998632 seconds)
2025-04-25 17:25:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:26:55 UTC)" (scheduled at 2025-04-25 07:25:55.934797+00:00)
2025-04-25 17:25:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:25:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:25:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:25:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:26:55 UTC)" executed successfully
2025-04-25 17:26:01,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:01,770 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:01,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:01,770 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:01,770 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:01,770 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:01,770 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:01,770 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:01,770 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:01,771 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:01,771 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:01,771 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:01,771 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:01,771 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:11,931 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:11,932 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:11,932 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:11,932 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:11,932 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:11,932 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:11,932 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:11,932 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:11,932 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:11,933 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:11,933 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:11,933 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:11,933 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:11,933 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:22,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:22,089 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:22,089 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:22,089 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:22,089 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:22,090 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:22,090 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:22,090 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:22,090 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:22,090 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:22,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:22,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:22,091 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:22,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:32,249 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:32,250 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:32,250 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:32,250 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:32,250 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:32,250 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:32,250 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:32,250 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:32,250 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:32,251 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:32,251 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:32,251 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:32,251 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:32,251 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:42,410 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:42,410 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:42,410 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:42,410 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:42,410 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:42,411 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:42,411 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:42,411 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:42,411 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:42,411 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:42,411 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:42,411 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:42,412 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:42,412 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:52,567 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:26:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:26:52,567 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:26:52,567 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:26:52,568 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:26:52,568 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:26:52,568 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:26:52,568 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:26:52,568 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:26:52,568 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:26:52,568 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:26:52,569 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:26:52,569 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:26:52,569 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:26:52,569 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:26:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:26:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:27:55.934797+00:00 (in 59.998456 seconds)
2025-04-25 17:26:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:27:55 UTC)" (scheduled at 2025-04-25 07:26:55.934797+00:00)
2025-04-25 17:26:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:26:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:26:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:26:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:27:55 UTC)" executed successfully
2025-04-25 17:27:02,727 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:02,728 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:02,728 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:02,728 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:02,728 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:02,728 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:02,728 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:02,728 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:02,728 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:02,728 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:02,729 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:02,729 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:02,729 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:02,729 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:12,884 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:12,884 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:12,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:12,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:12,885 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:12,885 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:12,885 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:12,885 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:12,885 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:12,886 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:12,886 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:12,886 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:12,886 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:12,886 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:23,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:23,046 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:23,046 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:23,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:23,046 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:23,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:23,046 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:23,046 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:23,046 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:23,047 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:23,047 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:23,047 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:23,048 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:23,048 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:33,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:33,204 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:33,204 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:33,204 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:33,204 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:33,204 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:33,204 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:33,204 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:33,205 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:33,205 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:33,205 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:33,205 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:33,205 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:33,205 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:43,369 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:43,369 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:43,369 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:43,369 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:43,369 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:43,369 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:43,369 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:43,369 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:43,370 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:43,370 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:43,370 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:43,370 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:43,370 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:43,370 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:53,527 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:27:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:27:53,528 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:27:53,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:27:53,528 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:27:53,528 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:27:53,528 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:27:53,528 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:27:53,528 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:27:53,528 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:27:53,529 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:27:53,529 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:27:53,529 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:27:53,529 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:27:53,529 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:27:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:27:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:28:55.934797+00:00 (in 59.998025 seconds)
2025-04-25 17:27:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:28:55 UTC)" (scheduled at 2025-04-25 07:27:55.934797+00:00)
2025-04-25 17:27:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:27:55,945 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:27:55,945 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:27:55,946 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:28:55 UTC)" executed successfully
2025-04-25 17:28:03,686 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:03,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:03,686 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:03,686 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:03,687 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:03,687 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:03,687 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:03,687 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:03,687 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:03,687 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:03,687 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:03,687 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:03,688 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:03,688 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:13,846 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:13,846 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:13,846 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:13,847 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:13,847 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:13,847 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:13,847 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:13,847 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:13,847 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:13,847 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:13,848 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:13,848 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:13,848 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:13,848 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:24,006 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:24,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:24,007 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:24,007 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:24,007 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:24,007 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:24,007 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:24,007 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:24,007 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:24,008 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:24,008 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:24,008 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:24,008 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:24,008 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:34,167 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:34,168 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:34,168 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:34,168 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:34,168 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:34,168 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:34,168 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:34,168 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:34,168 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:34,169 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:34,169 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:34,169 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:34,169 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:34,169 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:44,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:44,325 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:44,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:44,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:44,325 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:44,325 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:44,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:44,326 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:44,326 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:44,326 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:44,326 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:44,326 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:44,327 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:44,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:54,483 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:28:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:28:54,483 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:28:54,483 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:28:54,483 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:28:54,483 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:28:54,483 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:28:54,483 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:28:54,483 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:28:54,484 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:28:54,484 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:28:54,484 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:28:54,484 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:28:54,484 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:28:54,484 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:28:55,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:28:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:29:55.934797+00:00 (in 59.997407 seconds)
2025-04-25 17:28:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:29:55 UTC)" (scheduled at 2025-04-25 07:28:55.934797+00:00)
2025-04-25 17:28:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:28:55,945 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:28:55,945 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:28:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:29:55 UTC)" executed successfully
2025-04-25 17:29:04,639 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:04,639 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:04,640 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:04,640 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:04,640 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:04,640 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:04,640 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:04,640 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:04,640 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:04,640 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:04,641 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:04,641 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:04,641 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:04,641 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:14,796 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:14,797 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:14,797 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:14,797 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:14,797 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:14,797 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:14,797 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:14,797 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:14,798 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:14,798 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:14,798 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:14,798 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:14,798 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:14,798 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:24,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:24,955 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:24,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:24,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:24,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:24,955 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:24,955 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:24,956 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:24,956 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:24,956 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:24,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:24,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:24,957 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:24,957 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:35,115 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:35,115 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:35,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:35,115 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:35,115 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:35,115 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:35,116 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:35,116 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:35,116 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:35,116 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:35,116 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:35,116 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:35,116 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:35,116 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:45,272 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:45,272 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:45,272 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:45,272 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:45,272 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:45,272 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:45,272 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:45,272 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:45,272 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:45,273 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:45,273 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:45,273 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:45,273 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:45,273 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:55,430 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:29:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:29:55,430 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:29:55,430 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:29:55,430 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:29:55,430 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:29:55,430 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:29:55,430 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:29:55,430 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:29:55,430 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:29:55,431 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:29:55,431 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:29:55,431 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:29:55,431 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:29:55,431 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:29:55,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:29:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:30:55.934797+00:00 (in 59.997442 seconds)
2025-04-25 17:29:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:30:55 UTC)" (scheduled at 2025-04-25 07:29:55.934797+00:00)
2025-04-25 17:29:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:29:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:29:55,945 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:29:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:30:55 UTC)" executed successfully
2025-04-25 17:30:05,590 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:05,591 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:05,591 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:05,591 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:05,591 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:05,591 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:05,591 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:05,591 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:05,591 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:05,592 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:05,592 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:05,592 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:05,592 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:05,592 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:30:15,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:15,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:15,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:15,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:15,749 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:15,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:15,749 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:15,749 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:15,749 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:15,750 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:15,750 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:15,750 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:15,750 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:15,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:30:25,907 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:25,907 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:25,907 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:25,907 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:25,907 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:25,907 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:25,907 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:25,907 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:25,908 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:25,908 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:25,908 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:25,908 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:25,908 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:25,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:30:36,064 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:36,064 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:36,064 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:36,065 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:36,065 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:36,065 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:36,065 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:36,065 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:36,065 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:36,065 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:36,066 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:36,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:36,066 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:36,066 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:30:46,224 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:46,224 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:46,224 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:46,225 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:46,225 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:46,225 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:46,225 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:46,225 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:46,225 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:46,225 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:46,226 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:46,226 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:46,226 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:46,226 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:30:55,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:30:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:31:55.934797+00:00 (in 59.996859 seconds)
2025-04-25 17:30:55,938 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:31:55 UTC)" (scheduled at 2025-04-25 07:30:55.934797+00:00)
2025-04-25 17:30:55,938 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:30:55,959 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:30:55,959 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:30:55,959 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:31:55 UTC)" executed successfully
2025-04-25 17:30:56,382 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:30:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:30:56,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:30:56,383 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:30:56,383 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:30:56,383 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:30:56,383 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:30:56,383 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:30:56,383 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:30:56,383 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:30:56,384 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:30:56,384 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:30:56,384 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:30:56,384 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:30:56,384 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:06,541 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:06,541 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:06,541 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:06,541 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:06,541 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:06,541 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:06,541 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:06,542 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:06,542 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:06,542 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:06,542 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:06,542 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:06,543 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:06,543 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:16,699 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:16,699 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:16,699 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:16,699 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:16,699 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:16,699 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:16,699 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:16,699 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:16,699 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:16,700 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:16,700 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:16,700 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:16,700 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:16,700 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:26,856 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:26,856 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:26,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:26,856 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:26,856 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:26,856 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:26,856 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:26,856 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:26,856 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:26,857 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:26,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:26,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:26,857 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:26,857 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:37,013 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:37,014 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:37,014 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:37,014 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:37,014 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:37,014 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:37,014 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:37,014 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:37,014 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:37,015 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:37,015 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:37,015 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:37,015 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:37,015 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:47,173 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:47,173 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:47,173 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:47,173 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:47,173 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:47,173 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:47,173 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:47,173 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:47,173 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:47,174 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:47,174 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:47,174 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:47,174 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:47,174 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:31:55,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:31:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:32:55.934797+00:00 (in 59.997356 seconds)
2025-04-25 17:31:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:32:55 UTC)" (scheduled at 2025-04-25 07:31:55.934797+00:00)
2025-04-25 17:31:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:31:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:31:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:31:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:32:55 UTC)" executed successfully
2025-04-25 17:31:57,331 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:31:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:31:57,332 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:31:57,332 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:31:57,332 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:31:57,332 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:31:57,332 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:31:57,332 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:31:57,332 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:31:57,332 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:31:57,333 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:31:57,333 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:31:57,333 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:31:57,333 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:31:57,333 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:07,490 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:07,490 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:07,490 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:07,490 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:07,490 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:07,490 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:07,491 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:07,491 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:07,491 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:07,491 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:07,491 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:07,491 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:07,492 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:07,492 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:17,648 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:17,648 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:17,649 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:17,649 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:17,649 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:17,649 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:17,649 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:17,649 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:17,649 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:17,650 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:17,650 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:17,651 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:17,651 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:17,651 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:27,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:27,813 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:27,813 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:27,813 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:27,813 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:27,814 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:27,814 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:27,814 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:27,814 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:27,814 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:27,814 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:27,815 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:27,815 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:27,815 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:37,973 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:37,973 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:37,973 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:37,973 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:37,973 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:37,973 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:37,973 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:37,973 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:37,974 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:37,974 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:37,974 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:37,974 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:37,974 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:37,974 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:48,131 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:48,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:48,131 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:48,131 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:48,131 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:48,131 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:48,131 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:48,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:48,132 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:48,132 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:48,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:48,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:48,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:48,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:32:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:32:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:33:55.934797+00:00 (in 59.998450 seconds)
2025-04-25 17:32:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:33:55 UTC)" (scheduled at 2025-04-25 07:32:55.934797+00:00)
2025-04-25 17:32:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:32:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:32:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:32:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:33:55 UTC)" executed successfully
2025-04-25 17:32:58,290 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:32:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:32:58,290 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:32:58,290 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:32:58,290 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:32:58,290 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:32:58,290 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:32:58,290 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:32:58,290 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:32:58,290 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:32:58,291 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:32:58,291 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:32:58,291 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:32:58,291 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:32:58,291 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:08,448 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:08,449 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:08,449 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:08,449 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:08,449 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:08,449 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:08,449 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:08,449 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:08,450 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:08,450 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:08,450 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:08,450 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:08,450 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:08,450 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:18,608 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:18,608 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:18,608 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:18,608 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:18,609 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:18,609 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:18,609 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:18,609 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:18,609 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:18,609 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:18,609 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:18,609 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:18,610 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:18,610 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:28,767 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:28,768 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:28,768 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:28,768 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:28,768 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:28,768 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:28,768 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:28,768 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:28,768 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:28,769 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:28,769 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:28,769 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:28,769 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:28,769 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:38,929 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:38,929 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:38,929 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:38,929 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:38,930 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:38,930 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:38,930 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:38,930 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:38,930 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:38,931 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:38,931 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:38,931 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:38,931 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:38,931 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:49,089 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:49,090 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:49,090 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:49,090 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:49,090 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:49,090 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:49,090 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:49,090 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:49,091 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:49,091 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:49,091 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:49,091 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:49,092 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:49,092 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:33:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:33:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:34:55.934797+00:00 (in 59.997732 seconds)
2025-04-25 17:33:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:34:55 UTC)" (scheduled at 2025-04-25 07:33:55.934797+00:00)
2025-04-25 17:33:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:33:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:33:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:33:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:34:55 UTC)" executed successfully
2025-04-25 17:33:59,247 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:33:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:33:59,247 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:33:59,247 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:33:59,247 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:33:59,248 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:33:59,248 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:33:59,248 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:33:59,248 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:33:59,248 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:33:59,248 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:33:59,248 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:33:59,249 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:33:59,249 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:33:59,249 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:09,407 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:34:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:34:09,407 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:34:09,407 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:34:09,407 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:34:09,407 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:34:09,407 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:34:09,408 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:34:09,408 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:34:09,408 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:34:09,408 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:34:09,408 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:34:09,408 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:34:09,408 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:34:09,409 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:19,564 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:34:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:34:19,564 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:34:19,564 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:34:19,564 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:34:19,564 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:34:19,564 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:34:19,565 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:34:19,565 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:34:19,565 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:34:19,565 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:34:19,565 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:34:19,565 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:34:19,565 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:34:19,566 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:29,730 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:34:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:34:29,731 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:34:29,731 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:34:29,731 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:34:29,731 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:34:29,731 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:34:29,731 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:34:29,731 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:34:29,732 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:34:29,732 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:34:29,732 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:34:29,732 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:34:29,733 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:34:29,733 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:39,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:34:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:34:39,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:34:39,889 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:34:39,889 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:34:39,890 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:34:39,890 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:34:39,890 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:34:39,890 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:34:39,890 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:34:39,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:34:39,890 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:34:39,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:34:39,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:34:39,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:50,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:34:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:34:50,047 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:34:50,047 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:34:50,047 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:34:50,047 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:34:50,048 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:34:50,048 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:34:50,048 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:34:50,048 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:34:50,048 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:34:50,048 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:34:50,048 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:34:50,049 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:34:50,049 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:34:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:34:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:35:55.934797+00:00 (in 59.998326 seconds)
2025-04-25 17:34:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:35:55 UTC)" (scheduled at 2025-04-25 07:34:55.934797+00:00)
2025-04-25 17:34:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:34:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:34:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:34:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:35:55 UTC)" executed successfully
2025-04-25 17:35:00,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:00,205 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:00,205 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:00,205 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:00,205 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:00,205 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:00,205 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:00,205 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:00,205 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:00,206 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:00,206 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:00,206 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:00,206 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:00,206 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:10,367 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:10,367 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:10,367 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:10,367 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:10,368 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:10,368 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:10,368 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:10,368 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:10,368 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:10,368 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:10,369 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:10,369 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:10,369 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:10,369 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:20,530 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:20,530 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:20,530 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:20,530 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:20,530 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:20,530 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:20,530 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:20,530 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:20,530 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:20,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:20,531 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:20,531 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:20,531 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:20,531 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:30,688 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:30,688 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:30,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:30,688 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:30,688 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:30,688 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:30,688 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:30,688 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:30,688 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:30,689 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:30,689 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:30,689 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:30,689 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:30,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:40,848 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:40,848 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:40,848 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:40,848 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:40,848 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:40,849 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:40,849 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:40,849 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:40,849 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:40,849 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:40,849 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:40,850 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:40,850 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:40,850 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:51,006 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:51,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:51,006 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:51,006 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:51,006 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:51,006 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:51,007 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:35:51,007 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:35:51,007 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489889}`
2025-04-25 17:35:51,007 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:51,007 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:51,007 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:51,008 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:51,008 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:54,586 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3429'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:54,586 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:54,586 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:54,587 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:54,587 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:54,587 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:54,587 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489889, 'callback_query': {'id': '7022623324869639304', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-25 17:35:54,587 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489889]
2025-04-25 17:35:54,587 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324869639304', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489889)
2025-04-25 17:35:54,588 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 3
2025-04-25 17:35:54,588 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489890}`
2025-04-25 17:35:54,588 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:54,588 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:54,588 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:54,589 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:54,589 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:55,779 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:35:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3433'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:35:55,779 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:35:55,779 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:35:55,779 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:35:55,779 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:35:55,779 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:35:55,780 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489890, 'callback_query': {'id': '7022623325046640064', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:35:55,780 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489890]
2025-04-25 17:35:55,780 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325046640064', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489890)
2025-04-25 17:35:55,780 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 3
2025-04-25 17:35:55,781 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489891}`
2025-04-25 17:35:55,781 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:35:55,781 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:35:55,781 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:35:55,781 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:35:55,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:35:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:35:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:36:55.934797+00:00 (in 59.998588 seconds)
2025-04-25 17:35:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:36:55 UTC)" (scheduled at 2025-04-25 07:35:55.934797+00:00)
2025-04-25 17:35:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:35:55,960 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:35:55,960 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:35:55,961 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:36:55 UTC)" executed successfully
2025-04-25 17:36:00,597 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'331'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:00,598 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:00,598 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:00,598 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:00,598 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:00,598 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:00,598 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489891, 'message': {'message_id': 786, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745566560, 'text': '3:44'}}]`
2025-04-25 17:36:00,598 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489891]
2025-04-25 17:36:00,598 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=786, supergroup_chat_created=False, text='3:44'), update_id=829489891)
2025-04-25 17:36:00,599 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 3
2025-04-25 17:36:00,599 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл время оповещения об уходе: 3:44
2025-04-25 17:36:00,599 - bot.handlers - INFO - Время оповещения об уходе успешно нормализовано: 03:44
2025-04-25 17:36:00,601 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55"]'}
2025-04-25 17:36:00,604 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET departure_notification_times = :departure_notification_times
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:36:00,636 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:36:00,637 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:36:00,637 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:36:00,638 - bot.handlers - ERROR - Не удалось обновить время оповещения об уходе для пользователя 1635081908
2025-04-25 17:36:00,638 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-25 17:36:00,639 - httpcore.connection - DEBUG - close.started
2025-04-25 17:36:00,639 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:36:00,639 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:36:00,640 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:00,640 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:00,640 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:00,640 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:00,641 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:00,641 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:00,793 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105CDC490>
2025-04-25 17:36:00,793 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:36:00,947 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105B5F680>
2025-04-25 17:36:00,947 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:00,947 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:00,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:00,947 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:00,948 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:01,147 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'579'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:01,148 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:36:01,148 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:01,148 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:01,148 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:01,148 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:01,148 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 787, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745566561, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-25 17:36:10,795 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:10,796 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:10,796 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:10,796 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:10,796 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:10,796 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:10,796 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:36:10,796 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:36:10,797 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:10,797 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:10,797 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:10,797 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:10,797 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:10,797 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:20,954 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:20,954 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:20,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:20,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:20,955 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:20,955 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:20,955 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:36:20,955 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:36:20,955 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:20,955 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:20,956 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:20,956 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:20,956 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:20,956 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:31,112 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:31,112 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:31,112 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:31,112 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:31,113 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:31,113 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:31,113 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:36:31,113 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:36:31,113 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:31,113 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:31,113 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:31,113 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:31,114 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:31,114 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:41,269 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:41,269 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:41,269 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:41,269 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:41,269 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:41,269 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:41,269 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:36:41,269 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:36:41,270 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:41,270 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:41,270 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:41,270 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:41,270 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:41,270 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:51,426 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:36:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:36:51,427 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:36:51,427 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:36:51,427 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:36:51,427 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:36:51,427 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:36:51,427 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:36:51,427 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:36:51,427 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:36:51,428 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:36:51,428 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:36:51,428 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:36:51,428 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:36:51,428 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:36:55,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:36:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:37:55.934797+00:00 (in 59.997329 seconds)
2025-04-25 17:36:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:37:55 UTC)" (scheduled at 2025-04-25 07:36:55.934797+00:00)
2025-04-25 17:36:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:36:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:36:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:36:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:37:55 UTC)" executed successfully
2025-04-25 17:37:01,585 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:01,585 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:01,585 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:01,585 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:01,585 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:01,585 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:01,585 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:01,585 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:01,586 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:01,586 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:01,586 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:01,586 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:01,586 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:01,586 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:11,742 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:11,742 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:11,742 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:11,742 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:11,742 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:11,742 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:11,742 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:11,743 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:11,743 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:11,743 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:11,743 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:11,743 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:11,743 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:11,743 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:21,901 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:21,901 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:21,901 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:21,901 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:21,901 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:21,901 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:21,901 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:21,901 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:21,902 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:21,902 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:21,902 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:21,902 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:21,902 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:21,902 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:32,058 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:32,058 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:32,058 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:32,058 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:32,058 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:32,058 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:32,058 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:32,058 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:32,059 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:32,059 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:32,059 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:32,059 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:32,059 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:32,059 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:42,215 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:42,216 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:42,216 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:42,216 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:42,216 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:42,216 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:42,216 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:42,216 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:42,216 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:42,217 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:42,217 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:42,217 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:42,217 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:42,217 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:52,372 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:37:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:37:52,373 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:37:52,373 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:37:52,373 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:37:52,373 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:37:52,373 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:37:52,373 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:37:52,373 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:37:52,373 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:37:52,374 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:37:52,374 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:37:52,374 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:37:52,374 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:37:52,374 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:37:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:37:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:38:55.934797+00:00 (in 59.998688 seconds)
2025-04-25 17:37:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:38:55 UTC)" (scheduled at 2025-04-25 07:37:55.934797+00:00)
2025-04-25 17:37:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:37:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:37:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:37:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:38:55 UTC)" executed successfully
2025-04-25 17:38:02,530 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:02,530 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:02,530 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:02,530 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:02,530 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:02,530 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:02,530 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:02,530 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:02,530 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:02,531 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:02,531 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:02,531 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:02,531 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:02,531 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:12,692 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:12,692 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:12,692 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:12,692 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:12,692 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:12,692 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:12,693 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:12,693 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:12,693 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:12,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:12,693 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:12,694 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:12,694 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:12,694 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:22,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:22,854 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:22,854 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:22,854 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:22,854 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:22,854 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:22,854 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:22,854 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:22,854 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:22,855 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:22,855 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:22,855 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:22,855 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:22,855 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:33,012 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:33,012 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:33,012 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:33,012 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:33,012 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:33,013 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:33,013 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:33,013 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:33,013 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:33,013 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:33,013 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:33,013 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:33,014 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:33,014 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:43,177 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:43,177 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:43,177 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:43,177 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:43,178 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:43,178 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:43,178 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:43,178 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:43,178 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:43,178 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:43,178 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:43,178 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:43,179 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:43,179 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:53,345 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:38:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:38:53,345 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:38:53,345 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:38:53,345 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:38:53,345 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:38:53,345 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:38:53,345 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:38:53,345 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:38:53,346 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:38:53,346 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:38:53,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:38:53,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:38:53,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:38:53,346 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:38:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:38:55,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:39:55.934797+00:00 (in 59.997695 seconds)
2025-04-25 17:38:55,937 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:39:55 UTC)" (scheduled at 2025-04-25 07:38:55.934797+00:00)
2025-04-25 17:38:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:38:55,946 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:38:55,946 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:38:55,947 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:39:55 UTC)" executed successfully
2025-04-25 17:39:03,501 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:03,502 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:03,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:03,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:03,502 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:03,502 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:03,502 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:03,502 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:03,502 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:03,502 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:03,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:03,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:03,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:03,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:13,658 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:13,659 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:13,659 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:13,659 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:13,659 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:13,659 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:13,659 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:13,659 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:13,659 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:13,660 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:13,660 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:13,660 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:13,660 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:13,660 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:23,817 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:23,817 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:23,817 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:23,817 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:23,817 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:23,817 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:23,817 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:23,817 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:23,818 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:23,818 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:23,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:23,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:23,818 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:23,818 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:33,974 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:33,975 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:33,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:33,975 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:33,975 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:33,975 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:33,975 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:33,975 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:33,975 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:33,976 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:33,976 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:33,976 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:33,976 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:33,976 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:44,131 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:44,132 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:44,132 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:44,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:44,132 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:44,132 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:44,132 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:44,132 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:44,132 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:44,132 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:44,133 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:44,133 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:44,133 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:44,133 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:54,291 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:39:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:39:54,291 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:39:54,292 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:39:54,292 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:39:54,292 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:39:54,292 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:39:54,292 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:39:54,292 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:39:54,292 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:39:54,292 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:39:54,446 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BFF750>
2025-04-25 17:39:54,446 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:39:54,602 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BFF650>
2025-04-25 17:39:54,602 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:39:54,602 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:39:54,602 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:39:54,602 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:39:54,602 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:39:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:39:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:40:55.934797+00:00 (in 59.998179 seconds)
2025-04-25 17:39:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:40:55 UTC)" (scheduled at 2025-04-25 07:39:55.934797+00:00)
2025-04-25 17:39:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:39:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:39:55,945 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:39:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:40:55 UTC)" executed successfully
2025-04-25 17:40:04,768 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:04,768 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:04,768 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:04,768 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:04,768 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:04,768 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:04,768 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:04,768 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:04,769 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:04,769 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:04,769 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:04,769 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:04,769 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:04,769 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:14,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:14,926 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:14,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:14,926 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:14,926 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:14,926 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:14,926 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:14,926 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:14,926 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:14,926 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:14,927 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:14,927 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:14,927 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:14,927 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:25,083 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:25,083 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:25,083 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:25,083 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:25,083 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:25,083 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:25,083 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:25,083 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:25,084 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:25,084 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:25,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:25,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:25,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:25,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:35,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:35,239 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:35,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:35,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:35,240 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:35,240 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:35,240 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:35,240 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:35,240 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:35,240 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:35,241 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:35,241 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:35,241 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:35,241 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:45,403 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:45,404 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:45,404 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:45,404 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:45,404 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:45,404 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:45,404 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:45,404 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:45,404 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:45,405 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:45,405 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:45,405 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:45,405 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:45,405 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:55,559 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:40:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:40:55,560 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:40:55,560 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:40:55,560 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:40:55,560 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:40:55,560 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:40:55,560 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:40:55,560 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:40:55,560 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:40:55,561 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:40:55,561 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:40:55,561 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:40:55,561 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:40:55,561 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:40:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:40:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:41:55.934797+00:00 (in 59.998825 seconds)
2025-04-25 17:40:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:41:55 UTC)" (scheduled at 2025-04-25 07:40:55.934797+00:00)
2025-04-25 17:40:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:40:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:40:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:40:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:41:55 UTC)" executed successfully
2025-04-25 17:41:05,722 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:05,723 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:05,723 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:05,723 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:05,723 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:05,723 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:05,723 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:05,723 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:05,723 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:05,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:05,724 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:05,724 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:05,724 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:05,724 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:41:15,886 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:15,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:15,886 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:15,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:15,886 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:15,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:15,886 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:15,886 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:15,887 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:15,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:15,887 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:15,887 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:15,887 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:15,887 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:41:26,045 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:26,045 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:26,045 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:26,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:26,046 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:26,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:26,046 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:26,046 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:26,046 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:26,046 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:26,047 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:26,047 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:26,047 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:26,047 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:41:36,204 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:36 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:36,205 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:36,205 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:36,205 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:36,205 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:36,205 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:36,205 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:36,205 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:36,205 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:36,206 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:36,206 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:36,206 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:36,206 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:36,206 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:41:46,365 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:46,365 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:46,365 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:46,365 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:46,366 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:46,366 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:46,366 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:46,366 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:46,366 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:46,366 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:46,366 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:46,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:46,367 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:46,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:41:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:41:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:42:55.934797+00:00 (in 59.998655 seconds)
2025-04-25 17:41:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:42:55 UTC)" (scheduled at 2025-04-25 07:41:55.934797+00:00)
2025-04-25 17:41:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:41:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:41:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:41:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:42:55 UTC)" executed successfully
2025-04-25 17:41:56,522 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:41:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:41:56,522 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:41:56,523 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:41:56,523 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:41:56,523 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:41:56,523 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:41:56,523 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:41:56,523 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:41:56,523 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:41:56,523 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:41:56,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:41:56,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:41:56,524 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:41:56,524 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:06,686 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:06,686 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:06,686 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:06,686 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:06,686 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:06,686 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:06,686 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:06,686 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:06,687 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:06,687 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:06,687 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:06,687 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:06,687 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:06,687 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:16,848 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:16,849 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:16,849 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:16,849 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:16,849 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:16,849 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:16,849 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:16,849 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:16,849 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:16,850 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:16,850 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:16,850 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:16,850 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:16,850 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:27,003 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:27,003 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:27,003 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:27,003 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:27,004 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:27,004 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:27,004 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:27,004 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:27,004 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:27,004 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:27,004 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:27,004 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:27,005 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:27,005 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:37,160 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:37,161 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:37,161 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:37,161 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:37,161 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:37,161 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:37,161 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:37,161 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:37,161 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:37,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:37,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:37,162 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:37,162 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:37,162 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:47,320 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:47,321 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:47,321 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:47,321 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:47,321 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:47,321 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:47,321 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:47,321 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:47,321 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:47,322 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:47,322 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:47,322 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:47,322 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:47,322 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:42:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:42:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:43:55.934797+00:00 (in 59.998640 seconds)
2025-04-25 17:42:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:43:55 UTC)" (scheduled at 2025-04-25 07:42:55.934797+00:00)
2025-04-25 17:42:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:42:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:42:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:42:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:43:55 UTC)" executed successfully
2025-04-25 17:42:57,476 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:42:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:42:57,477 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:42:57,477 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:42:57,477 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:42:57,477 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:42:57,477 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:42:57,477 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:42:57,477 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:42:57,477 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:42:57,478 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:42:57,478 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:42:57,478 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:42:57,478 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:42:57,478 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:07,636 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:07,636 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:07,636 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:07,636 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:07,636 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:07,636 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:07,636 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:07,637 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:07,637 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:07,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:07,637 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:07,637 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:07,637 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:07,637 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:17,793 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:17,793 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:17,793 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:17,794 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:17,794 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:17,794 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:17,794 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:17,794 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:17,794 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:17,794 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:17,795 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:17,795 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:17,795 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:17,795 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:27,953 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:27,953 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:27,953 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:27,953 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:27,953 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:27,953 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:27,953 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:27,953 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:27,953 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:27,954 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:27,954 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:27,954 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:27,954 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:27,954 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:38,109 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:38,109 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:38,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:38,109 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:38,109 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:38,109 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:38,109 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:38,110 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:38,110 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:38,110 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:38,110 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:38,110 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:38,110 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:38,110 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:48,265 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:48,266 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:48,266 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:48,266 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:48,266 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:48,266 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:48,266 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:48,266 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:48,266 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:48,267 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:48,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:48,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:48,267 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:48,267 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:43:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:43:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:44:55.934797+00:00 (in 59.998887 seconds)
2025-04-25 17:43:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:44:55 UTC)" (scheduled at 2025-04-25 07:43:55.934797+00:00)
2025-04-25 17:43:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:43:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:43:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:43:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:44:55 UTC)" executed successfully
2025-04-25 17:43:58,423 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:43:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:43:58,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:43:58,424 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:43:58,424 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:43:58,424 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:43:58,424 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:43:58,424 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:43:58,424 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:43:58,424 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:43:58,425 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:43:58,425 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:43:58,425 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:43:58,425 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:43:58,425 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:08,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:08,580 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:08,581 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:08,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:08,581 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:08,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:08,581 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:08,581 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:08,581 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:08,581 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:08,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:08,582 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:08,582 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:08,582 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:18,736 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:18,736 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:18,737 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:18,737 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:18,737 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:18,737 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:18,737 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:18,737 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:18,737 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:18,737 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:18,738 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:18,738 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:18,738 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:18,738 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:28,894 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:28,894 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:28,894 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:28,894 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:28,895 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:28,895 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:28,895 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:28,895 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:28,895 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:28,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:28,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:28,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:28,896 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:28,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:39,052 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:39,053 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:39,053 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:39,053 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:39,053 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:39,053 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:39,053 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:39,053 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:39,053 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:39,054 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:39,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:39,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:39,054 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:39,054 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:49,212 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:49,212 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:49,212 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:49,212 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:49,212 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:49,212 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:49,212 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:49,212 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:49,213 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:49,213 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:49,213 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:49,213 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:49,213 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:49,213 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:44:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:44:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:45:55.934797+00:00 (in 59.998074 seconds)
2025-04-25 17:44:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:45:55 UTC)" (scheduled at 2025-04-25 07:44:55.934797+00:00)
2025-04-25 17:44:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:44:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:44:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:44:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:45:55 UTC)" executed successfully
2025-04-25 17:44:59,369 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:44:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:44:59,369 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:44:59,369 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:44:59,369 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:44:59,369 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:44:59,370 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:44:59,370 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:44:59,370 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:44:59,370 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:44:59,370 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:44:59,370 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:44:59,370 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:44:59,371 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:44:59,371 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:09,526 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:45:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:45:09,526 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:45:09,526 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:45:09,526 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:45:09,526 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:45:09,526 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:45:09,527 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:45:09,527 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:45:09,527 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:45:09,527 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:45:09,527 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:45:09,527 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:45:09,527 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:45:09,528 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:19,687 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:45:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:45:19,688 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:45:19,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:45:19,688 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:45:19,688 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:45:19,688 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:45:19,688 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:45:19,688 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:45:19,688 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:45:19,689 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:45:19,689 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:45:19,689 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:45:19,689 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:45:19,689 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:29,846 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:45:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:45:29,846 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:45:29,846 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:45:29,846 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:45:29,846 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:45:29,846 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:45:29,846 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:45:29,846 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:45:29,847 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:45:29,847 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:45:29,847 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:45:29,847 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:45:29,847 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:45:29,847 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:40,006 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:45:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:45:40,006 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:45:40,006 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:45:40,006 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:45:40,006 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:45:40,006 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:45:40,006 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:45:40,006 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:45:40,006 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:45:40,007 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:45:40,007 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:45:40,007 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:45:40,007 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:45:40,007 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:50,169 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:45:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:45:50,169 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:45:50,169 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:45:50,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:45:50,169 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:45:50,169 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:45:50,169 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:45:50,169 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:45:50,170 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:45:50,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:45:50,170 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:45:50,170 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:45:50,170 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:45:50,170 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:45:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:45:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:46:55.934797+00:00 (in 59.998912 seconds)
2025-04-25 17:45:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:46:55 UTC)" (scheduled at 2025-04-25 07:45:55.934797+00:00)
2025-04-25 17:45:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:45:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:45:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:45:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:46:55 UTC)" executed successfully
2025-04-25 17:46:00,327 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:00,327 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:00,327 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:00,327 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:00,327 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:00,327 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:00,327 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:00,327 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:00,328 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:00,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:00,328 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:00,328 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:00,328 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:00,328 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:10,491 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:10,491 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:10,491 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:10,491 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:10,491 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:10,491 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:10,491 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:10,491 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:10,492 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:10,492 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:10,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:10,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:10,492 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:10,492 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:20,648 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:20,649 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:20,649 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:20,649 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:20,649 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:20,649 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:20,649 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:20,649 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:20,649 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:20,650 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:20,650 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:20,650 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:20,650 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:20,650 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:30,820 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:30,820 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:30,820 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:30,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:30,820 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:30,820 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:30,820 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:30,820 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:30,820 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:30,821 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:30,821 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:30,821 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:30,821 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:30,822 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:40,982 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:40,982 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:40,982 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:40,982 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:40,982 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:40,982 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:40,982 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:40,982 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:40,983 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:40,983 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:40,983 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:40,983 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:40,983 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:40,983 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:51,145 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:46:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:46:51,145 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:46:51,145 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:46:51,146 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:46:51,146 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:46:51,146 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:46:51,146 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:46:51,146 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:46:51,146 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:46:51,146 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:46:51,147 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:46:51,147 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:46:51,147 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:46:51,147 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:46:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:46:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:47:55.934797+00:00 (in 59.999025 seconds)
2025-04-25 17:46:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:47:55 UTC)" (scheduled at 2025-04-25 07:46:55.934797+00:00)
2025-04-25 17:46:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:46:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:46:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:46:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:47:55 UTC)" executed successfully
2025-04-25 17:47:01,302 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:01,302 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:01,302 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:01,302 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:01,302 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:01,302 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:01,303 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:01,303 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:01,303 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:01,303 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:01,303 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:01,303 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:01,304 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:01,304 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:11,465 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:11,465 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:11,465 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:11,465 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:11,466 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:11,466 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:11,466 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:11,466 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:11,466 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:11,466 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:11,466 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:11,466 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:11,467 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:11,467 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:21,621 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:21,621 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:21,621 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:21,621 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:21,621 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:21,621 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:21,622 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:21,622 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:21,622 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:21,622 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:21,622 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:21,622 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:21,622 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:21,622 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:31,786 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:31,787 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:31,787 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:31,787 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:31,787 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:31,787 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:31,787 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:31,787 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:31,787 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:31,788 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:31,788 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:31,788 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:31,788 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:31,788 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:41,943 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:41,943 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:41,943 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:41,944 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:41,944 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:41,944 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:41,944 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:41,944 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:41,944 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:41,944 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:41,945 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:41,945 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:41,945 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:41,945 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:52,105 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:47:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:47:52,105 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:47:52,105 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:47:52,105 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:47:52,105 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:47:52,105 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:47:52,106 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:47:52,106 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:47:52,106 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:47:52,106 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:47:52,106 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:47:52,106 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:47:52,106 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:47:52,106 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:47:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:47:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:48:55.934797+00:00 (in 59.998120 seconds)
2025-04-25 17:47:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:48:55 UTC)" (scheduled at 2025-04-25 07:47:55.934797+00:00)
2025-04-25 17:47:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:47:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:47:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:47:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:48:55 UTC)" executed successfully
2025-04-25 17:48:02,264 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:02,264 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:02,264 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:02,264 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:02,264 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:02,264 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:02,265 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:02,265 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:02,265 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:02,265 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:02,265 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:02,265 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:02,266 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:02,266 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:12,423 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:12,424 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:12,424 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:12,424 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:12,424 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:12,424 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:12,425 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:12,425 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:12,425 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:12,425 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:12,426 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:12,426 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:12,426 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:12,426 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:22,585 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:22,585 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:22,586 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:22,586 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:22,586 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:22,586 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:22,586 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:22,586 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:22,586 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:22,586 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:22,587 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:22,587 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:22,587 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:22,587 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:32,749 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:32,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:32,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:32,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:32,749 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:32,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:32,749 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:32,749 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:32,749 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:32,750 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:32,750 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:32,750 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:32,750 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:32,750 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:42,906 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:42,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:42,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:42,906 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:42,906 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:42,906 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:42,906 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:42,906 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:42,907 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:42,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:42,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:42,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:42,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:42,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:53,064 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:48:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:48:53,064 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:48:53,064 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:48:53,064 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:48:53,064 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:48:53,065 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:48:53,065 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:48:53,065 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:48:53,065 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:48:53,065 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:48:53,066 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:48:53,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:48:53,066 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:48:53,066 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:48:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:48:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:49:55.934797+00:00 (in 59.999002 seconds)
2025-04-25 17:48:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:49:55 UTC)" (scheduled at 2025-04-25 07:48:55.934797+00:00)
2025-04-25 17:48:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:48:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:48:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:48:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:49:55 UTC)" executed successfully
2025-04-25 17:49:03,221 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:03,221 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:03,222 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:03,222 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:03,222 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:03,222 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:03,222 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:49:03,222 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:49:03,222 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489892}`
2025-04-25 17:49:03,222 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:03,223 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:03,223 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:03,223 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:03,223 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:10,678 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3433'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:10,679 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:10,679 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:10,679 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:10,679 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:10,679 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:10,679 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489892, 'callback_query': {'id': '7022623322263437774', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-25 17:49:10,679 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489892]
2025-04-25 17:49:10,680 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322263437774', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489892)
2025-04-25 17:49:10,680 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:49:10,680 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322263437774'}`
2025-04-25 17:49:10,680 - httpcore.connection - DEBUG - close.started
2025-04-25 17:49:10,681 - httpcore.connection - DEBUG - close.complete
2025-04-25 17:49:10,681 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:49:10,681 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489893}`
2025-04-25 17:49:10,681 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:10,681 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:10,681 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:10,682 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:10,682 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:10,830 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BE9130>
2025-04-25 17:49:10,830 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:49:10,979 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BEBA70>
2025-04-25 17:49:10,979 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:10,979 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:10,979 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:10,979 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:10,979 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:11,131 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:11,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:49:11,131 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:11,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:11,132 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:11,132 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:11,132 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:49:11,132 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-25 17:49:11,134 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:11,135 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '03:44']
2025-04-25 17:49:11,135 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-25 17:49:11,137 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:49:11,153 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-25 17:49:11,154 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:11,154 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:11,155 - bot.handlers - ERROR - Не удалось обновить статус подписки для пользователя 1635081908
2025-04-25 17:49:11,155 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:49:11,156 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:11,156 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:11,156 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:11,156 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:11,156 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:11,325 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'524'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:11,325 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:49:11,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:11,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:11,325 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:11,325 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:11,326 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 788, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745567351, 'text': '❌ Ошибка при обновлении подписки. Попробуй снова.'}`
2025-04-25 17:49:13,605 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3446'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:13,605 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:13,605 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,605 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:13,605 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:13,605 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:13,606 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489893, 'callback_query': {'id': '7022623322638395970', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_arrival_notification_time'}}]`
2025-04-25 17:49:13,606 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489893]
2025-04-25 17:49:13,606 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322638395970', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489893)
2025-04-25 17:49:13,606 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:49:13,606 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322638395970'}`
2025-04-25 17:49:13,607 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,607 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489894}`
2025-04-25 17:49:13,607 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:13,607 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,607 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:13,607 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,608 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,608 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:13,608 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,608 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:13,608 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,759 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:13,759 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:49:13,759 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,759 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:13,759 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:13,759 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:13,760 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:49:13,760 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_arrival_notification_time
2025-04-25 17:49:13,761 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:13,762 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '03:44']
2025-04-25 17:49:13,762 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений о приходе'. Действие: отображение списка для удаления.
2025-04-25 17:49:13,762 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_arrival_time_11:56', text='11:56 🗑️'),),))}`
2025-04-25 17:49:13,763 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,763 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:13,763 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,763 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:13,763 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:13,951 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'656'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:13,951 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:49:13,952 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:13,952 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:13,952 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:13,952 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:13,952 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 789, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745567353, 'text': '⏰ Выбери время оповещения о приходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '11:56 🗑️', 'callback_data': 'remove_arrival_time_11:56'}]]}}`
2025-04-25 17:49:15,908 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3448'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:15,908 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:15,908 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:15,908 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:15,908 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:15,908 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:15,908 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489894, 'callback_query': {'id': '7022623322232937357', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_departure_notification_time'}}]`
2025-04-25 17:49:15,908 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489894]
2025-04-25 17:49:15,909 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_departure_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623322232937357', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489894)
2025-04-25 17:49:15,909 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:49:15,909 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623322232937357'}`
2025-04-25 17:49:15,910 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:15,910 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489895}`
2025-04-25 17:49:15,910 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:15,910 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:15,910 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:15,910 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:15,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:15,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:15,911 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:15,911 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:15,911 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:16,076 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:16,076 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:49:16,076 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:16,077 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:16,077 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:16,077 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:16,077 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:49:16,077 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_departure_notification_time
2025-04-25 17:49:16,079 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:16,080 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '03:44']
2025-04-25 17:49:16,080 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить время оповещений об уходе'. Действие: отображение списка для удаления.
2025-04-25 17:49:16,080 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🚪 Выбери время оповещения об уходе для удаления: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='remove_departure_time_17:55', text='17:55 🗑️'),), (InlineKeyboardButton(callback_data='remove_departure_time_03:44', text='03:44 🗑️'),)))}`
2025-04-25 17:49:16,080 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:16,081 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:16,081 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:16,081 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:16,081 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:16,251 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'742'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:16,252 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:49:16,252 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:16,252 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:16,252 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:16,252 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:16,252 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 790, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745567356, 'text': '🚪 Выбери время оповещения об уходе для удаления: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '17:55 🗑️', 'callback_data': 'remove_departure_time_17:55'}], [{'text': '03:44 🗑️', 'callback_data': 'remove_departure_time_03:44'}]]}}`
2025-04-25 17:49:17,847 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3432'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:17,847 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:17,847 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:17,848 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:17,848 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:17,848 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:17,848 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489895, 'callback_query': {'id': '7022623324229460859', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_10_days'}}]`
2025-04-25 17:49:17,848 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489895]
2025-04-25 17:49:17,848 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_10_days', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324229460859', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489895)
2025-04-25 17:49:17,849 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:49:17,849 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324229460859'}`
2025-04-25 17:49:17,849 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:17,849 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489896}`
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:17,850 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:17,851 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:17,851 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:18,075 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:18,076 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:49:18,076 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:18,076 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:18,076 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:18,076 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:18,076 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:49:18,076 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_10_days
2025-04-25 17:49:18,078 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:18,079 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '03:44']
2025-04-25 17:49:18,079 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за 10 дней'. Действие: получение данных о посещениях за 10 дней.
2025-04-25 17:49:18,085 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано\n'}`
2025-04-25 17:49:18,086 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:18,086 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:18,086 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:18,086 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:18,086 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:18,305 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1462'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:18,305 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:49:18,305 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:18,305 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:18,305 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:18,306 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:18,306 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 791, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745567358, 'text': '📊 Посещения за последние 10 дней:\n2025-04-16: Начало: 2025-04-16 08:52:38, Конец: 2025-04-16 18:01:30\n2025-04-17: Начало: 2025-04-17 08:51:13, Конец: 2025-04-17 18:01:12\n2025-04-18: Начало: 2025-04-18 08:55:35, Конец: 2025-04-18 18:02:02\n2025-04-21: Начало: 2025-04-21 08:36:04, Конец: 2025-04-21 18:01:25\n2025-04-22: Начало: 2025-04-22 08:48:50, Конец: 2025-04-22 18:01:39\n2025-04-23: Начало: 2025-04-23 09:49:23, Конец: 2025-04-23 18:01:13\n2025-04-24: Начало: 2025-04-24 08:49:44, Конец: 2025-04-24 18:01:57\n2025-04-25: Начало: 2025-04-25 08:52:38, Конец: не указано'}`
2025-04-25 17:49:20,162 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3430'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:20,162 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:20,162 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,162 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:20,162 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:20,162 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:20,163 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489896, 'callback_query': {'id': '7022623323381423062', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 781, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745564604, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'attendance_today'}}]`
2025-04-25 17:49:20,163 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489896]
2025-04-25 17:49:20,163 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='attendance_today', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323381423062', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 25, 7, 3, 24, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=781, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-04-29 - 2025-04-30\n⏰ Время оповещений о приходе: 11:56\n🚪 Время оповещений об уходе: 17:55\n\nВыбери, что хочешь сделать: 👇')), update_id=829489896)
2025-04-25 17:49:20,163 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-25 17:49:20,163 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323381423062'}`
2025-04-25 17:49:20,164 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,164 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:49:20,164 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:20,164 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,164 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:20,164 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,165 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,165 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:20,165 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:20,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,330 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:20,331 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-25 17:49:20,331 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,331 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:20,331 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:20,331 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:20,331 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-25 17:49:20,331 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=attendance_today
2025-04-25 17:49:20,333 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': datetime.date(2025, 4, 29), 'vacation_end': datetime.date(2025, 4, 30), 'arrival_notification_times': '["11:56"]', 'departure_notification_times': '["17:55", "03:44"]'}
2025-04-25 17:49:20,334 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=2025-04-29, vacation_end=2025-04-30, arrival_notification_times=['11:56'], departure_notification_times=['17:55', '03:44']
2025-04-25 17:49:20,334 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Посещения за сегодня'. Действие: получение данных о посещениях.
2025-04-25 17:49:20,337 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:49:20,337 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:20,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,338 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:20,338 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:20,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'644'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:20,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-25 17:49:20,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:20,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:20,506 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:20,506 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:20,506 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 792, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745567360, 'text': '📅 Посещения за сегодня (2025-04-25):\nНачало: 2025-04-25 08:52:38, Конец: не указано, Ночная смена: Нет'}`
2025-04-25 17:49:30,323 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:30 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:30,323 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:30,323 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:30,323 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:30,323 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:30,323 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:30,324 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:49:30,324 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:49:30,324 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:49:30,324 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:30,324 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:30,324 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:30,324 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:30,324 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:40,479 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:40,479 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:40,479 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:40,479 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:40,479 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:40,479 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:40,480 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:49:40,480 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:49:40,480 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:49:40,480 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:40,480 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:40,480 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:40,480 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:40,480 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:50,638 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:49:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:49:50,638 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:49:50,638 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:49:50,638 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:49:50,639 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:49:50,639 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:49:50,639 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:49:50,639 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:49:50,639 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:49:50,639 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:49:50,640 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:49:50,640 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:49:50,640 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:49:50,640 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:49:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:49:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:50:55.934797+00:00 (in 59.998599 seconds)
2025-04-25 17:49:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:50:55 UTC)" (scheduled at 2025-04-25 07:49:55.934797+00:00)
2025-04-25 17:49:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:49:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:49:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:49:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:50:55 UTC)" executed successfully
2025-04-25 17:50:00,799 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:00,799 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:00,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:00,799 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:00,799 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:00,799 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:00,800 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:00,800 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:00,800 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:00,800 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:00,800 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:00,800 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:00,801 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:00,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:10,960 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:10 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:10,960 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:10,960 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:10,960 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:10,960 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:10,960 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:10,961 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:10,961 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:10,961 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:10,961 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:10,961 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:10,961 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:10,961 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:10,962 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:21,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:21,118 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:21,118 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:21,118 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:21,118 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:21,118 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:21,118 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:21,118 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:21,118 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:21,119 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:21,119 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:21,119 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:21,119 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:21,119 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:31,275 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:31,275 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:31,275 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:31,275 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:31,275 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:31,275 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:31,275 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:31,275 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:31,276 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:31,276 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:31,276 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:31,276 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:31,276 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:31,276 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:41,435 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:41,436 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:41,436 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:41,436 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:41,436 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:41,436 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:41,436 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:41,436 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:41,436 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:41,437 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:41,437 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:41,437 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:41,437 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:41,437 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:51,594 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:50:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:50:51,594 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:50:51,595 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:50:51,595 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:50:51,595 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:50:51,595 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:50:51,595 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:50:51,595 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:50:51,595 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:50:51,595 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:50:51,596 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:50:51,596 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:50:51,596 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:50:51,596 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:50:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:50:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:51:55.934797+00:00 (in 59.998399 seconds)
2025-04-25 17:50:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:51:55 UTC)" (scheduled at 2025-04-25 07:50:55.934797+00:00)
2025-04-25 17:50:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:50:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:50:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:50:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:51:55 UTC)" executed successfully
2025-04-25 17:51:01,753 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:01,753 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:01,753 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:01,753 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:01,754 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:01,754 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:01,754 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:01,754 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:01,754 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:01,754 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:01,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:01,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:01,755 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:01,755 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:11,911 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:11 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:11,911 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:11,911 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:11,911 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:11,911 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:11,911 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:11,912 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:11,912 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:11,912 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:11,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:11,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:11,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:11,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:11,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:22,067 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:22,067 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:22,067 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:22,067 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:22,067 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:22,068 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:22,068 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:22,068 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:22,068 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:22,068 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:22,068 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:22,068 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:22,069 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:22,069 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:32,223 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:32,223 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:32,223 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:32,223 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:32,224 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:32,224 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:32,224 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:32,224 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:32,224 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:32,225 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:32,225 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:32,225 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:32,226 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:32,226 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:42,383 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:42,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:42,384 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:42,384 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:42,384 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:42,384 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:42,384 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:42,384 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:42,384 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:42,385 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:42,385 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:42,385 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:42,385 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:42,385 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:52,539 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:51:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:51:52,539 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:51:52,539 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:51:52,539 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:51:52,539 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:51:52,539 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:51:52,540 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:51:52,540 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:51:52,540 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:51:52,540 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:51:52,540 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:51:52,540 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:51:52,541 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:51:52,541 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:51:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:51:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:52:55.934797+00:00 (in 59.997954 seconds)
2025-04-25 17:51:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:52:55 UTC)" (scheduled at 2025-04-25 07:51:55.934797+00:00)
2025-04-25 17:51:55,937 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:51:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:51:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:51:55,945 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:52:55 UTC)" executed successfully
2025-04-25 17:52:02,702 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:02,702 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:02,702 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:02,702 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:02,702 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:02,703 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:02,703 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:02,703 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:02,703 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:02,703 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:02,703 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:02,703 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:02,704 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:02,704 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:12,859 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:12,859 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:12,859 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:12,859 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:12,859 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:12,859 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:12,860 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:12,860 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:12,860 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:12,860 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:12,861 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:12,861 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:12,861 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:12,861 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:23,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:23,017 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:23,017 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:23,017 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:23,017 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:23,017 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:23,017 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:23,018 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:23,018 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:23,018 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:23,018 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:23,018 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:23,018 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:23,018 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:33,180 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:33,180 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:33,180 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:33,180 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:33,181 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:33,181 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:33,181 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:33,181 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:33,181 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:33,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:33,181 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:33,182 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:33,182 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:33,182 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:43,341 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:43,341 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:43,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:43,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:43,341 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:43,341 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:43,341 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:43,341 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:43,341 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:43,342 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:43,342 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:43,342 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:43,342 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:43,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:53,501 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:52:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:52:53,501 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:52:53,501 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:52:53,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:52:53,502 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:52:53,502 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:52:53,502 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:52:53,502 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:52:53,502 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:52:53,502 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:52:53,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:52:53,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:52:53,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:52:53,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:52:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:52:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:53:55.934797+00:00 (in 59.999159 seconds)
2025-04-25 17:52:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:53:55 UTC)" (scheduled at 2025-04-25 07:52:55.934797+00:00)
2025-04-25 17:52:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:52:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:52:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:52:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:53:55 UTC)" executed successfully
2025-04-25 17:53:03,657 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:03,657 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:03,657 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:03,657 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:03,657 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:03,657 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:03,657 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:03,657 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:03,658 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:03,658 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:03,658 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:03,658 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:03,658 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:03,658 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:13,812 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:13,812 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:13,812 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:13,812 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:13,813 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:13,813 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:13,813 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:13,813 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:13,813 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:13,813 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:13,813 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:13,813 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:13,814 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:13,814 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:23,970 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:23,970 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:23,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:23,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:23,970 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:23,971 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:23,971 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:23,971 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:23,971 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:23,971 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:23,971 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:23,971 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:23,972 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:23,972 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:34,130 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:34 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:34,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:34,131 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:34,131 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:34,131 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:34,131 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:34,131 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:34,131 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:34,131 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:34,132 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:34,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:34,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:34,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:34,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:44,285 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:44 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:44,286 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:44,286 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:44,286 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:44,286 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:44,286 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:44,286 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:44,286 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:44,286 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:44,287 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:44,287 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:44,287 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:44,287 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:44,287 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:54,445 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:53:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:53:54,445 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:53:54,445 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:53:54,445 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:53:54,446 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:53:54,446 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:53:54,446 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:53:54,446 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:53:54,446 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:53:54,446 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:53:54,446 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:53:54,446 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:53:54,447 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:53:54,447 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:53:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:53:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:54:55.934797+00:00 (in 59.998446 seconds)
2025-04-25 17:53:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:54:55 UTC)" (scheduled at 2025-04-25 07:53:55.934797+00:00)
2025-04-25 17:53:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:53:55,944 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:53:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:53:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:54:55 UTC)" executed successfully
2025-04-25 17:54:04,604 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:04,604 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:04,604 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:04,604 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:04,604 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:04,604 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:04,605 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:04,605 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:04,605 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:04,605 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:04,605 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:04,605 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:04,606 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:04,606 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:14,760 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:14,761 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:14,761 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:14,761 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:14,761 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:14,761 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:14,761 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:14,761 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:14,761 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:14,762 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:14,762 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:14,762 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:14,762 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:14,762 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:24,916 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:24,917 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:24,917 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:24,917 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:24,917 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:24,917 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:24,917 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:24,917 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:24,917 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:24,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:24,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:24,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:24,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:24,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:35,082 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:35,082 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:35,082 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:35,083 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:35,083 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:35,083 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:35,083 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:35,083 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:35,083 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:35,083 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:35,084 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:35,084 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:35,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:35,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:45,239 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:45,240 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:45,240 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:45,240 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:45,240 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:45,240 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:45,240 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:45,240 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:45,240 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:45,241 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:45,241 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:45,241 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:45,241 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:45,241 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:55,394 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:54:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:54:55,394 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:54:55,395 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:54:55,395 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:54:55,395 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:54:55,395 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:54:55,395 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:54:55,395 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:54:55,395 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:54:55,395 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:54:55,396 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:54:55,396 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:54:55,396 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:54:55,396 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:54:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:54:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:55:55.934797+00:00 (in 59.999162 seconds)
2025-04-25 17:54:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:55:55 UTC)" (scheduled at 2025-04-25 07:54:55.934797+00:00)
2025-04-25 17:54:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:54:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:54:55,942 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:54:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:55:55 UTC)" executed successfully
2025-04-25 17:55:05,553 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:05,553 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:05,553 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:05,553 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:05,553 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:05,553 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:05,554 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:05,554 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:05,554 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:05,554 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:05,554 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:05,554 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:05,555 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:05,555 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:55:15,711 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:15,711 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:15,711 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:15,711 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:15,711 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:15,711 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:15,711 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:15,711 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:15,712 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:15,712 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:15,712 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:15,712 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:15,712 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:15,712 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:55:25,872 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:25,872 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:25,872 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:25,873 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:25,873 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:25,873 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:25,873 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:25,873 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:25,873 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:25,873 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:25,874 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:25,874 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:25,874 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:25,874 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:55:36,027 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:36,028 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:36,028 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:36,028 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:36,028 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:36,028 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:36,028 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:36,028 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:36,028 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:36,029 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:36,029 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:36,029 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:36,029 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:36,029 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:55:46,187 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:46,188 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:46,188 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:46,188 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:46,188 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:46,188 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:46,188 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:46,188 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:46,188 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:46,189 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:46,189 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:46,189 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:46,189 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:46,189 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:55:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:55:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:56:55.934797+00:00 (in 59.998962 seconds)
2025-04-25 17:55:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:56:55 UTC)" (scheduled at 2025-04-25 07:55:55.934797+00:00)
2025-04-25 17:55:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:55:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:55:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:55:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:56:55 UTC)" executed successfully
2025-04-25 17:55:56,345 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:55:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:55:56,345 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:55:56,345 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:55:56,346 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:55:56,346 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:55:56,346 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:55:56,346 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:55:56,346 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:55:56,346 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:55:56,347 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:55:56,347 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:55:56,347 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:55:56,347 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:55:56,347 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:06,509 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:06 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:06,509 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:06,509 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:06,510 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:06,510 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:06,510 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:06,510 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:06,510 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:06,510 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:06,510 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:06,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:06,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:06,511 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:06,511 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:16,667 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:16,667 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:16,667 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:16,667 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:16,667 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:16,668 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:16,668 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:16,668 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:16,668 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:16,668 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 17:56:16,826 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C7D1D0>
2025-04-25 17:56:16,826 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 17:56:16,979 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C5EF90>
2025-04-25 17:56:16,980 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:16,980 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:16,980 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:16,980 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:16,980 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:27,131 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:27,131 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:27,132 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:27,132 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:27,132 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:27,132 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:27,132 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:27,132 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:27,132 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:27,133 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:27,133 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:27,133 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:27,133 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:27,133 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:37,284 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:37 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:37,285 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:37,285 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:37,285 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:37,285 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:37,285 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:37,285 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:37,285 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:37,285 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:37,286 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:37,286 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:37,286 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:37,286 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:37,286 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:47,441 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:47,441 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:47,441 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:47,441 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:47,441 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:47,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:47,442 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:47,442 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:47,442 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:47,442 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:47,442 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:47,442 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:47,442 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:47,443 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:56:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:56:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:57:55.934797+00:00 (in 59.998851 seconds)
2025-04-25 17:56:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:57:55 UTC)" (scheduled at 2025-04-25 07:56:55.934797+00:00)
2025-04-25 17:56:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:56:55,963 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:56:55,963 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:56:55,963 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:57:55 UTC)" executed successfully
2025-04-25 17:56:57,594 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:56:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:56:57,594 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:56:57,594 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:56:57,594 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:56:57,594 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:56:57,594 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:56:57,595 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:56:57,595 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:56:57,595 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:56:57,595 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:56:57,595 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:56:57,595 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:56:57,596 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:56:57,596 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:07,750 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:07,750 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:07,750 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:07,750 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:07,750 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:07,751 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:07,751 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:07,751 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:07,751 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:07,751 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:07,751 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:07,751 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:07,752 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:07,752 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:17,905 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:17,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:17,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:17,906 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:17,906 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:17,906 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:17,906 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:17,906 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:17,906 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:17,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:17,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:17,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:17,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:17,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:28,059 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:28,059 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:28,059 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:28,060 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:28,060 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:28,060 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:28,060 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:28,060 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:28,060 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:28,060 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:28,061 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:28,061 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:28,061 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:28,061 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:38,215 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:38 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:38,215 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:38,215 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:38,215 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:38,215 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:38,215 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:38,215 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:38,215 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:38,216 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:38,216 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:38,216 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:38,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:38,217 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:38,217 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:48,368 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:48,368 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:48,368 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:48,368 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:48,369 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:48,369 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:48,369 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:48,369 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:48,369 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:48,369 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:48,370 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:48,370 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:48,370 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:48,370 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:57:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:57:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:58:55.934797+00:00 (in 59.998560 seconds)
2025-04-25 17:57:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:58:55 UTC)" (scheduled at 2025-04-25 07:57:55.934797+00:00)
2025-04-25 17:57:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:57:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:57:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:57:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:58:55 UTC)" executed successfully
2025-04-25 17:57:58,523 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:57:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:57:58,523 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:57:58,523 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:57:58,523 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:57:58,523 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:57:58,523 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:57:58,523 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:57:58,523 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:57:58,524 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:57:58,524 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:57:58,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:57:58,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:57:58,524 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:57:58,524 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:08,678 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:08 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:08,678 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:08,678 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:08,679 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:08,679 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:08,679 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:08,679 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:08,679 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:08,679 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:08,679 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:08,680 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:08,680 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:08,680 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:08,680 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:18,833 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:18,833 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:18,833 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:18,833 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:18,833 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:18,834 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:18,834 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:18,834 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:18,834 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:18,834 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:18,834 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:18,834 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:18,835 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:18,835 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:28,991 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:28,991 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:28,991 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:28,991 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:28,991 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:28,991 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:28,991 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:28,991 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:28,992 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:28,992 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:28,992 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:28,992 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:28,992 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:28,992 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:39,149 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:39,149 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:39,149 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:39,149 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:39,150 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:39,150 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:39,150 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:39,150 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:39,150 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:39,150 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:39,150 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:39,151 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:39,151 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:39,151 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:49,304 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:49,305 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:49,305 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:49,305 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:49,305 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:49,305 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:49,305 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:49,305 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:49,305 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:49,306 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:49,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:49,306 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:49,306 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:49,306 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:58:55,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:58:55,935 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 07:59:55.934797+00:00 (in 59.999071 seconds)
2025-04-25 17:58:55,935 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:59:55 UTC)" (scheduled at 2025-04-25 07:58:55.934797+00:00)
2025-04-25 17:58:55,935 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:58:55,943 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:58:55,944 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:58:55,944 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 07:59:55 UTC)" executed successfully
2025-04-25 17:58:59,459 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:58:59 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:58:59,460 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:58:59,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:58:59,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:58:59,460 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:58:59,460 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:58:59,460 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:58:59,460 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:58:59,460 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:58:59,461 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:58:59,461 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:58:59,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:58:59,461 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:58:59,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:09,615 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:59:09 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:59:09,615 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:59:09,616 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:59:09,616 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:59:09,616 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:59:09,616 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:59:09,616 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:59:09,616 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:59:09,616 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:59:09,616 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:59:09,617 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:59:09,617 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:59:09,617 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:59:09,617 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:19,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:59:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:59:19,771 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:59:19,771 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:59:19,771 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:59:19,771 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:59:19,771 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:59:19,771 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:59:19,771 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:59:19,771 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:59:19,772 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:59:19,772 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:59:19,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:59:19,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:59:19,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:29,953 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:59:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:59:29,953 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:59:29,953 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:59:29,954 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:59:29,954 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:59:29,954 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:59:29,954 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:59:29,954 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:59:29,954 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:59:29,955 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:59:29,955 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:59:29,955 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:59:29,955 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:59:29,955 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:40,106 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:59:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:59:40,107 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:59:40,107 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:59:40,107 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:59:40,107 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:59:40,107 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:59:40,107 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:59:40,107 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:59:40,107 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:59:40,108 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:59:40,108 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:59:40,108 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:59:40,108 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:59:40,108 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:50,262 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 07:59:50 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 17:59:50,263 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 17:59:50,263 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 17:59:50,263 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 17:59:50,263 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 17:59:50,263 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 17:59:50,263 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 17:59:50,263 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 17:59:50,263 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 17:59:50,264 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 17:59:50,264 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 17:59:50,264 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 17:59:50,265 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 17:59:50,265 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 17:59:55,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-25 17:59:55,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-25 08:00:55.934797+00:00 (in 59.998334 seconds)
2025-04-25 17:59:55,936 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 08:00:55 UTC)" (scheduled at 2025-04-25 07:59:55.934797+00:00)
2025-04-25 17:59:55,936 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-25 17:59:55,942 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:59:55,943 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-25 17:59:55,943 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-25 08:00:55 UTC)" executed successfully
2025-04-25 18:00:00,418 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 08:00:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 18:00:00,418 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 18:00:00,418 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 18:00:00,418 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 18:00:00,418 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 18:00:00,418 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 18:00:00,418 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 18:00:00,418 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 18:00:00,419 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489897}`
2025-04-25 18:00:00,419 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 18:00:00,419 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 18:00:00,419 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 18:00:00,419 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 18:00:00,419 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 18:00:03,219 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-25 18:00:03,219 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-25 18:00:03,219 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-25 18:00:03,220 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-25 18:00:03,220 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-25 18:00:03,220 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 18:00:03,220 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-25 18:00:03,220 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489897}`
2025-04-25 18:00:03,221 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 18:00:03,221 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-25 18:00:03,374 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105C20AE0>
2025-04-25 18:00:03,374 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001A105BD52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-25 18:00:03,545 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A105BC1610>
2025-04-25 18:00:03,545 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-25 18:00:03,545 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-25 18:00:03,545 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-25 18:00:03,546 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-25 18:00:03,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-25 18:00:03,710 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Apr 2025 08:00:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-25 18:00:03,710 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-25 18:00:03,710 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-25 18:00:03,710 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-25 18:00:03,711 - httpcore.http11 - DEBUG - response_closed.started
2025-04-25 18:00:03,711 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-25 18:00:03,711 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-25 18:00:03,711 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-25 18:00:03,711 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-25 18:00:03,711 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-25 18:00:03,711 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-25 18:00:03,711 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-25 18:00:03,711 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-25 18:00:03,711 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-25 18:00:03,722 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-25 18:00:03,722 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-25 18:00:03,722 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-25 18:00:03,722 - httpcore.connection - DEBUG - close.started
2025-04-25 18:00:03,722 - httpcore.connection - DEBUG - close.started
2025-04-25 18:00:03,723 - httpcore.connection - DEBUG - close.complete
2025-04-25 18:00:03,723 - httpcore.connection - DEBUG - close.complete
2025-04-25 18:00:03,723 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-25 18:00:03,723 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
2025-04-29 09:20:43,381 - telegram.ext.ExtBot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-29 09:20:43,382 - telegram.ext.ExtBot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg
2025-04-29 09:20:43,390 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-04-29 09:20:43,390 - bot.scheduler - INFO - Планировщик уведомлений настроен с интервалом 60 секунд
2025-04-29 09:20:43,391 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-29 09:20:43,391 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap Initialize Application): Starting
2025-04-29 09:20:43,391 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getMe` with parameters `{}`
2025-04-29 09:20:43,397 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:20:43,561 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000014101425400>
2025-04-29 09:20:43,561 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:20:43,714 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000014101415A90>
2025-04-29 09:20:43,714 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:43,715 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:43,715 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:43,715 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:43,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:43,868 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:20:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:20:43,869 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getMe "HTTP/1.1 200 OK"
2025-04-29 09:20:43,869 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:20:43,869 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:20:43,869 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:20:43,869 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:20:43,869 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getMe` finished with return value `{'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot', 'can_join_groups': True, 'can_read_all_group_messages': False, 'supports_inline_queries': False, 'can_connect_to_business': False, 'has_main_web_app': False}`
2025-04-29 09:20:43,869 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-04-29 09:20:43,870 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-04-29 09:20:43,870 - telegram.ext - DEBUG - Network Retry Loop (Bootstrap delete Webhook): Starting
2025-04-29 09:20:43,870 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-04-29 09:20:43,870 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `deleteWebhook` with parameters `{}`
2025-04-29 09:20:43,870 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:43,870 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:43,870 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:43,870 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:43,871 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:44,024 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:20:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:20:44,024 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/deleteWebhook "HTTP/1.1 200 OK"
2025-04-29 09:20:44,024 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:20:44,025 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:20:44,025 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:20:44,025 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:20:44,025 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `deleteWebhook` finished with return value `True`
2025-04-29 09:20:44,025 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-04-29 09:20:44,025 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-04-29 09:20:44,025 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-04-29 09:20:44,025 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Starting
2025-04-29 09:20:44,025 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-29 09:20:44,026 - apscheduler.scheduler - INFO - Added job "send_notification" to job store "default"
2025-04-29 09:20:44,026 - apscheduler.scheduler - INFO - Scheduler started
2025-04-29 09:20:44,026 - telegram.ext.Application - DEBUG - JobQueue started
2025-04-29 09:20:44,026 - telegram.ext.Application - INFO - Application started
2025-04-29 09:20:44,026 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:20:44,026 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-29 09:20:44,026 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-28 23:21:43.382817+00:00 (in 59.356012 seconds)
2025-04-29 09:20:44,181 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000014101464550>
2025-04-29 09:20:44,181 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:20:44,337 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141013B63F0>
2025-04-29 09:20:44,338 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:44,338 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:44,338 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:44,338 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:44,338 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:54,498 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:20:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:20:54,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:20:54,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:20:54,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:20:54,498 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:20:54,498 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:20:54,499 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:20:54,499 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:20:54,499 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 0}`
2025-04-29 09:20:54,499 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:54,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:54,499 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:54,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:54,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:55,582 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:20:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'391'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:20:55,582 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:20:55,582 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:20:55,582 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:20:55,582 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:20:55,582 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:20:55,582 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489898, 'message': {'message_id': 794, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882455, 'text': '/start', 'entities': [{'offset': 0, 'length': 6, 'type': 'bot_command'}]}}]`
2025-04-29 09:20:55,582 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489898]
2025-04-29 09:20:55,583 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 20, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=794, supergroup_chat_created=False, text='/start'), update_id=829489898)
2025-04-29 09:20:55,583 - bot.handlers - DEBUG - Получена команда /start от пользователя 1635081908
2025-04-29 09:20:55,591 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:20:55,596 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-29 09:20:55,597 - httpcore.connection - DEBUG - close.started
2025-04-29 09:20:55,597 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:20:55,597 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:20:55,597 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489899}`
2025-04-29 09:20:55,597 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:55,598 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:55,598 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:55,598 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:55,598 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:55,748 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141013B6FD0>
2025-04-29 09:20:55,748 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:20:55,904 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014904D0>
2025-04-29 09:20:55,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:20:55,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:20:55,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:20:55,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:20:55,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:20:56,087 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:20:56 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3698'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:20:56,087 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:20:56,087 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:20:56,088 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:20:56,088 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:20:56,088 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:20:56,088 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 795, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882456, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-29 09:21:01,570 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3970'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:01,570 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:01,570 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:01,570 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:01,571 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:01,571 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:01,571 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489899, 'callback_query': {'id': '7022623325022683598', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 795, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882456, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-29 09:21:01,571 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489899]
2025-04-29 09:21:01,572 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623325022683598', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 20, 56, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=795, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇')), update_id=829489899)
2025-04-29 09:21:01,573 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-29 09:21:01,573 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623325022683598'}`
2025-04-29 09:21:01,573 - httpcore.connection - DEBUG - close.started
2025-04-29 09:21:01,574 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:21:01,574 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:21:01,574 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489900}`
2025-04-29 09:21:01,575 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:01,576 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:01,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:01,577 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:01,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:01,731 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014457B0>
2025-04-29 09:21:01,731 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:21:01,889 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014458C0>
2025-04-29 09:21:01,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:01,890 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:01,890 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:01,890 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:01,890 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:02,059 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:02,059 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-29 09:21:02,059 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:02,059 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:02,059 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:02,060 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:02,060 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-29 09:21:02,060 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-29 09:21:02,064 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:02,066 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=[], departure_notification_times=[]
2025-04-29 09:21:02,066 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-29 09:21:02,069 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-29 09:21:02,099 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': False}
2025-04-29 09:21:02,129 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:02,130 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на False
2025-04-29 09:21:02,130 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-29 09:21:02,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:02,131 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:02,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:02,132 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:02,132 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:02,310 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:02,310 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:02,310 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:02,310 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:02,311 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:02,311 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:02,311 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 796, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882462, 'text': '📩 Подписка на рассылку: отписан 🚫'}`
2025-04-29 09:21:02,327 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:02,329 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-29 09:21:02,330 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:02,330 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:02,330 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:02,331 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:02,331 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:02,507 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3327'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:02,507 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:02,507 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:02,507 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:02,507 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:02,507 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:02,507 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 797, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882462, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: не подписан 🚫\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-29 09:21:04,766 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3970'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:04,767 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:04,767 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:04,767 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:04,767 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:04,767 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:04,767 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489900, 'callback_query': {'id': '7022623323504461028', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 795, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882456, 'text': '👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'toggle_subscription'}}]`
2025-04-29 09:21:04,767 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489900]
2025-04-29 09:21:04,767 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='toggle_subscription', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323504461028', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 20, 56, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=795, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='👋 Привет, Михаил Евгеньевич Шиш! Я твой бот для управления графиком работы.\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇')), update_id=829489900)
2025-04-29 09:21:04,768 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-29 09:21:04,768 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323504461028'}`
2025-04-29 09:21:04,768 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:04,768 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489901}`
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:04,769 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:04,928 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:04 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:04,928 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-29 09:21:04,929 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:04,929 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:04,929 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:04,929 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:04,929 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-29 09:21:04,929 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=toggle_subscription
2025-04-29 09:21:04,931 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': False, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:04,932 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=False, vacation_start=None, vacation_end=None, arrival_notification_times=[], departure_notification_times=[]
2025-04-29 09:21:04,932 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Подписка на рассылку'. Действие: переключение статуса подписки.
2025-04-29 09:21:04,934 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET subscribed = :subscribed
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-29 09:21:04,938 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'subscribed': True}
2025-04-29 09:21:04,939 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:04,940 - bot.handlers - INFO - Статус подписки пользователя 1635081908 изменён на True
2025-04-29 09:21:04,940 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-29 09:21:04,940 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:04,941 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:04,941 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:04,941 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:04,941 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:05,125 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'450'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:05,126 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:05,126 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:05,126 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:05,126 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:05,126 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:05,126 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 798, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882465, 'text': '📩 Подписка на рассылку: подписан ✅'}`
2025-04-29 09:21:05,128 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:05,129 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-29 09:21:05,130 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:05,130 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:05,130 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:05,130 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:05,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:05,306 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:05 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3308'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:05,307 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:05,307 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:05,307 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:05,307 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:05,307 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:05,307 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 799, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882465, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-29 09:21:07,634 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3573'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:07,634 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:07,634 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,635 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:07,635 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:07,635 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:07,635 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489901, 'callback_query': {'id': '7022623323122113336', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 799, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882465, 'text': '📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'set_vacation'}}]`
2025-04-29 09:21:07,635 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489901]
2025-04-29 09:21:07,635 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='set_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623323122113336', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 5, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=799, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: не задано 📅\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇')), update_id=829489901)
2025-04-29 09:21:07,636 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-29 09:21:07,636 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623323122113336'}`
2025-04-29 09:21:07,636 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,636 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489902}`
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:07,637 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,798 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:07,799 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-29 09:21:07,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,799 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:07,799 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:07,799 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:07,799 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-29 09:21:07,799 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=set_vacation
2025-04-29 09:21:07,802 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': None, 'vacation_end': None, 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:07,803 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=None, vacation_end=None, arrival_notification_times=[], departure_notification_times=[]
2025-04-29 09:21:07,803 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Установить период отпуска'. Действие: запрос даты начала отпуска.
2025-04-29 09:21:07,803 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-29 09:21:07,803 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,804 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:07,804 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,804 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:07,804 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:07,976 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'583'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:07,976 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:07,976 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:07,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:07,976 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:07,976 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:07,976 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 800, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882467, 'text': '📅 Введи дату начала отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-29 09:21:07,977 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_START
2025-04-29 09:21:16,122 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:16,122 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:16,122 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:16,123 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:16,123 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:16,123 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:16,123 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489902, 'message': {'message_id': 801, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882476, 'text': '01-05-2025'}}]`
2025-04-29 09:21:16,123 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489902]
2025-04-29 09:21:16,123 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 16, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=801, supergroup_chat_created=False, text='01-05-2025'), update_id=829489902)
2025-04-29 09:21:16,123 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 0
2025-04-29 09:21:16,123 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату начала отпуска: 01-05-2025
2025-04-29 09:21:16,124 - bot.handlers - INFO - Дата начала отпуска успешно распарсена: 2025-05-01
2025-04-29 09:21:16,124 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-29 09:21:16,124 - httpcore.connection - DEBUG - close.started
2025-04-29 09:21:16,125 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:21:16,125 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:21:16,125 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489903}`
2025-04-29 09:21:16,125 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:16,126 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:16,126 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:16,126 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:16,126 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:16,296 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014A5250>
2025-04-29 09:21:16,296 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:21:16,452 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014A5450>
2025-04-29 09:21:16,452 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:16,452 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:16,452 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:16,452 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:16,452 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:16,618 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'601'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:16,618 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:16,619 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:16,619 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:16,619 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:16,619 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:16,619 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 802, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882476, 'text': '📅 Введи дату окончания отпуска в формате ДД-ММ-ГГГГ (например, 01-01-2025):'}`
2025-04-29 09:21:16,619 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние SET_VACATION_END
2025-04-29 09:21:26,296 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:26 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:26,297 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:26,297 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:26,297 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:26,297 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:26,297 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:26,297 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:21:26,297 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:21:26,297 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489903}`
2025-04-29 09:21:26,298 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:26,298 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:26,298 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:26,298 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:26,298 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:28,121 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'337'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:28,122 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:28,122 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:28,122 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:28,122 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:28,122 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:28,122 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489903, 'message': {'message_id': 803, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882488, 'text': '05-05-2025'}}]`
2025-04-29 09:21:28,122 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489903]
2025-04-29 09:21:28,122 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=803, supergroup_chat_created=False, text='05-05-2025'), update_id=829489903)
2025-04-29 09:21:28,122 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 1
2025-04-29 09:21:28,123 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл дату окончания отпуска: 05-05-2025
2025-04-29 09:21:28,123 - bot.handlers - INFO - Дата окончания отпуска успешно распарсена: 2025-05-05
2025-04-29 09:21:28,127 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET vacation_start = :vacation_start, vacation_end = :vacation_end
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'vacation_start': '2025-05-01', 'vacation_end': '2025-05-05'}
2025-04-29 09:21:28,131 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'vacation_start': '2025-05-01', 'vacation_end': '2025-05-05'}
2025-04-29 09:21:28,132 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:28,133 - bot.handlers - INFO - Период отпуска для пользователя 1635081908 успешно установлен: 2025-05-01 - 2025-05-05
2025-04-29 09:21:28,135 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:28,136 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней'))))}`
2025-04-29 09:21:28,136 - httpcore.connection - DEBUG - close.started
2025-04-29 09:21:28,137 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:21:28,137 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:21:28,137 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489904}`
2025-04-29 09:21:28,137 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:28,138 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:28,138 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:28,138 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:28,138 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:28,282 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014AA030>
2025-04-29 09:21:28,283 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:21:28,428 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014AA990>
2025-04-29 09:21:28,428 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:28,429 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:28,429 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:28,429 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:28,429 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:28,596 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3464'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:28,596 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:28,596 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:28,596 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:28,596 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:28,597 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:28,597 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 804, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882488, 'text': '🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}`
2025-04-29 09:21:32,109 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3732'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:32,109 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:32,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,109 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:32,109 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:32,109 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:32,110 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489904, 'callback_query': {'id': '7022623321972817693', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 804, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882488, 'text': '🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'remove_vacation'}}]`
2025-04-29 09:21:32,110 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489904]
2025-04-29 09:21:32,110 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='remove_vacation', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623321972817693', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=804, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇')), update_id=829489904)
2025-04-29 09:21:32,110 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-29 09:21:32,110 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623321972817693'}`
2025-04-29 09:21:32,111 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,111 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489905}`
2025-04-29 09:21:32,111 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:32,111 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,111 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:32,112 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,262 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:32,262 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-29 09:21:32,262 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,262 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:32,262 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:32,262 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:32,263 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-29 09:21:32,263 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=remove_vacation
2025-04-29 09:21:32,265 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:32,266 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-05-01, vacation_end=2025-05-05, arrival_notification_times=[], departure_notification_times=[]
2025-04-29 09:21:32,266 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Удалить период отпуска'. Действие: удаление периода отпуска.
2025-04-29 09:21:32,267 - bot.settings - WARNING - Нет данных для обновления настроек пользователя 1635081908
2025-04-29 09:21:32,268 - bot.handlers - ERROR - Не удалось удалить период отпуска для пользователя 1635081908
2025-04-29 09:21:32,268 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-29 09:21:32,269 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,269 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:32,269 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,269 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:32,269 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:32,429 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:32 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'549'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:32,429 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:32,429 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:32,429 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:32,429 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:32,429 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:32,429 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 805, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882492, 'text': '❌ Ошибка при удалении периода отпуска. Попробуй снова.'}`
2025-04-29 09:21:35,150 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3746'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:35,150 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:35,150 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:35,150 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:35,150 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:35,150 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489905, 'callback_query': {'id': '7022623324095098592', 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'message': {'message_id': 804, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882488, 'text': '🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇', 'reply_markup': {'inline_keyboard': [[{'text': '📩 Подписка на рассылку', 'callback_data': 'toggle_subscription'}], [{'text': '🏖️ Установить период отпуска', 'callback_data': 'set_vacation'}, {'text': '🗑️ Удалить период отпуска', 'callback_data': 'remove_vacation'}], [{'text': '⏰ Добавить время оповещений о приходе', 'callback_data': 'add_arrival_notification_time'}, {'text': '🗑️ Удалить время оповещений о приходе', 'callback_data': 'remove_arrival_notification_time'}], [{'text': '🚪 Добавить время оповещений об уходе', 'callback_data': 'add_departure_notification_time'}, {'text': '🗑️ Удалить время оповещений об уходе', 'callback_data': 'remove_departure_notification_time'}], [{'text': '📅 Посещения за сегодня', 'callback_data': 'attendance_today'}, {'text': '📊 Посещения за 10 дней', 'callback_data': 'attendance_10_days'}]]}}, 'chat_instance': '-1968790062798281304', 'data': 'add_arrival_notification_time'}}]`
2025-04-29 09:21:35,151 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489905]
2025-04-29 09:21:35,151 - telegram.ext.Application - DEBUG - Processing update Update(callback_query=CallbackQuery(chat_instance='-1968790062798281304', data='add_arrival_notification_time', from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), id='7022623324095098592', message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='testmoygraficBOT', id=7437055328, is_bot=True, username='TestMoyGraficbot'), group_chat_created=False, message_id=804, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='toggle_subscription', text='📩 Подписка на рассылку'),), (InlineKeyboardButton(callback_data='set_vacation', text='🏖️ Установить период отпуска'), InlineKeyboardButton(callback_data='remove_vacation', text='🗑️ Удалить период отпуска')), (InlineKeyboardButton(callback_data='add_arrival_notification_time', text='⏰ Добавить время оповещений о приходе'), InlineKeyboardButton(callback_data='remove_arrival_notification_time', text='🗑️ Удалить время оповещений о приходе')), (InlineKeyboardButton(callback_data='add_departure_notification_time', text='🚪 Добавить время оповещений об уходе'), InlineKeyboardButton(callback_data='remove_departure_notification_time', text='🗑️ Удалить время оповещений об уходе')), (InlineKeyboardButton(callback_data='attendance_today', text='📅 Посещения за сегодня'), InlineKeyboardButton(callback_data='attendance_10_days', text='📊 Посещения за 10 дней')))), supergroup_chat_created=False, text='🏖️ Период отпуска 2025-05-01 - 2025-05-05 установлен! ✅\n\n📋 Твои текущие настройки:\n📩 Подписка на рассылку: подписан ✅\n🏖️ Период отпуска: 2025-05-01 - 2025-05-05\n⏰ Время оповещений о приходе: не задано ⏰\n🚪 Время оповещений об уходе: не задано 🚪\n\nВыбери, что хочешь сделать: 👇')), update_id=829489905)
2025-04-29 09:21:35,151 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state None
2025-04-29 09:21:35,151 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `answerCallbackQuery` with parameters `{'callback_query_id': '7022623324095098592'}`
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,152 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489906}`
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,152 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,153 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:35,153 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,153 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:35,153 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,349 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'25'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:35,350 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/answerCallbackQuery "HTTP/1.1 200 OK"
2025-04-29 09:21:35,350 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,350 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:35,350 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:35,350 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:35,350 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `answerCallbackQuery` finished with return value `True`
2025-04-29 09:21:35,350 - bot.handlers - DEBUG - Получен callback-запрос от пользователя 1635081908: callback_data=add_arrival_notification_time
2025-04-29 09:21:35,352 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:35,353 - bot.handlers - DEBUG - Текущие настройки пользователя 1635081908: subscribed=True, vacation_start=2025-05-01, vacation_end=2025-05-05, arrival_notification_times=[], departure_notification_times=[]
2025-04-29 09:21:35,353 - bot.handlers - INFO - Пользователь 1635081908 нажал кнопку 'Добавить время оповещений о приходе'. Действие: проверка лимита и запрос времени.
2025-04-29 09:21:35,353 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-29 09:21:35,354 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,354 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:35,354 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,354 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:35,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:35,585 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:35 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'647'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:35,586 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:35,586 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:35,586 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:35,586 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:35,586 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:35,586 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 806, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882495, 'text': '⏰ Введи время оповещения о приходе в формате ЧЧ:ММ или Ч:ММ (например, 09:00 или 9:00):'}`
2025-04-29 09:21:35,586 - bot.handlers - INFO - Пользователь 1635081908 перешёл в состояние ADD_ARRIVAL_NOTIFICATION
2025-04-29 09:21:42,361 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'331'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:42,362 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:42,362 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:42,362 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:42,362 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:42,362 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:42,362 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[{'update_id': 829489906, 'message': {'message_id': 807, 'from': {'id': 1635081908, 'is_bot': False, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'language_code': 'ru'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882502, 'text': '8:45'}}]`
2025-04-29 09:21:42,362 - telegram.ext.ExtBot - DEBUG - Getting updates: [829489906]
2025-04-29 09:21:42,362 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Mikhail', id=1635081908, last_name='.', type=<ChatType.PRIVATE>, username='Mvihach'), date=datetime.datetime(2025, 4, 28, 23, 21, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Mikhail', id=1635081908, is_bot=False, language_code='ru', last_name='.', username='Mvihach'), group_chat_created=False, message_id=807, supergroup_chat_created=False, text='8:45'), update_id=829489906)
2025-04-29 09:21:42,363 - telegram.ext.ConversationHandler - DEBUG - Selecting conversation (1635081908, 1635081908) with state 2
2025-04-29 09:21:42,363 - bot.handlers - DEBUG - Пользователь 1635081908 ввёл время оповещения о приходе: 8:45
2025-04-29 09:21:42,363 - bot.handlers - INFO - Время оповещения о приходе успешно нормализовано: 08:45
2025-04-29 09:21:42,365 - bot.settings - DEBUG - Результат запроса настроек для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '[]', 'departure_notification_times': '[]'}
2025-04-29 09:21:42,368 - bot.settings - DEBUG - Выполняется запрос обновления для пользователя 1635081908: 
                UPDATE user_settings
                SET arrival_notification_times = :arrival_notification_times
                WHERE telegram_id = :telegram_id
            , параметры: {'telegram_id': 1635081908, 'arrival_notification_times': '["08:45"]'}
2025-04-29 09:21:42,395 - bot.settings - INFO - Настройки пользователя 1635081908 успешно обновлены: {'telegram_id': 1635081908, 'arrival_notification_times': '["08:45"]'}
2025-04-29 09:21:42,397 - bot.settings - DEBUG - Проверка после обновления для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '["08:45"]', 'departure_notification_times': '[]'}
2025-04-29 09:21:42,397 - bot.settings - ERROR - Ошибка: vacation_start или vacation_end не сброшены в NULL для пользователя 1635081908: {'subscribed': True, 'vacation_start': datetime.date(2025, 5, 1), 'vacation_end': datetime.date(2025, 5, 5), 'arrival_notification_times': '["08:45"]', 'departure_notification_times': '[]'}
2025-04-29 09:21:42,398 - bot.handlers - ERROR - Не удалось обновить время оповещения о приходе для пользователя 1635081908
2025-04-29 09:21:42,398 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 1635081908, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-29 09:21:42,398 - httpcore.connection - DEBUG - close.started
2025-04-29 09:21:42,398 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:21:42,398 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:21:42,399 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:21:42,399 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:42,400 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:42,400 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:42,400 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:42,400 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:42,549 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014B1C50>
2025-04-29 09:21:42,549 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E5640> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:21:42,704 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141014B1E10>
2025-04-29 09:21:42,704 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:42,705 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:42,705 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:42,705 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:42,705 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:21:42,873 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'579'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:42,873 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/sendMessage "HTTP/1.1 200 OK"
2025-04-29 09:21:42,873 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:42,873 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:42,873 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:42,873 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:42,874 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 808, 'from': {'id': 7437055328, 'is_bot': True, 'first_name': 'testmoygraficBOT', 'username': 'TestMoyGraficbot'}, 'chat': {'id': 1635081908, 'first_name': 'Mikhail', 'last_name': '.', 'username': 'Mvihach', 'type': 'private'}, 'date': 1745882502, 'text': '❌ Ошибка при добавлении времени оповещения. Попробуй снова.'}`
2025-04-29 09:21:43,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-29 09:21:43,383 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-28 23:22:43.382817+00:00 (in 59.999167 seconds)
2025-04-29 09:21:43,383 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-28 23:22:43 UTC)" (scheduled at 2025-04-28 23:21:43.382817+00:00)
2025-04-29 09:21:43,384 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-29 09:21:43,393 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-29 09:21:43,393 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-29 09:21:43,417 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-28 23:22:43 UTC)" executed successfully
2025-04-29 09:21:52,563 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:21:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:21:52,563 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:21:52,563 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:21:52,563 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:21:52,563 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:21:52,563 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:21:52,564 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:21:52,564 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:21:52,564 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:21:52,564 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:21:52,564 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:21:52,564 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:21:52,564 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:21:52,565 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:02,721 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:02,721 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:02,721 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:02,721 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:02,721 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:02,722 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:02,722 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:02,722 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:02,722 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:02,722 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:02,722 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:02,722 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:02,723 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:02,723 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:12,877 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:12 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:12,877 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:12,877 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:12,877 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:12,877 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:12,877 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:12,877 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:12,877 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:12,877 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:12,878 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:12,878 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:12,878 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:12,878 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:12,878 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:23,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:22 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:23,035 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:23,035 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:23,035 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:23,035 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:23,035 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:23,036 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:23,036 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:23,036 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:23,036 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:23,036 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:23,036 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:23,036 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:23,036 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:33,201 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:33 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:33,202 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:33,202 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:33,202 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:33,202 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:33,202 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:33,202 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:33,202 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:33,202 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:33,203 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:33,203 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:33,203 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:33,203 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:33,203 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:43,363 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:43 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:43,363 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:43,363 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:43,364 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:43,364 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:43,364 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:43,364 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:43,364 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:43,364 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:43,364 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:43,365 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:43,365 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:43,365 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:43,365 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:22:43,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-04-29 09:22:43,384 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-04-28 23:23:43.382817+00:00 (in 59.998785 seconds)
2025-04-29 09:22:43,384 - apscheduler.executors.default - INFO - Running job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-28 23:23:43 UTC)" (scheduled at 2025-04-28 23:22:43.382817+00:00)
2025-04-29 09:22:43,384 - bot.scheduler - DEBUG - Запуск проверки уведомлений...
2025-04-29 09:22:43,392 - bot.scheduler - ERROR - Ошибка в send_notification: strptime() argument 1 must be str, not datetime.date
2025-04-29 09:22:43,392 - telegram.ext.Application - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\shish.me\PycharmProjects\JupyterProject\.venv\Lib\site-packages\telegram\ext\_jobqueue.py", line 997, in _run
    await self.callback(context)
  File "C:\Users\shish.me\PycharmProjects\MoyGrafik_bot_01\bot\scheduler.py", line 65, in send_notification
    start_date = datetime.strptime(vacation_start, '%Y-%m-%d').date()
                 ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: strptime() argument 1 must be str, not datetime.date
2025-04-29 09:22:43,393 - apscheduler.executors.default - INFO - Job "send_notification (trigger: interval[0:01:00], next run at: 2025-04-28 23:23:43 UTC)" executed successfully
2025-04-29 09:22:53,523 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:22:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:22:53,523 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:22:53,523 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:22:53,523 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:22:53,523 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:22:53,523 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:22:53,524 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:22:53,524 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:22:53,524 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:22:53,524 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:22:53,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:22:53,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:22:53,524 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:22:53,525 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:23:03,683 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:23:03 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:23:03,684 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:23:03,684 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:23:03,684 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:23:03,684 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:23:03,684 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:23:03,684 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:23:03,684 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:23:03,684 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:23:03,685 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:23:03,685 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:23:03,685 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:23:03,685 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:23:03,685 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:23:13,852 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:23:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:23:13,852 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:23:13,852 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:23:13,852 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:23:13,853 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:23:13,853 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:23:13,853 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:23:13,853 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:23:13,853 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:23:13,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:23:13,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:23:13,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:23:13,854 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:23:13,854 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:23:24,016 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:23:23 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:23:24,016 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:23:24,016 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:23:24,016 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:23:24,016 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:23:24,016 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:23:24,017 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:23:24,017 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:23:24,017 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 10, 'offset': 829489907}`
2025-04-29 09:23:24,017 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:23:24,017 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:23:24,017 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:23:24,018 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:23:24,018 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:23:24,664 - telegram.ext.Application - DEBUG - Application received stop signal. Shutting down.
2025-04-29 09:23:24,664 - telegram.ext.Updater - DEBUG - Stopping Updater
2025-04-29 09:23:24,664 - telegram.ext.Updater - DEBUG - Waiting background polling task to finish up.
2025-04-29 09:23:24,664 - telegram.ext - DEBUG - Network Retry Loop (Polling Updates): Cancelled
2025-04-29 09:23:24,664 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-04-29 09:23:24,664 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:23:24,665 - telegram.ext.Updater - DEBUG - Calling `get_updates` one more time to mark all fetched updates as read.
2025-04-29 09:23:24,665 - telegram.ext.ExtBot - DEBUG - Calling Bot API endpoint `getUpdates` with parameters `{'timeout': 0, 'offset': 829489907}`
2025-04-29 09:23:24,665 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:23:24,666 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-29 09:23:24,818 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141005E0600>
2025-04-29 09:23:24,818 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x00000141013E52E0> server_hostname='api.telegram.org' timeout=5.0
2025-04-29 09:23:24,969 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000141013D22D0>
2025-04-29 09:23:24,969 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-29 09:23:24,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-29 09:23:24,969 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-29 09:23:24,969 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-29 09:23:24,969 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-29 09:23:28,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Mon, 28 Apr 2025 23:23:28 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'23'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-04-29 09:23:28,118 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7437055328:AAHgZeBAUu-fLz90H9prMWFg-1mz2z0qzrg/getUpdates "HTTP/1.1 200 OK"
2025-04-29 09:23:28,118 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-29 09:23:28,118 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-29 09:23:28,118 - httpcore.http11 - DEBUG - response_closed.started
2025-04-29 09:23:28,118 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-29 09:23:28,118 - telegram.ext.ExtBot - DEBUG - Call to Bot API endpoint `getUpdates` finished with return value `[]`
2025-04-29 09:23:28,118 - telegram.ext.ExtBot - DEBUG - No new updates found.
2025-04-29 09:23:28,118 - telegram.ext.Updater - DEBUG - Updater.stop() is complete
2025-04-29 09:23:28,118 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-04-29 09:23:28,119 - telegram.ext.Application - DEBUG - Waiting for update_queue to join
2025-04-29 09:23:28,119 - telegram.ext.Application - DEBUG - Application stopped fetching of updates.
2025-04-29 09:23:28,119 - telegram.ext.Application - DEBUG - Waiting for running jobs to finish
2025-04-29 09:23:28,119 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-04-29 09:23:28,129 - telegram.ext.Application - DEBUG - JobQueue stopped
2025-04-29 09:23:28,129 - telegram.ext.Application - DEBUG - Waiting for `create_task` calls to be processed
2025-04-29 09:23:28,129 - telegram.ext.Application - INFO - Application.stop() complete
2025-04-29 09:23:28,130 - httpcore.connection - DEBUG - close.started
2025-04-29 09:23:28,130 - httpcore.connection - DEBUG - close.started
2025-04-29 09:23:28,130 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:23:28,130 - httpcore.connection - DEBUG - close.complete
2025-04-29 09:23:28,130 - telegram.ext.ExtBot - DEBUG - This Bot is already shut down. Returning.
2025-04-29 09:23:28,130 - telegram.ext.Updater - DEBUG - Shut down of Updater complete
